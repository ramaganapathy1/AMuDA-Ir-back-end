IEEE COMMUNICATIONS SURVEYS & TUTORIALS, VOL. 15, NO. 3, THIRD QUARTER 2013

1281

A Survey of Indoor Inertial Positioning
Systems for Pedestrians
Robert Harle
Abstract‚ÄîWith the continual miniaturisation of sensors and
processing nodes, Pedestrian Dead Reckoning (PDR) systems
are becoming feasible options for indoor tracking. These use
inertial and other sensors, often combined with domain-specific
knowledge about walking, to track user movements. There is
currently a wealth of relevant literature spread across different
research communities. In this survey, a taxonomy of modern
PDRs is developed and used to contextualise the contributions
from different areas. Techniques for step detection, characterisation, inertial navigation and step-and-heading-based deadreckoning are reviewed and compared. Techniques that incorporate building maps through particle filters are analysed, along
with hybrid systems that use absolute position fixes to correct
dead-reckoning output. In addition, consideration is given to the
possibility of using smartphones as PDR sensing devices.
The survey concludes that PDR techniques alone can offer
good short- to medium- term tracking under certain circumstances, but that regular absolute position fixes from partner
systems will be needed to ensure long-term operation and to
cope with unexpected behaviours. It concludes by identifying a
detailed list of challenges for PDR researchers.
Index Terms‚ÄîDead Reckoning, Inertial Navigation, Particle
Filters, Wearable Computers

I. I NTRODUCTION
ALES of mobile computing devices such as smartphones
are now overtaking those of traditional desktop computers. This increased mobility has spurred interest in location
awareness and new interaction modalities that can use it.
Smartphones can now provide local news and weather, direct
users to the nearest bank, navigate vehicles around traffic, and
monitor the progress of every jogger, cyclist and hiker.
This location revolution has been underpinned by the deployment of Global Navigation Satellite Systems (GNSSs)
such as GPS. These are, however, incapable of tracking
indoors‚Äîwhere most people spend the majority of their
time. Providing location services within a building has many
potential applications, including:
‚Ä¢ Safety‚Äîlocation systems provide emergency services
with an immediate view of where building users are at
any time;
‚Ä¢ Security‚Äîlocation-awareness permits automatic locking
of sensitive resources if the owner is not present;
‚Ä¢ Resource-efficiency‚Äîsmart buildings can use the knowledge of where its users are to optimise heating, lighting
and other resources;
‚Ä¢ Automatic resource routing‚Äîfollow-me applications allow telephone calls to route to the nearest device and for
users to efficiently find colleagues;

S

Manuscript received 19 April 2012; revised 23 August 2012 and 10
December 2012.
R. Harle is with the Department of Computer Science, University of
Cambridge, UK (e-mail: robert.harle@cl.cam.ac.uk).
Digital Object Identifier 10.1109/SURV.2012.121912.00075

Visitor navigation‚Äîvisitors unfamiliar with a building
can quickly navigate to rooms of interest.
Many diverse techniques have been proposed to enable
indoor location and there is a large body of literature relating
to the problem. The expense and time required to install,
configure and maintain these systems has so far prohibited
general deployment. One solution to this has been to layer
them above deployed communications systems such as GSM,
WiFi, and Bluetooth [1], but this can result in sub-optimal
positioning since the communications access points are rarely
deployed to provide optimal location geometry and coverage
overlap.
This work surveys an emerging subset of tracking systems
that use inertial sensors to perform dead reckoning. These
systems typically compute their own positions and their key
advantage is that they require very little, if any, physical
infrastructure to function. They also offer a degree of location privacy since the user can choose not to share the
information with any third party. Note, however, that failure to
share location data severely limits the available location-aware
applications.
Interest in these systems is peaking because the crucial
sensors have become sufficiently small and inexpensive to
enable practical tracking of individuals (who must carry them
at all times). Furthermore, the widespread deployment of
smartphones‚Äîmost of which contain the relevant sensors‚Äî
means a near-ubiquitous deployment of inertial devices exists
that users already carry and charge.The challenge now is to
exploit these sensors to achieve tracking robustness levels
similar to that demonstrated by a GNSS.
This survey is structured as follows: Section II briefly
reviews indoor positioning in general; Section II-B examines
the invariants to be exploited in ambulatory motion; Section III
surveys the different techniques that have been used to detect
steps within sensor data; Section IV looks at the application
of Inertial Navigation Systems (INS) research; Section V considers an alternative step-and-heading approach; Section VI
surveys the use of particle filters and map-matching techniques
to improve location estimates; Section VII considers the hybrid
relative/absolute systems that have been proposed; and then
Sections VIII and IX conclude by identifying open research
areas and future research directions.
‚Ä¢

II. I NDOOR P OSITIONING S YSTEMS
There exist many surveys of wireless positioning systems in
the literature. With the possible exception of inertial systems
such as those described here, comprehensive coverage is
provided by Hightower and Borriello [1], Sun et al. [2],
Liu et al. [3], and Gu et al. [4]. A reiteration of their
contents is beyond the scope of this work, but there is benefit

c 2013 IEEE
1553-877X/13/$31.00 

1282

IEEE COMMUNICATIONS SURVEYS & TUTORIALS, VOL. 15, NO. 3, THIRD QUARTER 2013

in highlighting a few key techniques since hybrid systems
are also gaining traction (see Section VII). The following
techniques are described in more detail in the cited surveys.

	


Lateration and angulation systems. These compute distances or bearings between the mobile unit and an array of
base stations at known locations. Difficulties arise indoors
because radio signals may not propagate along the direct path
due to walls and other obstructions. Careful choice of the
signal type can assist here: ultrasonic systems have shown
high accuracy but are expensive to deploy and maintain;
whilst Ultrawideband radio systems such as those supplied by
Ubisense1 can achieve around 20 cm accuracy, but are costly,
difficult to retrofit, and require specialist location tags to be
carried by users.
Proximity systems. Rather than provide co-ordinate location, these systems provide only coarse location (perhaps the
nearest room or building section). Examples include RFID
systems and Bluetooth stations. They have the advantage of
requiring little calibration, but need a high density of readers
to gain reliable, ubiquitous coverage.
Radio fingerprint systems. Perhaps the most successful
indoor systems to date are those based on radio fingerprinting.
Here, signal properties such as received strength are compared
to a database of properties previously collected at a variety
of locations (a radio map). The closest match is returned as
the estimated position. WiFi is a common choice due to its
ubiquity. Accuracies of a few metres are typically reported.
Dead-reckoning systems. These systems use sensors on the
user to estimate relative rather and absolute location i.e. the
change in position since the last update. They require little or
no infrastructure to be pre-installed in buildings, but without
an external reference, errors quickly accrue.
Fingerprint systems are a good example of where a tension
can form between location and communications performance.
The smaller the dimensionality of the fingerprint, the harder
it is for a system to reliably distinguish between neighbouring
fingerprints and the worse the location performance‚Äîi.e.
we seek to maximise coverage area overlap between access
points. Contrast this with an ideal communication-optimised
deployment, where we seek the minimum overlap that gives
comprehensive coverage. As such, higher-accuracy WiFi positioning systems will often require additional infrastructure
and may introduce signal interference that degrades core
communications performance [5]. In addition, the cost of
continuously using the WiFi radio on a mobile device can
be prohibitive. Nonetheless, they are the target of significant
research effort.
This survey is concerned with the recent developments
in dead-reckoning for walking users and hybrid systems using such techniques‚Äîoften called Pedestrian Dead-Reckoning
(PDR) systems. These systems are of particular importance
because they retain the low deployment costs associated with
dead-reckoning whilst successfully addressing many of the
shortcomings.

1 http://www.ubisense.net

	

Fig. 1. INS and SHS. An INS computes the full trajectory of a unit in
3D (solid line with position dots), whilst an SHS deals only with gross step
vectors in 2D (arrow sequence)

A. Types of PDR
In this work, a distinction is made between Inertial Navigation Systems (INSs) and Step-and-Heading Systems (SHSs)‚Äî
see Figure 1. An INS is a system that tracks position by
estimating the full 3D trajectory of the sensor at any given
moment. An SHS is specific to pedestrians, estimating position
by accruing {distance, heading} vectors representing either
steps or strides2 .
If the output of an INS worn by a pedestrian is somehow
sliced into steps, then it forms a subset of an SHS, referred to
here as an SHS-INS system. However, other techniques can
underlie an SHS with better noise robustness, as discussed
shortly. The fundamental cycle for an SHS is:
1) identify subsets of the data corresponding to individual
steps or strides;
2) estimate the length of the step; and
3) estimate the step heading or change in heading.
The work on INSs and SHSs owes much to the robotics
community. The problem is significantly more challenging in
this context since the robot is replaced by a user, meaning:
we no longer control how the sensors move and we lose any
feedback loop that could ensure a space is completely covered;
we are limited by the available sensors; and the movements are
more complex. Nonetheless, a number of robotics techniques
have proved useful, including:
‚Ä¢

‚Ä¢

Particle filters‚Äîthese are numerical solutions to the
Bayesian estimation framework that allow the incorporation of complex constraints that can help limit drift;
and
Simultaneous Localisation and Mapping (SLAM)‚Äîthese
techniques were developed to allow a robot to locate itself
within an environment it has not seen before. The typical
sensors used for SLAM (laser rangefinders, cameras) are
not applicable to pedestrians but the techniques enable

2 A step is the period between two footfalls on opposite feet, whilst a stride
is the same quantity but between the same foot.

HARLE: A SURVEY OF INDOOR INERTIAL POSITIONING SYSTEMS FOR PEDESTRIANS

1283

18
Gyroscopes
12
Accelerometers

Compass
(Magnetometer)
13

16

Heading
15

1
Optical
21

14

Step Detection

19

2
Pressure

Position

22
INS

17

WiFi
Barometer

3

4

24

23

7
8

Electromyography (EMG)
Sensors

SHS
3

Step Length

25

SLAM

6
5
RF Ranging

26
Particle Filter

Statistical Model
Ultrasonic Ranging

11

10
Building Maps

GPS

1. [6]
2. [7]
3. [8]
4. [9]‚Äì[12]
5. [13]
6. [14]
7. [15]‚Äì[19]
8. [13], [16], [17], [19]‚Äì[21]
9. [16], [17], [21]
10. [16], [17], [21]
11. [22]‚Äì[25]
12. [12], [14]
13. [11], [13], [20], [26]
14. [15]‚Äì[18], [21], [27]‚Äì[31], [31]
15. [19], [21], [31], [32]
16. [9]‚Äì[12], [12], [15], [17], [19], [28], [29], [33]
17. [15], [15], [17], [19], [21], [26]‚Äì[29], [31]
18. [13], [19]
19. [32], [34]
20. [10]
21. [12], [19], [20]
22. [16]‚Äì[19]
23. [18]
24. [25], [29]
25. [30], [33]
26. [24]

RFID

Radio Fingerprints

Fig. 2. PDR configurations. System inputs are connected via annotated arrows to ellipses, which represent algorithms and system subunits. Arrow annotations
give a numerical key into the list of literature references on the right..

location systems that improve over time as they learn
about the environment.
Both of these techniques are addressed in more detail later
in this survey. Figure 2 provides a graphical summary of all the
sensors and techniques that are surveyed herein. Sensors are
connected to system subunits (shown in ellipses) by arrows
that represent the flow of data. For example, the arrows
starting at the Accelerometers label represent accelerometry
data that have been used to detect steps; to directly estimate
step lengths; and been combined with gyroscopes or with
gyroscopes and a compass to form an INS. For each flow
of data, the figure gives a set of references to literature that
uses that specific sensor or technique.
B. Ambulation
Many of the systems described here succeed by assuming
ambulatory motion and deriving related invariants. Ambulation
itself can be characterised by the alternate ‚Äòvaulting‚Äô of the
body over a stiffened leg, with the fall being broken by the
opposing leg. At any given moment at least one foot is in
contact with the ground‚Äîthere is no flight phase as is found
when running. Instead the gait cycle is usually defined in terms
of the phases occurring at a specific foot: the primary phases
are stance and swing. In its stance phase the foot of interest
is firmly planted on the ground, providing a pivot point over
which to vault. In the swing phase, the foot lifts from behind
the pedestrian and swings through to break the fall and enter
its stance phase.
The transition from stance to swing involves the foot
‚Äòpeeling‚Äô from the floor, providing a final push from the
toes. This event goes by many names, but toe-off and pushoff are the most common. The transition back to the stance
phase begins with the heel contacting the floor (the heel-strike

or foot-down event) before the foot flattens (the foot-flatten
event). The foot remains flattened until the transition to the
swing begins, and the cycle restarts. The strong periodicity
in the movement coupled with the tendency of humans to
sustain a consistent pace allows for a variety of constraints to
be applied.
III. D ETECTION OF THE G AIT C YCLE
The first task of an SHS is the identification of steps or
strides within the data. In fact, this is even used in many
INSs, as discussed shortly. At a minimum, these algorithms
must permit for accurate step counting, although many systems
also require accurate step segmentation. We can thus identify
two main algorithm types:
‚Ä¢ Stance detection‚Äîalgorithms that identify periods of data
throughout which a given foot is planted on the floor.
To do this, the sensor is mounted to the foot. Typically
these are appropriate for step counting but give poor
segmentation output;
‚Ä¢ Step cycle detection‚Äîalgorithms that detect cycles in the
sensor data caused by the repetitive motion of walking.
This may involve searching for repeating data patterns or
for repeating events (e.g. the heel-strike). These are well
suited to step segmentation.
Typical stance detection algorithms are threshold-based.
The principle is that the sensor will be static during the stance
phase and the inertial sensors should report a corresponding
lack of activity that thresholding can easily identify. Most
algorithms threshold on the accelerometer magnitude [11],
[17], [35], although angular velocity thresholds have also been
used [21], [32], [36] and combinations have been trialed [27].
Even magnetometer thresholding can give usable stance detection under some circumstances [19]. In some cases applying

1284

IEEE COMMUNICATIONS SURVEYS & TUTORIALS, VOL. 15, NO. 3, THIRD QUARTER 2013

Fig. 3. Autocorrelation-based step cycle detection. The top graph shows the raw acceleration magnitude during five sample strides. The autocorrelation of
the mean-subtracted signal is shown in the bottom graph, with strong peaks associated with each stride.

the threshold to the moving variance of the signal has been
preferred to applying it to the instantaneous magnitude [15],
[19].
A successful stance detection enables step counting simply
by assuming one stance period per stride per foot. Jimenez
reported errors of just 0.1% and 0.2% based on thresholding
accelerometer variance and angular velocity, respectively [19].
However, threshold-based stance detection assumes at least
one sensor on the foot. A large deployment of shoe sensors
is not inconceivable, but is highly unlikely in the short- to
medium-term.
Even were such a deployment achieved, there are limitations
to the value of stance detection. Because shoe sensors undergo
high accelerations they experience additional movements associated with shoe deformation and bounce. This, combined
with the empirical nature of thresholds (see [12]), means the
start and end points of a threshold-computed stance period do
not represent the true foot-down or toe-off events. Rather they
represent an inconsistent subset of the full stance period.
Instead, other techniques have been developed to accurately
identify specific events for data segmentation, as well as to
allow the sensors to gather data from elsewhere on the body.
These include:
‚Ä¢ Peak detection‚Äîthe heel strike is associated with sharp
changes to the vertical acceleration. Standard peak detection algorithms can be used to highlight potential strikes.
Note that each foot impact may generate multiple local
peaks the nearer to the foot it is sited, due to the higher
forces resulting in sensor bounce [37], [38]. This can
significantly increase the algorithm complexity.
‚Ä¢ Zero crossings‚Äîa cheaper way to use the cyclic property
is to monitor the acceleration value for zero crossings

‚Ä¢

‚Ä¢

(essentially a form of thresholding) [39]. This is a popular
choice for pedometers or activity monitors such as the
Actigraph3 due to its simplicity.
Auto-correlation or template matching‚Äîthe cyclic nature
of walking leads to strong periodicity in the sensor
data, regardless of the attachment site. The cycle can
be extracted by seeking maxima in the mean-adjusted
autocorrelation of a sequence of sensor data, such as
the acceleration magnitude (Figure 3) [38]. Whether the
peaks correspond to a step or a stride will depend on
where the sensor is attached‚Äîthe nearer to a foot, the
more asymmetric the response for each step. If a sample
sequence of data for a step or stride has previously been
collected, cross-correlation with this ‚Äòtemplate‚Äô data can
also identify steps or strides using the same process.
Spectral analysis‚Äîthis involves computing the frequency
spectrum of the cyclic data and identifying strong peaks
at typical stepping frequencies. Windowed subsets of the
data (with a width that includes at least two cycles) are
converted to the frequency domain and the dominant
frequency taken as the walking frequency [40].

The last two methods depend on identifying periodicity in
the sensor signals. It is difficult to write such algorithms to
handle changes in walking speed, to capture one-off steps or
to reject false positives caused by any repetitive movement
within the expected frequencies. However, it is most common
for humans to adopt a natural (and surprisingly consistent)
walking pace, for which such algorithms are highly robust.
3 The Actigraph is a belt-worn unit that provides long-term logging of
an internal accelerometer for the purposes of activity monitoring. See
http://www.theactigraph.com.

HARLE: A SURVEY OF INDOOR INERTIAL POSITIONING SYSTEMS FOR PEDESTRIANS

1285

TABLE I
S TEP DETECTION SUMMARY.
Author
Judd
Park et al.
Ladetto

Citation
[26]
[44]
[9]

Sites
Unspecified
Foot
Lower
back,
thorax
Waist
Waist?

Sensors
Acc
Pressure
Acc

Stance
No
Yes
No

Signals used
Vertical acceleration
Vertical force
Vertical and forward acceleration

Technique summary
Low-pass filter, peak detect
Wavelet decomposition, peak detect

Acc, Gyro
Acc

No
No

Low-pass filter, peak detect
Peak detect, test gradient

Acc

No

Pitch angle
Vertical and forward acceleration
Vertical acceleration

Yes
No

3D acceleration magnitude
Range between feet

Yes
Yes
Yes

Jirawimut et al.
Kourogi et al.

[13]
[34]

Randell et al.

[10]

Stirling et al.
Saarinen et al.

[11]
[14]

Foot, backpack
Foot, torso
Foot

Cavallo et al.
Foxlin
Kim et al.

[32]
[27]
[12]

Foot
Foot
Ankle

Acc
Ultrasonic
ranging
Gyro
Gyro, Acc
Acc (1D)

Beauregard
Dippold
Godha et al.

[20]
[42]
[15]

Head
Waist
Foot

Acc
Acc
Acc

No
No
No

Ojeda et al.
Beauregard et al.
Krach et al.
Jimenez et al.

[36]
[45]
[17]
[19]

Foot?
Foot
Both Feet
Foot

Yes
Yes
Yes
Yes

Castaneda et al.
Wang et al.
Goyal et al.

[35]
[8]
[39]

Foot
Calf
Waist

Gyro
Acc. Gyro
Acc. Gyro
Acc,
Gyro,
Compass
Acc, Gyro
EMG
Acc

3D gyro magnitude
Raw acc, gyro
Horizontal, vertical acceleration
Acceleration magnitude
Vertical acceleration
Acceleration magnitude, variance
Gyro magnitude
Raw signals?
Acceleration magnitude
Magnitudes

Yes
N/A
No

Magnitudes
EMG signal
Vertical acceleration

Ria et al.

[23]

Acc

No

Not specified

Faragher et al.

[24]

Various
(pocket,
handheld)
Hip

Thresholding across 0.5s intervals
Unclear
Thresholding
Compares: variance of acc. Magnitude with
thresholds on compass or gyro
Fuzzy logic thresholding
Peak detect
Double integration, peak detection. One per
zero-crossing
Autocorrelation

Acc

No

Acceleration magnitude

Thresholding

All of these techniques are usually applied to accelerometer
signals, often after applying a low-pass filter to remove noise.
Filter cut-off frequencies of around 20 Hz retain the step
periodicity, although filtering down to 2 or 3 Hz has also been
used successfully [41]. It should be noted that most implementations claim to use only the vertical acceleration, but do not
compensate for changes in the global pose of the sensor during
a step. Instead they assume that one of the accelerometer axes
remains vertical throughout. This assumption is most valid
for inertial sensors attached to the torso of the body [9], [42],
although it has proved acceptable on the foot [10].
Many of the algorithms are tested on flat surfaces, which
is appropriate for the majority of buildings. However, Ladetto
reports that the assumptions used by many PDR systems break
down on inclines of 10% or more [9]. More recently, Wang et
al. have demonstrated that different gait patterns corresponding
to different inclines can be distinguished autonomously to
accuracies exceeding 90% [43]. From this we can conclude
that a modified PDR system could cope with long ramps found
within a building for wheelchair access.
Table I summarises some prominent positioning systems in
terms of the sensors and signals they use, and whether they
perform stance detection or step cycle detection. The lack of
uniform testing methodologies makes quantitative comparison
difficult here‚Äîin many cases the step detection component is
only a small part of work that receives only minimal scrutiny.
It is an open research problem as to which of these techniques

Moving average, peak detection (maximum
followed by trough)
Unclear
Range minima and maxima
Thresholding (15 deg/s)
Thresholding
Peak detect
Low pass filter, zero crossings
Peak detect
Moving average, thresholding, zero-crossings

works best when given a diverse test population, a wide range
of environments and unconstrained day-to-day movements.
A. Non-Inertial Sensors for Step Detection
A variety of non-inertial sensors can also facilitate step or
stance detection: Park et al. used pressure sensors embedded
in the sole of the shoe [44]; Toth et al. used impact switches in
a similar manner [46]; Saarinen et al. used ultrasonic ranging
between the feet [14]; and Wang et al. used electromyography
(EMG) sensors attached to the calf [8]. Whilst effective, these
solutions all require more invasive attachment to the user and
rarely offer any benefit over the use of inertial sensors (which
are still needed for subsequent PDR analysis anyway).
B. Detection Accuracies
The techniques are often presented as offering robust step
counting and/or stance detection. This is perhaps unsurprising
since the sensors undergo significant changes throughout a
gait cycle and each cycle is strongly correlated with the last.
The observed accuracies will depend on many factors, but step
counting accuracies in excess of 99% are commonly quoted
under laboratory conditions with few false negatives.
In reality, finding a robust and reliable technique for step
cycle detection away from the foot is not simple. Quoted
accuracies are rarely derived from testing on a representative
sample of the population and do not account for different

1286

IEEE COMMUNICATIONS SURVEYS & TUTORIALS, VOL. 15, NO. 3, THIRD QUARTER 2013

heights, weights, shoes, surfaces or gaits. It is also rare to
see the test subjects act freely‚Äîinvariably they are tasked
with performing a long, continuous walk. Under such circumstances the sensor signal exhibits strong self-similarity which
simplifies detection. Less constrained motions (stumbles, sidesteps, shuffles, etc.) are problematic, and arbitrary cyclic
motions may trigger the frequency-based techniques.
The most comprehensive pedometry (step counting) studies
have been carried out within the medical domain. For example,
Marschollek et al. provided a detailed study with over 200 test
subjects that varied in age from 7 to 88 years old, with varying
degrees of health. Using a waist-mounted accelerometer and
a variety of processing algorithms, they found errors in the
step counts of 8.4% in healthy subjects (using a variant
of thresholding) and as high as 29.3% in mobility-impaired
subjects (using autocorrelation). They conclude that ‚Äúnone of
the algorithms work very well‚Äù, although insufficient details
are given to reproduce the algorithms employed and more
sophisticated variants have now been proposed.
More recently Rai et al. described an autocorrelation algorithm ostensibly for step counting but capable of segmenting
data into strides. Their Normalised Auto-correlation based
Step Counting (NASC) algorithm [23] was tested on walking
and non-walking data collected from six people. They used a
smartphone accelerometer in a variety of positions including
handheld, in a pocket and in a handbag. They report false
positive rates of 0% and false negative rates of 0.6%. These
results are very encouraging, but there is insufficient detail in
the testing methodology to be able to extrapolate them to a
larger population outside the laboratory.
IV. INS S IN MORE D ETAIL
An INS uses triaxial accelerometers and gyroscopes to track
orientation and position changes [47]. In the strapdown configuration used by pedestrians the sensors are combined into
a rigid package and firmly attached to the body4‚Äîwe speak
of the world frame of reference (with axes in the horizontal
and vertical planes) and the sensor frame of reference (with
three mutually perpendicular measurement axes pointing in
arbitrary world directions).
In robotics the attitude of the sensor can often be constrained such that, for example, the sensor z-axis coincides
with the vertical world axis. Tracking position then involves subtracting the gravitational signal from the vertical
accelerometer signal and performing double integration on the
remaining 3D acceleration (i.e. integrating once to velocity
and twice to displacement). In a PDR context, however, the
sensor is not only unlikely to be axis-aligned, it will also
continuously rotate with respect to the world frame during
the walking cycle. We must therefore track the rotation of the
sensor using the angular velocities provided by the gyroscopes.
This introduces a third integration to each position update.
Inevitably, measurement errors are present within the sensor
data, and the triple integration of them results in a potentially
cubic growth in time (drift). INSs for aviation, marine and
4 An alternative configuration uses a gyro-stabilised platform to maintain the
pose of the accelerometers with respect to the global axes. Such systems are
accurate but bulky and expensive, making them inappropriate for pedestrian
navigation.

the military use highly accurate sensors that keep the error
sources very small and permit tracking for many hours. These
are too bulky and expensive for a PDR, which must instead
use Micro Electro-Mechanical Systems (MEMS) technology.
MEMS sensors are small and highly portable but they are
also subject to more significant error sources. Open-loop
integration of MEMS inertial sensors is only possible for a
minute or two before the drift dominates [47].
Strapdown inertial navigation algorithms have been well
studied and the standard approach to limit drift uses an Extended Kalman Filter (EKF) in the complementary or indirect
form, whereby the filter tracks the errors in the system state
rather than the system state directly. A 15-state model is
commonly used: three states each for position, velocity and
attitude errors plus six states to model the accelerometer and
gyroscope biases [27], [48]. The process structure is illustrated
in Figure 4.
A. Zero Velocity Updates (ZUPTs)
To counter drift it is necessary to regularly close the
integration loop by applying external constraints to the system.
The most widespread PDR constraint is provided by Zero
Velocity Updates (ZUPTs). ZUPTs assert that the sensor is
stationary and can be applied during the stance phase provided
the sensor is attached to the foot. ZUPTs were first used in a
PDR context in the NavShoe project by Foxlin5 , who reported
good results in 2005 [27]. ZUPTs are easily incorporated into
the INS structure of Figure 4 by formulating them as pseudomeasurements of zero velocity.
The application of ZUPTs means that open loop integrations
only occur during the swing phase of the foot to which the
sensor is attached. For such short durations, drift accrual is
limited and longer tracking durations are thus feasible. For a
reliable output, however, ZUPTs must only be applied when
the foot (and hence sensor) is completely static. Issues can
arise when the sensor is attached any higher than the ball of the
foot. The peeling motion associated with the transition from
stance to swing means the heel rises soon after the foot-down
event and hence a sensor in the mid-foot will start experiencing
an acceleration as the foot levers up. These small accelerations
occur before the strict end of the stance phase and it is
necessary to account for these errors by applying a non-zero
covariance alongside the ZUPT pseudo-measurement.
B. The Use of Magnetometers
Many commercial inertial sensor units contain triaxial magnetometers in addition to the accelerometers and gyroscopes
necessary for an INS. Magnetometers provide a direct estimate
of the user‚Äôs absolute heading, which is particularly useful
for correcting the inevitable heading drift that accrues in an
INS, even with ZUPTs applied. Magnetometer readings are
incorporated into the framework of Figure 4 by applying them
as absolute heading measurements.
However, the Earth‚Äôs magnetic field is relatively weak at its
surface and modern buildings, filled with metal and conducting
5 Foxlin‚Äôs article itself credits a 1996 DARPA project for the introduction
of ZUPTs for a PDR.

HARLE: A SURVEY OF INDOOR INERTIAL POSITIONING SYSTEMS FOR PEDESTRIANS

1287

Fig. 4. The standard INS solution involving a 15-state Extended Kalman Filter

wires, can overpower the natural signal, leading to local
‚Äòdisturbances‚Äô. Afzal et al. performed detailed experiments
indoors and concluded that different building materials have
significantly different effects on magnetometers, with heading
errors of up to 100‚ó¶ observed [49]. In their office environment,
Rai et al. report magnetic errors were contained to within 15‚ó¶
at 90% of their test locations, with a maximum deviation of
30‚ó¶ observed.
A common correction algorithm is to reject any readings
where the magnitude lies outside some tolerable range of the
expected value. Afzal et al. noted that this can be overzealous since vertically polarised magnetic fields will affect the
magnitude but not the horizontal heading [50]. To use this
knowledge, however, requires that the pose of the sensor in
the world frame of reference be known except for horizontal
heading so there are practicality issues.
Combining both gyroscope and magnetometer inputs has
yielded some success since the two sensors have complementary error characteristics‚Äîgyroscopes give poor long-term
orientation, while magnetometers are subject to short-term
orientation errors. Kim and Park exploited this by comparing
the angular velocities measured by the gyroscope with those
computed from successive magnetometer readings [12]. A
significant difference was taken to signify the presence of
a magnetic disturbance and the compass measurements were
discarded. Their results indicated an improvement but only
considered one environment that was not reported to suffer
from strong magnetic disturbances.
Magnetic disturbances can also be modelled within the EKF
framework of Figure 4 as per [27], [39]. By assuming a high
spatial frequency of disturbances, the EKF is able to estimate
the covariance in the heading measurement. However, Foxlin
noted that the large number of updates typically applied during
a stance phase can bias the result strongly, and so used only
a single magnetometer reading per step [27].

In summary, there are many proposals for techniques to
address magnetic disturbances to aid in heading determination.
However, more detailed testing in a wide variety of environments is needed before any firm conclusions can be drawn.
In the meantime, fusing gyroscope output with the compass
provides a heading estimation (or heading change estimation)
that is reasonably robust in most environments.
C. Results of INSs with ZUPTs
Ultimately, integration drifts limit the usefulness of pure
INS-based techniques for anything other than short-term indoor tracking. ZUPT-based INSs typically exhibit return-tostart errors6 of the order of a few metres in the literature. However, the testing usually involves contrived situations where
the user‚Äôs initial position is known and they are told to walk
along prescribed paths without stopping. Little consideration
has been given to more natural situations, where a user may
move to avoid obstacles, may sit and swing their legs, may
amble aimlessly, or may perform some unusual activity such
as jumping or skipping. The practicality of requiring a footmounted sensor (for ZUPTs) also detracts from the solution.
Nonetheless, ZUPT-based INSs have been shown to give
good medium-term tracking accuracies when combined with
building maps (see Section VI).
V. S TEP AND H EADING S YSTEMS (SHS S )
A drift-free INS provides a full 3D trajectory for a sensor.
Whilst useful, this level of detail is not necessary in most
tracking scenarios. Navigation in 2D in the horizontal plane
and using step vectors rather than complete limb trajectories
is sufficient. Step and Heading Systems (SHSs) output a series
6 A return-to-start error is the error in predicted position after a user
performs a walk that brings them back to their start position, and is useful
when the true path of the walk is not available.

1288

IEEE COMMUNICATIONS SURVEYS & TUTORIALS, VOL. 15, NO. 3, THIRD QUARTER 2013

of {step length, step heading} or more often {step length, step
heading change} polar vectors that can be summed in a 2D
vector space to track position. Although these vectors could
be derived simply by degrading the INS output (forming an
SHS-INS), they can also be estimated without using the triple
integration that leads to fast drift accrual in an INS. As an
example, step cycle detection can be used to identify the sensor
data associated with a single step and the length may then be
directly estimated from its duration (i.e. no integration).
A. Length Estimation
In fact, the simplest approach to estimating step length is to
assert it as constant. Pedestrians have a natural walking pace
with a surprisingly constant step length. However, this natural
walking pace is adjusted when rushing, ambling or walking
with others. Weinberg reported that the step length can vary
by as much as 40% between pedestrians walking at the same
speed, and up to 50% across the range of walking speeds of
an individual [41]. Note that in short tests where participants
are asked to walk continuously along a specified route, they
are likely to adopt their natural walking pace and this may
lead to an overly optimistic tracking accuracy.
Weinberg also described a dynamic step length estimation
procedure based on the maximum vertical displacement of the
hip (‚Äúbounce‚Äù). The stride length was shown to be a function
of the bounce and the vertical angle between the highest and
lowest point of the hip during a single stride [41]. This angle
is taken as constant although it is actually related to the leg
length of the user. Nonetheless the step lengths are reported
to be within 8% of their true values, which may be sufficient
for some uses.
An alternative is to base step lengths on the observed step
frequencies, which can be estimated using the step detection
techniques in Section III. Research in the medical community
has shown a tight coupling between the step frequency and
the walking speed (which is little more than a proxy for
step length). Although the precise relationship is non-trivial
(see [51]), it is common to fit a linear relationship, which is
sufficient to achieve an RMS error of 5.6% [52].
Direct measures of each step have also been used. For
example, Saarinen used ultrasonic sensors mounted on the
front and back of each shoe [14] and similar range-finding
techniques have been used elsewhere. Such techniques unquestionably produce higher quality displacement estimates.
However, the increase in accuracy is often negligible since
the larger heading drift is typically the limiting factor. Finally,
some systems estimate step lengths iteratively by evaluating
the paths produced using different lengths and using building
maps to choose an optimal length (see also Section VI) [23].
B. Heading Estimation
Heading estimation within an SHS is typically no different
than for an INS since there are so few sensors available
as inputs. Single integration of gyroscope signals provides
estimates of heading change. Because SHSs can avoid using
subsequent integration for the step length, the overall drift
does at least grow linearly rather than cubically. In addition,
some systems use only a single gyroscope mounted parallel

to the torso, making the assumption that it remains (near)
vertical during walking. As in Section IV-B, magnetometers
may also be used directly or fused with the gyroscope outputs
to estimate heading.
C. SHS-INS Systems
Some systems derive PDR events from an underlying INS.
To do this they use the step detection techniques described
in Section III to segment the INS output into steps. These
are then summarised as {length, heading} pairs. Such SHSINS systems naturally suffer from the same drift accrual found
in pure INS systems and they are used merely because SHS
outputs are simpler to handle when working with the higherlevel filters necessary to incorporate other constraints such as
maps [53].
VI. I NCORPORATING M AP M ATCHING
Whilst the techniques previously described aim to minimise
the rate of drift accrual, they cannot prevent it. Longer-term
tracking of pedestrians has been achieved by incorporating
external measurements and environment information. Building
maps in particular are a popular way to address medium-term
drift.
Abdulrahim et al. proposed constraining movements to lie
along paths parallel to the external building walls [54]. For a
typical rectangular building, this constraint allows movement
in one of two perpendicular directions. Over a series of eight
walking loops that varied in duration from 12‚Äì40 minutes and
in length from 0.5‚Äì3 km, they achieved an average return-tostart error of 4.62 m using ZUPTs and orientation constraints,
versus an error of 153.62 m when only ZUPTs were applied.
Whilst these results are encouraging, errors of 5 m lead to
room ambiguity. It is also unclear how the system would cope
with free movements outside of contrived test conditions.
A. Particle Filters
The problem is similar to the routing problem faced by
vehicular navigation systems, where noisy position estimates
must be constrained to lie on public roads. Here, however, the
tracking error is often comparable to the distances between
route intersections (i.e. office doors) and users can quickly
change direction at will. Consequently not all of the vehicular
routing techniques are useful in a PDR context.
One of the key difficulties is representing the complex
shapes of buildings as constraints. Unlike ZUPTs, wall outlines are not easily related to raw sensor data and instead we
feed the output from an SHS into a higher level particle filter
to form an SHS-PF.
A Particle Filter is a numerical approximation to a Bayesian
filter [55]. It is made up of many ‚Äòparticles‚Äô, each representing
a possible 2D position and heading for the user in this context.
Some positions are perhaps more likely than others, so each
particle contains a weight value that represents the probability
of it being correct based on all the information to date. A
particle filter is iterative, with three traditional steps to each
iteration:

HARLE: A SURVEY OF INDOOR INERTIAL POSITIONING SYSTEMS FOR PEDESTRIANS

1289

TABLE II
SHS-PF SUMMARY.
Authors

Ref

System Description

Evaluation

PDR-INS + PF

No.
Users
1

Woodman et
al.

[53]

Woodman et
al.
Woodman et
al.
Beauregard
et al.

[22]

PDR-INS + PF (as above)

1

[48]

PDR-INS + PF (as above)

1

[45]

PDR-INS + Backtracking
PF

1

Klepal et al.

[16]

PDR-INS + Backtracking
PF (as above)

1

Krach et al.

[56]

PDR-INS on each foot +
PF

1

35-minute walk. Three
floors. WiFi containment
Five 10‚Äì15 minute walks.
Three floors.
10-minute walk. Two
floors. Manual ground
truth.
Multiple walks of up to 10
minutes. Manual ground
truth.
No details

16-minute
floors.

walk.

Three

1) update‚Äîeach particle is displaced according to a motion model (usually a constant velocity taken from the
previous iteration);
2) correct‚Äîeach particle is assigned a weight based on the
similarity between the motion-model step estimate and
the measured heading vector;
3) resample‚Äîa new particle set is generated by copying
particles in the current set in proportion to their weights
(this ensures that the particle set is distributed over likely
locations rather than unlikely ones).
SHS-PF systems were demonstrated independently in 2008
by Krach and Robinson ([56]); Widyawan, Klepal and Beauregard ([16]); and Woodman and Harle ([53]). All three choose
to incorporate a new step vector into the update phase (step
1 above) rather than into the weight assignment (step 2) as
described above. Without this modification, step 1 may move
many of the particles in significantly different directions to
those described in the measured step vectors. Consequently
they would be assigned low probabilities in step 2 and we
would require more particles (and hence more processing
power) to ensure enough particles with high probability persisted at the true position. i.e. each particle with state (xt ,yt ,Œ∏t )
incorporates a step event with step length l and heading change
Œ¥Œ∏ as follows [48]:
xt+Œ¥t
yt+Œ¥t

= xt + (l + nl ) cos(Œ¥Œ∏ + nŒ∏ ),
= yt + (l + nl ) sin(Œ¥Œ∏ + nŒ∏ ),

(1)
(2)

Œ∏t+Œ¥t

= Œ∏t + Œ¥Œ∏ + nŒ∏ ,

(3)

where nl and nŒ∏ are noise terms drawn from the step length
and heading uncertainty models, respectively. The three SHSPF systems mentioned above used zero-mean white Gaussian
noise processes to generate these terms, with variances appropriate to the confidence in the current step event.
In the assignment of weights in step 2, all three systems
assigned weights of zero to those particles that crossed a wall
boundary. This prevented those particles from being resampled
in filter step 3. The remaining particles were either assigned an
equal weight (Widyawan et al.) or assigned a weight using the
observed change in height of the step (Woodman and Harle).
A summary comparison of the three systems is provided
in Table II, which also considers incremental updates to the
works. Broadly speaking, the three had more in common than
not. Notable differences include:

Ninit

Ntrack

Initialisation

Accuracy Quoted

‚âà170

WiFi-assisted

0.73m 95th percentile

‚âà170

WiFi-assisted

No details

Variable

Variable
(136,000‚Äì
170)
Variable
(<228,001)
4478049

‚âà500

Uniform Prior

0.62m 95th percentile

Fixed

2000

2000

Manual?

0.74m

Fixed

2000

2000

Manual?

1.321m

No details

No details

No details

Uniform prior

‚ÄúCorridor width‚Äù

Particle
Scheme
Variable
Variable

The Woodman implementation made use of the KLD
resampling algorithm, which dynamically varies the number of particles in a filter;
‚Ä¢ The Beauregard implementation introduced backtracking,
whereby the filter kept a limited history of each particle‚Äôs
ancestors to allow deletion of an entire trajectory when
a particle was killed due to a wall constraint. This is a
variant of backward belief propagation also used by Rai et
al. [23] and is useful to improve position estimates made
in the past when live positioning is not a requirement.
‚Ä¢ The Krach implementation combined two SHS-INS
systems‚Äîone for each foot‚Äîto feed the particle filter.
The evaluations of these systems indicate tracking accuracies of around 1 m are feasible, but all were limited to single
users walking continuously for tens of minutes (Table II)
using foot-mounted sensors. Most people spend the majority
of their day in a sedentary state so it is not unreasonable
to assume walking durations of this magnitude. Nonetheless,
these evaluations are not sufficient to assert an arbitrary user
can be tracked throughout a day using an SHS-PF system.
‚Ä¢

B. Handling Lower Quality Inputs
To some extent, deficits in the quality of the SHS inputs can
be compensated for in an SHS-PF framework by increasing
the variances associated with each step event. In turn, this
will require an increase in particle number to better represent
the underlying probability distribution. However, this increase
may only be a small percentage increase and a worthwhile
trade-off to permit the use of lower grade sensors or simpler
SHS techniques.
For example, many of the different techniques for step
length estimation discussed in Section V-A have little effect on
the SHS-PF tracking accuracy since they all provide estimates
within small percentages of the true value. Where step counting is robust, it may even be possible to infer the characteristic
step length by including it as a state variable within the particle
filter as per [23]. Similarly, Woodman simplified the EKF used
in his INS system to avoid modelling the accelerometer and
gyroscope biases with little consequence when fed into an
SHS-PF [48].
C. Computational Demands and Scalability
Particle filters typically require greater storage and processing resources than other fusion techniques. The minimum

1290

IEEE COMMUNICATIONS SURVEYS & TUTORIALS, VOL. 15, NO. 3, THIRD QUARTER 2013

number of particles required at any moment is related to the
uncertainty in the user‚Äôs position. Woodman identified two
key regimes: localisation and tracking. In the latter there is
minimal uncertainty in the user‚Äôs position, the particle cloud
having converged about their location. In the former, there is
large uncertainty in the user‚Äôs position and the particle cloud is
spread across a large floor area. This large uncertainty requires
many more particles to represent adequately.
Evaluations such as those performed by Beauregard et al.
avoid the localisation problem by seeding the filter with a
prior centred on the user‚Äôs initial position, allowing it to begin
in the tracking regime. This allows a constant number of
particles to be used, but is not a practical solution. Even if
the initial location is known, the filter may fail and need to
be re-initialised without knowledge of the user‚Äôs location.
A more general prior would cover the entire tracking area.
For the three-floor 8725 m2 building used by Woodman, over
4,000,000 particles were needed to adequately represent such
a prior [53]. This number should be contrasted with the 500
particles needed for the tracking phase7 .
Both Woodman and Krach consider the convergence problem and conclude that coarse location information from an
auxiliary system would be highly beneficial. In [22], a WiFi
radio map (constructed using the PDR system itself) was used
to infer a containment region for the user, across which the
particles were uniformly distributed. This reduced the initial
particle count to less than 250,000. Using KLD resampling,
this number fell to below 500 as the filter entered the tracking
regime (the time taken for this depends on the environment
and the path taken through it).
Because the computation demands of an SHS-PF filter can
be significant, care must be taken to optimise the efficiency of
the processing code. In his thesis, Woodman described a series
of optimisations in depth, including segmenting the floor into
polygons, particle clustering, and more [48].
VII. S MARTPHONE AND H YBRID S YSTEMS
One of the key attractors for PDR systems is the wide
deployment of appropriate sensors in smartphones. However,
we can exert very little control over where the smartphone
is attached and hence what it measures. Smartphones may
be carried in front pockets, back pockets, side pockets, shirt
pockets, backpacks, handbags, on belt clips or in the hand.
They may be firmly held in place, or free to move, and may be
moved from their current position without warning. Steinhoff
and Schiele experimented with an INS fed by sensors in the
trouser pockets of eight test subjects [57]. They reported errors
of 14.4% (95th percentile) of the distance travelled compared
to a foot-mounted ground truth sensor. Whilst promising, such
errors will accrue quickly to limit tracking ability.
If a system is able to recognise where a smartphone is being
carried it may be able to adapt its algorithms to better detect
the walking cycle through an SHS approach. Even so, very
few systems have demonstrated an ability to cope with illdefined movements such as shuffling or even side steps. Any
7 Note that each number quoted here would scale linearly with the number
of people being tracked and the floor area.

PDR system is likely to need occasional position corrections
from an external (absolute) positioning system.
The most popular hybrid systems combine PDR with WiFi
fingerprinting in an attempt to address the shortcomings of
both. With fingerprinting, the main difficulties are associated
with comprehensively surveying the building to form a radio
map and in keeping that map up-to-date. Woodman and
Harle eased the data collection problem by using their SHSPF system to track a user augmented with a shoe sensor
moving through a building. By constantly scanning for WiFi
they were able to build a radio map with little effort. They
used this map to provide coarse portion-of-building position
estimates with which to constrain the particles within their
SHS-PF as mentioned in the previous section. Areas with
densities of access points insufficient to support detailed WiFi
fingerprinting merely resulted in larger containment areas for
the particles (representing the increased uncertainty).
This approach can be inverted to use the PDR system
to support WiFi fingerprinting. The Zee system proposes
positioning primarily through fingerprinting, but with a radio
map that is crowd-sourced from the subset of users with SHScapable smartphones [23]. The system used an SHS-PF with a
floor map in a similar manner to that described above. Because
it is not intended as the core location mechanism, the SHSPF component need only run when sufficient resources are
available, although the more frequent this is, the more updates
to the radio map are possible. In [23], Rai at al. describe a
15-hour test with a single user that successfully builds a WiFi
radio map over the course of a few hours. Full crowdsourcing
(with multiple users and heterogeneous devices) was left as
future work, but this is a promising direction.
Faragher et al. described a hybrid system that did not
depend on a centrally-established database of signals, nor on
a pre-supplied building map [24]. It took as input an SHS
based on an accelerometer and compass, as well as radio
signal strength measurements from the WiFi and GSM cellular
radios. It divided the building area into a regular grid and
applied a Simultaneous Localisation and Mapping (SLAM)
technique to correct drift. The basis of this approach was to
constantly monitor the radio fingerprints to detect any loops in
the path taken. The loops could then be used as a constraint to
recompute the full path taken. Ferris et al. have also developed
their WiFiSLAM system [58] into a commercial venture that
uses SHS input in a similar manner8 for more details.
VIII. O PEN R ESEARCH I SSUES
PDR systems are still in their infancy. Major issues include:
Consistent evaluation methodologies and metrics. There
is presently little consensus regarding how to evaluate PDR
systems, which hinders their comparison. The outputs from a
system can be affected by the characteristics of the test subjects, by the building size, layout and construction materials,
or by the test procedure followed (including duration and the
degree of ‚Äònatural‚Äô activity). It is common to report results for
a single user over a series of contrived walking tests. Such
tests serve as proof-of-concept but there is a growing need
8 See

http://wifislam.com

HARLE: A SURVEY OF INDOOR INERTIAL POSITIONING SYSTEMS FOR PEDESTRIANS

for thorough system evaluations over sustained periods with a
diverse set of test subjects.
Unconstrained sensor sites. Smartphone-based PDR systems are highly attractive, but they introduce new difficulties
by loosening the attachment constraints. Any deployed system
must cope with the sensors changing orientation in a pocket, or
being taken out to use, etc. In addition, there is often a heading
offset between the direction a smartphone is facing and the
direction the user is moving. This offset must be accounted
for if using absolute heading measurements from a compass.
Sensor calibration. The output of MEMS sensors will vary
over time as temperature and other environmental effects affect
their bias and scaling factors9 . Where foot-mounted sensors
are used, ZUPTs permit measurement and adaptation to the
current bias. However, for unconstrained smartphones there is
typically no opportunity to estimate the sensor biases online,
and no opportunity to perform a user-controlled recalibration.
This is particularly important for the heading estimation.
Possible solutions to this problem include deriving constraints
from the ambulatory movement and incorporating a feedback
loop from a map-matching stage. For example, a gyroscope
bias in the horizontal plane would produce a curved path.
If a higher-level particle filter determined the most likely
movement was in a straight line, a per-step horizontal heading
bias might be used to correct future heading measurements.
Battery power requirements. In the move to mobile devices such as smartphones, it is important to understand the associated energy costs. An SHS-PF system utilising gyroscope,
accelerometers, magnetometers and WiFi signals will put a
large draw on the available battery power. Understating which
sensors are required and when will be crucial to maintaining
sufficient system users.
Processing power requirements. Similarly, the processing
power demanded by the bandpass filters, peak detectors, autocorrelators or particle filters in PDR systems cannot be overlooked. Understanding how to deploy these systems online on
the devices themselves (and not offline on desktop machines
as with most current literature) will be important. With particle
filters in particular, there are parallelisation opportunities that
might be able to exploit the imminent wave of GPU-enabled
smartphones.
Wearability. The three research systems in Section VI-A
are all built on SHS-INS foot-mounted systems. This ensures
high quality PDR input to the particle filter, but foot-mounted
systems are impractical. To enable larger scale, more natural
testing, it will be necessary to have PDR techniques that do
not require foot-mounting. To date, this implies a need for an
SHS approach.
Initialisation. Bootstrapping the particle filter with an SHSPF is a significant challenge. Work is needed to understand
the necessary number of particles for a given map and the
expected time taken before a user is unambiguously tracked.

1291

for strapdown inertial navigation in the military domain and
sensor fusion in the robotics domain to apply to the lessconstrained motion of walking. Demonstrated systems have
made use of the small, inexpensive MEMS sensors that are
now becoming ubiquitous through smartphone market penetration. The higher error characteristics of these sensors mean
that high accuracy inertial navigation through the traditional
triple integration is only possible for foot-mounted sensors,
where strong constraints can be applied. Away from the foot,
Step and Heading Systems (SHSs) have begun to dominate,
where each step is identified and characterised in terms of a
length and heading vector.
Sub-metre tracking errors have now been demonstrated
throughout a large, three-story building with the use of mapmatching through a particle filter and foot-mounted sensor. A
pure PDR system may be able to track a constantly-walking
user indefinitely if the path they take through the building
allows wall constraints to be regularly applied. Difficulties
arise during periods of non-walking activity, when false positives and false negatives in the step detection, combined with
compass and gyroscope errors will contribute positional error
that will accrue over time.
For many building users, however, the bulk of the day is
spent seated in a small number of locations, with walking
transitions between them. Under such circumstances a pure
PDR system may be able to offer room-level tracking by
weighting the position estimates towards likely rooms (their
own office rather than that of their neighbour, for example).
More generally, however, occasional absolute position corrections from an external positioning system will be required for
long-term tracking.
There are many choices for an absolute positioning system
to partner a PDR system. To date, the emphasis has been on
including WiFi radio mapping and this shows great promise
with significant scope for innovation. Crucial in this context
is that the advantages and disadvantages of the two systems
broadly counter each other: PDR drift can be addressed using
WiFi positions; map surveying is eased by crowd-sourcing
from PDR handsets. This should also apply to other system
pairings‚Äîfor example, passive RFID systems allow users to
be inexpensively tagged but need a large number of deployed
readers to achieve complete coverage. Combined with a PDR
system, however, complete coverage is not necessary. The
readers need only supply occasional position/proximity fixes
at strategic locations, with the PDR system filling in between.
This eases installation and maintenance.
It seems likely we will see the emergence of hybrid systems
with a variety of positioning modalities to augment PDR.
Absolute position fixes will be obtained opportunistically from
whatever is installed in the current building‚Äîbe it WiFi, Bluetooth, GSM, RFID, or some future communications medium.
The current high-level SHS-PF architecture allows for great
flexibility and can be used to power such hybrid systems.

IX. C ONCLUSIONS
This work has surveyed inertial Pedestrian Dead Reckoning
(PDR) systems. These have successfully adapted techniques
9 Each

sensor channel is subject to bias, which is a temperature-related
offset in the output.

X. ACKNOWLEDGEMENTS
The author would like to thank the reviewers of this
article for their detailed and insightful comments that greatly
improved this work.

1292

IEEE COMMUNICATIONS SURVEYS & TUTORIALS, VOL. 15, NO. 3, THIRD QUARTER 2013

R EFERENCES
[1] J. Hightower and G. Borriello, ‚ÄúLocation systems for ubiquitous computing,‚Äù Computer, vol. 34, no. 8, pp. 57‚Äì66, 2001. [Online]. Available:
http://ieeexplore.ieee.org/xpl/articleDetails.jsp?arnumber=940014
[2] G. Sun, J. Chen, W. Guo, and K. Liu, ‚ÄúSignal processing techniques
in network-aided positioning: a survey of state-of-the-art positioning
designs,‚Äù IEE Signal Processing Mag., vol. 22, no. 4, pp. 12 ‚Äì 23, july
2005.
[3] H. Liu, H. Darabi, P. Banerjee, and J. Liu, ‚ÄúSurvey of wireless indoor
positioning techniques and systems,‚Äù IEEE Trans. Syst. Man Cybern. C.
Appl. Rev., vol. 37, no. 6, pp. 1067 ‚Äì1080, nov. 2007.
[4] Y. Gu, A. Lo, and I. Niemegeers, ‚ÄúA survey of indoor positioning systems for wireless personal networks,‚Äù IEEE Commun. Surveys Tutorials,
vol. 11, no. 1, pp. 13 ‚Äì32, quarter 2009.
[5] M. A. Ergin, K. Ramachandran, and M. Gruteser, ‚ÄúUnderstanding
the effect of access point density on wireless lan performance,‚Äù
in Proc. 13th annual ACM international conference on Mobile
computing and networking, ser. MobiCom ‚Äô07.
New York,
NY, USA: ACM, 2007, pp. 350‚Äì353. [Online]. Available:
http://doi.acm.org/10.1145/1287853.1287902
[6] F. Aubeck, C. Isert, and D. Gusenbauer, ‚ÄúCamera based step detection
on mobile phones,‚Äù in Indoor Positioning and Indoor Navigation (IPIN),
2011 International Conference on, sept. 2011, pp. 1 ‚Äì7.
[7] R. Harle, S. Taherian, M. Pias, G. Coulouris, A. Hopper,
J. Cameron, J. Lasenby, G. Kuntze, I. Bezodis, G. Irwin,
and D. Kerwin, ‚ÄúTowards real-time profiling of sprints
using wearable pressure sensors,‚Äù Computer Communications,
vol. 35, no. 6, pp. 650 ‚Äì 660, 2012. [Online]. Available:
http://www.sciencedirect.com/science/article/pii/S0140366411001265
[8] Q. Wang, X. Zhang, X. Chen, R. Chen, W. Chen, and
Y. Chen, ‚ÄúA novel pedestrian dead reckoning algorithm
using wearable EMG sensors to measure walking strides,‚Äù in
2010 Ubiquitous Positioning Indoor Navigation and Location
Based Service. IEEE, Oct. 2010, pp. 1‚Äì8. [Online]. Available:
http://ieeexplore.ieee.org/lpdocs/epic03/wrapper.htm?arnumber=5653821
[9] Q. Ladetto, ‚ÄúOn foot navigation : continuous step calibration using both
complementary recursive prediction and adaptive Kalman filtering,‚Äù
ION GPS, vol. 2000, no. Perrin, pp. 1735‚Äì1740, 2000. [Online].
Available: http://www.ladetto.ch/LAQ/publications/ion2000 ql.pdf
[10] C.
Randell,
C.
Djiallis,
and
H.
Muller,
‚ÄúPersonal
position
measurement
using
dead
reckoning,‚Äù
Seventh
IEEE
International
Symposium
on
Wearable
Computers
2003 Proceedings, pp. 166‚Äì173, 2003. [Online]. Available:
http://ieeexplore.ieee.org/lpdocs/epic03/wrapper.htm?arnumber=1241408
[11] R. Stirling, J. Collin, K. Fyfe, and G. Lachapelle, ‚ÄúAn
Innovative Shoe-Mounted Pedestrian Navigation System,‚Äù in GNSS
2003 (Graz, Austria, 2225 April), 2003. [Online]. Available:
http://www.citeulike.org/user/fish2000/article/4026900
[12] J. W. Kim and C. Park, ‚ÄúA Step , Stride and Heading
Determination for the Pedestrian Navigation System,‚Äù Technology,
vol. 3, no. 1, pp. 273‚Äì279, 2005. [Online]. Available:
http://www.scirp.org/Journal/PaperDownload.aspx?paperID=282&amp;
fileName=nav20040100034 69728139.pdf
[13] R. Jirawimut, P. Ptasinski, V. Garaj, F. Cecelja, and
W. Balachandran, ‚ÄúA method for dead reckoning parameter
correction in pedestrian navigation system,‚Äù IEEE Trans. Instrum.
Meas., vol. 52, no. 1, pp. 209‚Äì215, 2003. [Online]. Available:
http://ieeexplore.ieee.org/lpdocs/epic03/wrapper.htm?arnumber=1191431
[14] J. Saarinen, J. Suomela, S. Heikkila, M. Elomaa, and
A. Halme, ‚ÄúPersonal navigation system,‚Äù 2004 IEEERSJ
International Conference on Intelligent Robots and Systems IROS
IEEE Cat No04CH37566, pp. 212‚Äì217, 2004. [Online]. Available:
http://ieeexplore.ieee.org/lpdocs/epic03/wrapper.htm?arnumber=1389354
[15] S. Godha, G. Lachapelle, and M. E. Cannon, ‚ÄúIntegrated
GPS / INS System for Pedestrian Navigation in a Signal
Degraded Environment,‚Äù ION GNSS 2006 Fort Worth TX, vol.
2006, no. September, pp. 26‚Äì29, 2006. [Online]. Available:
http://plan.geomatics.ucalgary.ca/papers/06 ION GNSS Godha et al
Session A5.pdf
[16] M. Klepal and S. Beauregard, ‚ÄúA Backtracking Particle
Filter for fusing building plans with PDR displacement
estimates,‚Äù 2008 5th Workshop on Positioning Navigation and
Communication, vol. 2008, pp. 207‚Äì212, 2008. [Online]. Available:
http://ieeexplore.ieee.org/lpdocs/epic03/wrapper.htm?arnumber=4510376
[17] B. Krach and P. Roberston, ‚ÄúCascaded estimation architecture for integration of foot-mounted inertial sensors,‚Äù in
Position Location and Navigation Symposium 2008 IEEEION,

[18]

[19]

[20]

[21]
[22]

[23]

[24]

[25]

[26]

[27]

[28]

[29]

[30]

[31]

[32]

[33]

[34]

no. 1.
IEEE, 2008, pp. 112‚Äì119. [Online]. Available:
http://ieeexplore.ieee.org/xpls/abs all.jsp?arnumber=4570047
W.
Soehren
and
W.
Hawkinson,
‚ÄúPrototype
personal
navigation system,‚Äù IEEE Aerosp. Electron. Syst. Mag.,
vol. 23, no. 4, pp. 10‚Äì18, Apr. 2008. [Online]. Available:
http://ieeexplore.ieee.org/xpl/freeabs all.jsp?arnumber=4493437
A. R. Jimenez, F. Seco, C. Prieto, and J. Guevara, ‚ÄúA
comparison of Pedestrian Dead-Reckoning algorithms using a
low-cost MEMS IMU,‚Äù 2009 IEEE International Symposium on
Intelligent Signal Processing, pp. 37‚Äì42, 2009. [Online]. Available:
http://ieeexplore.ieee.org/lpdocs/epic03/wrapper.htm?arnumber=5286542
S. Beauregard, ‚ÄúA helmet-mounted pedestrian dead reckoning system,‚Äù
Sensors Peterborough NH, pp. 15‚Äì16, 2006. [Online]. Available:
http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.113.6770&am
p;rep=rep1&amp;type=pdf
O. Woodman and R. Harle, ‚ÄúPedestrian localisation for indoor environments,‚Äù in Proc. 10th international conference on Ubiquitous computing.
ACM, 2008, pp. 114‚Äì123.
,
‚ÄúRF-Based
Initialisation
for
Inertial
Pedestrian
Tracking,‚Äù Pervasive Computing 7th International Conference
Pervasive 2009 Nara Japan May 1114 2009 Proceedings,
vol.
5538,
pp.
238‚Äì255,
2009.
[Online].
Available:
http://books.google.com/books?hl=en&amp;lr=&amp;id=5tbD9CcTjtkC
&amp;oi=fnd&amp;pg=PA238&amp;dq=RF-Based+Initialisation+for+I
nertial+Pedestrian+Tracking&amp;ots=qT4AsXjx6J&amp;sig=sXZNZ
WOUhwcXIE dH2RxlHEDPLY
A. Anshul Rai, K. K. Chintalapudi, P. Venkat, and R. Sen, ‚ÄúZee
: Zero-effort crowdsourcing for indoor localization,‚Äù in Proc. 18th
Annual International Conference on Mobile Computing and Networking
(MobiCom), august 2012.
R. Faragher, C. Sarno, and M. Newman, ‚ÄúOpportunistic radio slam for
indoor navigation using smartphone sensors,‚Äù in Position Location and
Navigation Symposium (PLANS), 2012 IEEE/ION, april 2012, pp. 120
‚Äì128.
H. Leppkoski, J. Collin, and J. Takala, ‚ÄúPedestrian navigation
based on inertial sensors, indoor map, and wlan signals,‚Äù J.
Signal Processing Systems, pp. 1‚Äì10, 2012. [Online]. Available:
http://dx.doi.org/10.1007/s11265-012-0711-5
C. T. Judd, ‚ÄúA Personal Dead Reckoning Module,‚Äù in
ION GPS, vol. 97, 1997, pp. 1‚Äì5. [Online]. Available:
http://www1.cs.columbia.edu/ drexel/CandExam/DRM ION97paper.pdf
E. Foxlin, ‚ÄúPedestrian Tracking with Shoe-Mounted Inertial Sensors,‚Äù IEEE Computer Graphics and Applications,
vol. 25, no. 6, pp. 38‚Äì46, Nov. 2005. [Online]. Available:
http://dl.acm.org/citation.cfm?id=1100858.1100874
S. Godha and G. Lachapelle, ‚ÄúFoot mounted inertial system for
pedestrian navigation,‚Äù Measurement Science and Technology, vol. 19,
no. 7, p. 075202, 2008. [Online]. Available: http://stacks.iop.org/09570233/19/i=7/a=075202?key=crossref.62f138def5eb253e6b2e377c08aaa1
7e
K. Frank, B. Krach, N. Catterall, and P. Robertson, ‚ÄúDevelopment
and Evaluation of a Combined WLAN and Inertial Indoor
Pedestrian Positioning System,‚Äù Sep. 2009. [Online]. Available:
http://elib.dlr.de/54517/2/hybridIndoorPositioning.pdf
P. Robertson, M. Angermann, B. Krach, and M. Khider, ‚ÄúInertial
Systems Based Joint Mapping and Positioning for Pedestrian
Navigation,‚Äù Building, pp. 2096‚Äì2107, 2009. [Online]. Available:
http://elib.dlr.de/60179/1/ion final footSLAM2.pdf
S. Superiore and S. Anna, ‚ÄúDead-Reckoning Method for
Personal
Navigation
Systems
Using
Kalman
Filtering
Techniques
to
Augment
Inertial
/
Magnetic
Sensing,‚Äù
Advances,
no.
April,
pp.
251‚Äì268,
2009.
[Online].
Available:
http://www.intechopen.com/source/pdfs/6333/InTechDead reckoning method for personal navigation systems using kal
man filtering techniques to augment inertial magnetic sensing.pdf
F. Cavallo, A. Sabatini, and V. Genovese, ‚ÄúA step toward GPS/INS
personal navigation systems: real-time assessment of gait by foot inertial
sensing,‚Äù in 2005 IEEE/RSJ International Conference on Intelligent
Robots and Systems. IEEE, 2005, pp. 1187‚Äì1191. [Online]. Available:
http://ieeexplore.ieee.org/xpl/freeabs all.jsp?arnumber=1544967
P. Robertson, M. Angermann, and B. Krach, ‚ÄúSimultaneous
localization and mapping for pedestrians using only footmounted inertial sensors,‚Äù in Proc. 11th international conference
on Ubiquitous computing - Ubicomp ‚Äô09. New York, New
York, USA: ACM Press, Sep. 2009, p. 93. [Online]. Available:
http://dl.acm.org/citation.cfm?id=1620545.1620560
M. Kourogi and T. Kurata, ‚ÄúPersonal positioning based on
walking locomotion analysis with self-contained sensors and a

HARLE: A SURVEY OF INDOOR INERTIAL POSITIONING SYSTEMS FOR PEDESTRIANS

[35]

[36]

[37]

[38]

[39]

[40]
[41]

[42]

[43]

[44]

[45]

[46]

[47]

wearable camera,‚Äù in The Second IEEE and ACM International
Symposium on Mixed and Augmented Reality, 2003. Proceedings.
IEEE Comput. Soc, 2003, pp. 103‚Äì112. [Online]. Available:
http://ieeexplore.ieee.org/lpdocs/epic03/wrapper.htm?arnumber=1240693
N. Castaneda and S. Lamy-Perbal, ‚ÄúAn improved shoemounted inertial navigation system,‚Äù in 2010 International
Conference
on Indoor Positioning
and Indoor Navigation.
IEEE, Sep. 2010, pp. 1‚Äì6. [Online]. Available:
http://ieeexplore.ieee.org/xpl/freeabs all.jsp?arnumber=5646858
L. Ojeda and J. Borenstein, ‚ÄúNon-GPS navigation with
the personal dead-reckoning system,‚Äù Proc. SPIE, vol. 6561,
no. 1, pp. 65 610C‚Äì65 610C‚Äì11, 2007. [Online]. Available:
http://link.aip.org/link/PSISDG/v6561/i1/p65610C/s1&Agg=doi
L. Fang, P. Antsaklis, L. Montestruque, M. McMickell, M. Lemmon,
Y. Sun, H. Fang, I. Koutroulis, M. Haenggi, M. Xie, and
X. Xie, ‚ÄúDesign of a Wireless Assisted Pedestrian Dead Reckoning
SystemThe NavMote Experience,‚Äù IEEE Trans. Instrum. Meas.,
vol. 54, no. 6, pp. 2342‚Äì2358, Dec. 2005. [Online]. Available:
http://ieeexplore.ieee.org/lpdocs/epic03/wrapper.htm?arnumber=1542534
H. Ying, C. Silex, A. Schnitzer, S. Leonhardt, M. Schiek, S. Leonhardt,
T. Falck, P. MaÃàhoÃànen, and R. Magjarevic, 4th International Workshop
on Wearable and Implantable Body Sensor Networks (BSN 2007), ser.
IFMBE Proceedings, S. Leonhardt, T. Falck, and P. MaÃàhoÃànen, Eds.
Berlin, Heidelberg: Springer Berlin Heidelberg, 2007, vol. 13. [Online].
Available: http://www.springerlink.com/content/j6p5122528482578/
P. Goyal, V. J. Ribeiro, H. Saran, and A. Kumar,
‚ÄúStrap-down Pedestrian Dead-Reckoning system,‚Äù in 2011
International Conference on Indoor Positioning and Indoor
Navigation.
IEEE, Sep. 2011, pp. 1‚Äì7. [Online]. Available:
http://ieeexplore.ieee.org/xpl/freeabs all.jsp?arnumber=6071935
T. Levi, R. and Judd, ‚ÄúDead reckoning navigational system using
accelerometer to measure foot impacts,‚Äù 1995.
Harvey WeinBerg, ‚ÄúAN-602: Using the ADXL202 in Pedometer
and Personal Navigation Applications,‚Äù Analog Devices, Tech.
Rep., 2002. [Online]. Available: http://www.analog.com/static/importedfiles/application notes/513772624AN602.pdf
M. Dippold, ‚ÄúPersonal dead reckoning with accelerometers,‚Äù
in
Third
International
Forum
on
Applied
Wearable
Computing IFAWC2006.
Citeseer, 2006. [Online]. Available:
http://scholar.google.com/scholar?hl=en&btnG=Search&q=intitle:Perso
nal+Dead+Reckoning+with+Accelerometers#0
N. Wang, E. Ambikairajah, S. Redmond, B. Celler, and N. Lovell, ‚ÄúClassification of walking patterns on inclined surfaces from accelerometry
data,‚Äù in Digital Signal Processing, 2009 16th International Conference
on, july 2009, pp. 1 ‚Äì4.
S. Park, ‚ÄúPedestrian inertial navigation with gait phase
detection assisted zero velocity updating,‚Äù in 2009 4th
International
Conference
on
Autonomous
Robots
and
Agents.
IEEE, Feb. 2000, pp. 336‚Äì341. [Online]. Available:
http://ieeexplore.ieee.org/lpdocs/epic03/wrapper.htm?arnumber=4803999
S. Beauregard and M. Klepal, ‚ÄúIndoor PDR performance
enhancement using minimal map information and particle
filters,‚Äù in 2008 IEEE/ION Position, Location and Navigation
Symposium.
IEEE, 2008, pp. 141‚Äì147. [Online]. Available:
http://ieeexplore.ieee.org/lpdocs/epic03/wrapper.htm?arnumber=4570050
C. Toth, D. A. Grejner-Brzezinska, and S. Moafipoor, ‚ÄúPedestrian
Tracking and Navigation Using Neural Networks and Fuzzy
Logic,‚Äù in 2007 IEEE International Symposium on Intelligent
Signal Processing. IEEE, 2007, pp. 1‚Äì6. [Online]. Available:
http://ieeexplore.ieee.org/lpdocs/epic03/wrapper.htm?arnumber=4447525
O. J. Woodman, ‚ÄúAn introduction to inertial navigation,‚Äù University of
Cambridge COmputer Laboratory, \cite{Goyal2011}, Tech. Rep. 696,

[48]
[49]

[50]
[51]

1293

2007. [Online]. Available: http://www.cl.cam.ac.uk/techreports/UCAMCL-TR-696.pdf
O. Woodman, ‚ÄúPedestrian Localisation for Indoor Environments,‚Äù Ph.D.
dissertation, University of Cambridge, 2010.
M. H. Afzal, V. Renaudin, and G. Lachapelle, ‚ÄúAssessment of
indoor magnetic field anomalies using multiple magnetometers,‚Äù in
ION GNSS, no. September, 2010, pp. 21‚Äì24. [Online]. Available:
http://plan.geomatics.ucalgary.ca/papers/gnss10 multiplemagnetometers
harisa 20sep10.pdf
, ‚ÄúMagnetic Field based Heading Estimation for Pedestrian Navigation Environments,‚Äù Test, no. September, pp. 21‚Äì23, 2011.
J. E. Bertram and A. Ruina, ‚ÄúMultiple walking speed-frequency
relations are predicted by constrained optimization.‚Äù J. theoretical
biology, vol. 209, no. 4, pp. 445‚Äì53, Apr. 2001. [Online]. Available:
http://dx.doi.org/10.1006/jtbi.2001.2279

[52] S. Yang and Q. Li, ‚ÄúAmbulatory walking speed estimation under
different step lengths and frequencies,‚Äù in 2010 IEEE/ASME
International Conference on Advanced Intelligent Mechatronics,
vol. 24, no. 17. IEEE, Jul. 2010, pp. 658‚Äì663. [Online]. Available:
http://pubget.com/paper/pgtmp b9eb4337a72a54df9fd9c76a5023be80
[53] O. Woodman and R. Harle, ‚ÄúPedestrian localisation for
indoor environments,‚Äù in Proc. 10th international conference on
Ubiquitous computing - UbiComp ‚Äô08. New York, New York,
USA: ACM Press, Sep. 2008, p. 114. [Online]. Available:
http://dl.acm.org/citation.cfm?id=1409635.1409651
[54] K. Abdulrahim, C. Hide, T. Moore, and C. Hill, ‚ÄúUsing Constraints
for Shoe Mounted Indoor Pedestrian Navigation,‚Äù J. Navigation,
vol. 65, no. 01, pp. 15‚Äì28, Jan. 2012. [Online]. Available:
http://journals.cambridge.org/abstract S0373463311000518
[55] J. Hightower and G. Borriello, ‚ÄúParticle Filters for Location
Estimation in Ubiquitous Computing : A Case Study,‚Äù
Computing, vol. vol, pp. 88‚Äì106, 2004. [Online]. Available:
http://www.springerlink.com/index/uyhre47hg6junvn4.pdf
[56] B. Krach and P. Robertson, ‚ÄúIntegration of foot-mounted inertial
sensors into a Bayesian location estimation framework,‚Äù 2008
5th Workshop on Positioning Navigation and Communication,
vol. 2008, no. 2, pp. 55‚Äì61, 2008. [Online]. Available:
http://ieeexplore.ieee.org/lpdocs/epic03/wrapper.htm?arnumber=4510357
[57] U. Steinhoff and B. Schiele, ‚ÄúDead reckoning from the pocket an experimental study,‚Äù in Pervasive Computing and Communications
(PerCom), 2010 IEEE International Conference on, 29 2010-april 2
2010, pp. 162 ‚Äì170.
[58] B. Ferris, D. Fox, and N. Lawrence, ‚ÄúWifi-slam using gaussian process
latent variable models,‚Äù in Proc. 20th international joint conference
on Artifical intelligence, ser. IJCAI‚Äô07. San Francisco, CA, USA:
Morgan Kaufmann Publishers Inc., 2007, pp. 2480‚Äì2485. [Online].
Available: http://dl.acm.org/citation.cfm?id=1625275.1625675

Robert Harle received the M.Sci. degree in Physics
and the Ph.D. degree in Engineering from the University of Cambridge, UK. He is now a Lecturer
in the Cambridge University Computer Laboratory
and a Fellow of Downing College, Cambridge.
His research interests include all forms of wired
and wireless sensing, with a particular focus on
indoor positioning and wearable sensors for sport
and health.

