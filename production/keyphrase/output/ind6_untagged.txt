ferret  rfid localization for pervasive multimedia ? xiaotao liu  mark d corner  and prashant shenoy department of computer science university of massachusetts  amherst  ma  xiaotaol  mcorner  shenoy  @ cs.umass.edu abstract  the pervasive nature of multimedia recording devices enables novel pervasive multimedia applications with automatic  inexpensive  and ubiquitous identification and locationing abilities  we present the design and implementation of ferret  a scalable system for locating nomadic objects augmented with rfid tags and displaying them to a user in real-time  we present two alternative algorithms for refining a postulation of an objects location using a stream of noisy readings from an rfid reader  an online algorithm for real-time use on a mobile device  and an offline algorithm for use in post-processing applications  we also present methods for detecting when nomadic objects move and how to reset the algorithms to restart the refinement process  an experimental evaluation of the ferret prototype shows that  i  ferret can refine object locations to only 1 % of the readers coverage region in less than 2 minutes with small error rate  2.22 %  ;  ii  ferret can detect nomadic objects with 100 % accuracy when the nomadic distances exceed 20cm ; and  iii  ferret works with a variety of user mobility patterns  1 introduction advances in digital imaging technologies have led to a proliferation of consumer devices with video capture capabilities  the pervasive nature of multimedia recording devices such as cellphones  digital camcorders  pdas and laptops  has made it relatively simple to capture  transform  and share large volumes of personal video and image content  a concurrent trend is the emergence of low-cost identification technologies such as rfid tags  designed to replace barcodes  12   each tag contains a numeric code that uniquely identifies the object and can be queried by a wireless reader  it is likely that in the near future many personal objects  e.g  books  clothing  food items  furniture  will be equipped with self-identifying rfid tags  the confluence of these trendsthe ubiquity of rfid tags and the pervasive nature of multimedia recording devicesenables novel pervasive multimedia applications with automatic  inexpensive  and ubiquitous identification and location abilities  by equipping cameras with rfid readers  it is possible to record ? this research was supported in part by nsf grants national science foundation grants cns-0219520  cns-052072  cns-0447877  and eia-0098060  images as well as the identities and locations of all rfid-tagged objects contained within each image  the captured video can then be queried in real-time to display the location of a particular object  while the inexpensive nature of rfid tags eases large-scale deployment issues  their passive nature raises a number of hurdles  a key limitation is that passive rfid tags are self-identifying but not self-locating  i.e  upon being queried  a tag can report its identify but not its location   consequently  if multiple objects are present in a captured image  it is not possible to distinguish between these objects or pinpoint their individual locations  some of the applications  e.g  pinpointing a misplaced book on a bookshelf  require location information in addition to object identities  while numerous locationing technologies such as gps and ultrasound  10  13  14  are available  it is not possible to equip passive rfid tags with these capabilities due to reasons of cost  form-factor and limited battery life  instead  we require a locationing technology that does not depend on modifications to tags  is easily maintained  and scales to hundreds or thousands of tagged objects  to address the above challenges  we have designed a system called ferret  ferret combines locationing technologies with pervasive multimedia applications  ferret can locate objects using their rfid tags and displays their locations in real-time to a mobile user  as the positions of objects are uncertain  the system overlays the video display with an outline of where the object probably is  for instance  a user with a portable camera can ask the system to display the location of every new object in the room  and the display will show an outline of all of those locations  the display is constantly updated as the user moves using the continuous stream of tag readings to update locations  ferret uses the location and directionality of rfid readers to infer the locations of nearby tags  ferret leverages the users inherent mobility to produce readings of the tag from multiple vantage points  it does this through two novel algorithms that refine the locations of objects using a stream of noisy readings from rfid tags  one algorithm is designed for offline use  given a large amount of computational power  while the other is designed to operate in real-time on a mobile system  in the case of the offline algorithm  we also incorporate negative readingswhen the reader does not see the objectthis greatly reduces the objects possible locations  we have implemented a prototype of ferret and have used it to conduct a detailed performance evaluation  our experiments pay specific attention to how fast ferret can refine object locations  the error rate in locating objects  and how well it handles nomadic objects  our results show that  i  ferret can refine object locations to only 1 % of the readers coverage region in less than 2 minutes with small error rate  2.22 %  ;  ii  the offline algorithm incorporates information about not seeing the object  outperforming the online algorithm by a factor of 13 or more ;  iii  ferret can detect nomadic objects with 100 % accuracy when the moving distances exceed 20cm ; and  iv  ferret works with a wide variety of user mobility patterns  ferret provides systems support for a variety of new applications  for instance  users can locate a misplaced book on a bookshelf  robots can use such fig  1 use of ferret to discover the location of a soup can in an office devices to conduct real-time identification and search operations  vision-based applications can use them to quickly learn the structure or organization of a space  inventory tracking applications can proactively generate missing object alerts upon detecting the absence of an object  we imagine that the ability to locate and identify thousands of objects in a space will enable new opportunities in vision and graphics  such as augmented reality and immersive systems  2 ferret design ferret is designed to operate on a handheld video camera with a display  to use ferret  the user selects some set of objects she would like to locate in the room and moves around the room with the camera  using an rfid reader embedded in the video camera  ferret samples for nearby tags  and in real-time updates the cameras display with an outline of the probable location of the objects she is searching for  ferrets knowledge of object location can be imprecise  so rather than showing a single centroid point  ferret displays the outline  leaving the interpretation of the precise location to the users cognition  for instance  if ferret can narrow the location of a book to a small region on a shelf  a user can quickly find the precise location  figure 1 provides a pictorial representation of how the system would work  in this scenario the user is looking for a coffee cup in a messy office  after scanning the room using a ferret-based camera  the system highlights a small region that contains the cup  2.1 nomadic location with rfid many pervasive systems that rely on location are predicated on the assumption that the number of objects requiring location information is small and mobile  in contrast  we designed ferret to support a massive number of mostly static  or nomadic objectsobjects that change locations infrequently  as a fraction of all objects  nomadic and static ones are in the vast majorityin any given room it is likely that there are hundreds  or possibly thousands of nomadic and static objects  while there are only a few mobile ones  the primary barrier to providing locationing information for such a large number of objects is the reliance on batteriesmaking objects self-locating requires the use of a battery-powered locationing hardware  even though locationing systems such as ultrasound  10  and ultra-wide band  uwb  are becoming more energy efficient  equipping hundreds of objects in a room with self-locating capabilities simply does not scale  since it will require changing an unmanageable number of batteries  in contrast  passive rfid provides a battery-free  inexpensive  distributed  and easily maintained method for identifying objects ; ferret adds locationing capabilities to such objects  ferret leverages the fact that an increasing number of objects will be equipped with rfid tags as a replacement to barcodes  further  rfid tags continue to drop in price  and one can imagine attaching tags to a large number of household or office objects  as rfid tags are passive devices and have no notion of their own location  ferret must continuously calculate and improve its own notion of the object locations  the system fuses a stream of noisy  and imprecise readings from an rfid reader to formulate a proposition of the objects location  the key insight in ferret is to exploit the location of a camera/reader to infer the location of objects in its vicinity  in essence  any tag that can be read by a reader must be contained within its sensing range ; by maintaining a history of tags read by the system  ferret can progressively narrow the region containing the object  this is a simple yet elegant technique for inferring the location of passive rfid tags without expensive  battery-powered locationing capabilities  2.2 infrastructure requirements strictly speaking  calculating and displaying object locations does not require any infrastructural support  displaying a location on the video  as well as combining multiple readings of the object location  only requires relative locations  such as those from inertial navigation systems  1   however  it is likely that knowledge of object locations in relation to a known coordinate system  such as gps or a building map  will be useful for many applications  we assume that the camera/reader uses such a locationing system  such as ultrasound or uwb  to determine its own location and then uses it to infer the location of objects in its vicinity  as ferret uses a directional video camera and rfid reader  it also requires an orientation system that can measure the pan  also known as heading and yaw   tilt  also known as pitch   and roll of the system  while research has proposed orientation systems for ultrasound  10   we have chosen to a use commercially available digital compass  similar to the locationing system  ferret benefits from having absolute orientation  although it can operate with only a relative orientation  2.3 location storage for each object  ferret must store a description of the objects location  considering that some rfid tags are remotely rewritable  ferret can store the location for an object directly on the tag itself  other options are to store the locations locally in each ferret reader  or in an online  external database  each option provides different privacy  performance  and management tradeoffs  storing locations locally on each reader means that each independent ferret device must start finding objects with zero initial knowledge  as the device moves and senses the same object from different vantage points  it can use a sequence of readings to infer and refine the object location  the advantage of this method is that it works with read-only rfid tags and does not require any information sharing across devices  however  it prevents the device from exploiting history available from other readers that have seen the object in the recent past  in contrast  if location information can be remotely written to the rfid tags then other ferret devices can start with better initial estimates of object location  however  this option requires writable tags and the small storage available on a tag limits the amount of history that can be maintained  in both of the above options  any device that has an rfid reader can determine object locations without needing the full complexity of the ferret system  a third option is to store the location information in a central database  this has the advantages of allowing offline querying and providing initial location estimates to mobile readers ; further  since database storage is plentiful  the system can store long histories as well as past locations of nomadic objects  however  it requires readers to have connectivity to the database  the burden of management  and privacy controls on the database  storing data on the tags also has implications for privacy control  however one must at least be proximate to the tag to query its location  at the heart of ferret is an rfid localization system that can infer the locations of individual passive rfid tagged objects  ferret then uses this localization system to dynamically discover  update  store  and display object locations  the following section presents the design of our rfid localization technique  3 rfid locationing consider an rfid reader that queries all tags in its vicinitythe reader emits a signal and tags respond with their unique identifier  given all responses to a query  the reader can produce positive or negative assertions whether a particular tag is present within its reading range  the reader can not directly determine the exact location of the tag in relation to the reader  or even a distance measurement  however  just one positive reading of a tag greatly reduces the possible locations for that particular objecta positive reading indicates that the object is contained in the volume defined by the read range of the reader  see figure 2   ferret leverages the users mobility to produce a series of readings ; the coverage region from each reading is intersected with all readings from the recent past  further reducing the possible locations for the object  see figure 3   using this method  ferret can continually improve its postulation of the object location  in addition to positive readings of an objects rfid tag  the reader implicitly indicates a negative reading whenever it fails to get a reading for a particular tag that it is looking for  using a similar method to positive readings  ferret subtracts the readers coverage region from the postulation of the objects location  this also improves the postulation of the objects location  a third method to reduce the likely positions for the object is to modulate the power output of the reader  if a particular power output produces a positive reading  and a lower power produces a negative reading  the system has gained additional knowledge about the location of the object  in general  whenever a tag is present in the read range  the reader is assumed to detect it with a certain probabilityobjects closer to the centroid of its read range are detected with higher probabilities  while objects at the boundary are detected with lower probabilities  thus  each positive reading not only gives us a region that is likely to contain the object  it also associates probability values for each point within that region  this coverage map of a reader is shown in figure 2 the map can be determined from the antenna data sheet  or by manually mapping the probability of detecting tags at different  x  y  z  offsets from the reader  reader has a 95 % chance of detecting a tag here reader has a 0 % chance of detecting a tag here reader has a 5 % chance of detecting a tag here fig  2 coverage region fig  3 refining location estimates given a three dimensional grid of the environment and assuming no prior history  ferret starts with an initial postulate that associates an unknown probability of finding the object at each coordinate within the grid  for each positive reading  the probability values of each grid point contained within the coverage range are refined  by intersecting the range with past history as shown in figure 3   similarly  for each negative reading  the the probability values of each grid point contained within the coverage range is decreased  this results in a threedimensional map  m  x  y  z   that contains the probability of seeing a tag at each data point in relation to the reader  using multiple power outputs requires building a map for each power output level  due to several constraints in our current prototype  ferret currently does not use power modulation ; however  adding this to the system will be trivial  the amount of computation that the system can do drastically affects the location algorithm that performs intersections  the compensation for false nega tives  and how it reflects the map to the user  next we describe two alternative methods  one that is computationally intense and can not be done in realtime on current mobile hardware  such an offline technique is useful for describing an eventual goal for the system  or how to use the system for analyzing the data after it is collected  however  our goal is to implement ferret on a mobile device so we also describe an online algorithm with drastically reduced computational cost  3.1 offline locationing algorithm formally  if we consider ferrets readings as a series of readings  both positive and negative  as a series d =  d1  d2  d3   dn   and we want to derive the probability of the object being at position x  given the readings from the rfid  or p  x|d   if we assume that each reading of the rfid reader is an independent trial  we can compute the likelihood as  p  x|d  = p  x|  d1   dn1   p  dn |x  1  p   d1  dn   z  1  where z is a normalization factor  we omit the proof as it is a straight-forward application of conditional probability  if we first assume that the ferret device  camera  is completely stationary  it operates as follows  i  once ferret receives the first positive reading of a tag it initializes a three dimensional map  l  with the coverage map m  to track the probability that the object is at each of the coordinates in the map  ii  each successive reading multiplies each coordinate in l by m  x  y  z  if the reading was positive  or 1 m  x  y  z  if the reading was negative  this approach is derived from elfess work on occupancy grids for robotic navigation  3   and is equivalent to hahnels approach for using sensor readings to locate rfid tags  6   3.2 translation  rotation and projection the basic algorithm described above assumes a stationary camera/reader ; ferrets notion of object location does not improve beyond a point  even with a large number of readingsmost points in the readers range  i.e  within the coverage map  will continue to have a high  and equally likely probability of detecting the tag  subsequently  multiple readings produce a large map with equally likely probabilities of the objects location  instead  ferret depends on the users motion to reduce the possibilities for the object locationas the user moves in the environment  the same object is observed by the camera from multiple vantage points and intersecting these ranges allows ferret to narrow the region containing the object  incorporating motion is straightforward ; however  the coordinate system of the coverage map m must be reconciled with that of the map l before this can be done  the coverage map shown in figure 3 is described in a three-dimensional coordinate system with the origin at the center of the readers rfid antenna  which we refer to as the reader coordinate system  the camera  although attached to the rfid reader  is offset from the reader  and has a slightly different coordinate system  we refer to this as the camera coordinate system which has its origin at the center of the cameras ccd sensor  to combine multiple readings from the reader  and subsequently display them to the user  each map m must be transformed into a common coordinate system  we refer to this as the world coordinate system  the world can have its origin at any point in the spacewith a locationing system we can use its origin  or with an inertial location system we can use the first location of the reader  performing this transformation is possible using techniques from linear algebra and computer graphics  5   further details can be found in a technical report  15   when computing the intersection of coverage maps  ferret first transforms the coverage map  m into the world coordinate system  and computes the intersection according to the methods presented in section 3.1 to produce a new map l containing the likelihood of an objects location  once ferret produces a three dimensional map that it believes contains a particular object  it must overlay this region onto the video screen of the camera ; doing so involves projecting a 3d map onto a two dimensional display  this is done in two steps  thresholding and projection  the threshold step places a minimum value for the likelihood on the map l by using a small  but nonzero value for the threshold  ferret reduces the volume that encompasses the likely position of the object  however  using a larger threshold may cause ferret to shrink the volume excessively  thus missing the object  currently this is a tunable parameter in ferretin the evaluation section we demonstrate how to choose a reasonable value  finally  ferret projects the intersection map onto the image plane of the video display  ferret must transform the intersection map from the world coordinate system into the camera coordinate system  ferret performs this transformation using the cameras current position and orientation  assuming that the z-axis of the camera coordinate system is co-linear with the cameras optical axis  projecting the image onto the image plane is straightforward  for each reading the rfid reader produces  the location algorithm must perform o  n3  operations  for a three dimensional space that is n n n  in addition to translating and rotating the coverage map  and projecting the location map onto the display  if ferret is searching for multiple objects  it must perform these operations for each individual object  in practice  we have found that each rfid reading consumes 0.7 seconds on a modern processor  while our rfid reader produces 4 readings per second  given the speed at which a human may move the camera  this is not feasible to do in realtime  however it works well for an offline system that has less stringent latency requirements  an offline algorithm also has the opportunity to perform these operations for the whole video  and then use the smallest region that it computed to back-annotate the entire video stream with that region  3.3 online locationing algorithm given that the offline algorithm is too computationally intensive for a mobile device to operate in real-time  we describe a greatly simplified version of the locationing algorithm  the primary goal is to reduce the representation of the probability of where the object is  instead of a full representation that describes the probability at each location  we reduce it to describing just the convex region where the object is with very high probability  describing such a region is very compact  as we only need to track the points that describe the perimeter of the convex region  intersecting two maps is very fast  as it is a series of line intersections  figure 4 shows this in detail for two dimensions  extending it to three dimensions is straightforward  the first half of the diagram shows sample points that describe the outside of the coverage map  ferret rotates and translates the coverage map m as described in the previous section  and intersects it with the current map l for each constant y value  the system finds the intersection of the two line segments and uses that as the description of the new map l for instance in figure 4  we choose a constant y value y1  after rotating and translating the map m to match to the readers current position  the system intersects the two line segments   x1  y1   x3  y1  from the current map l  with  x2  y1   x4  y1  from the new map m  the resulting intersection is the segment  x2  y1   x3  y1   which describes the perimeter of the new location map l ferret repeats this process for all y values  extending this to three dimensions is straightforward  intersect two line segments for each pair of constant y and z value  this means the complexity of the intersection is o  n2  rather than o  n3  as in the offline algorithm  fig  4 online location estimation also  instead of using a map of probabilities for the coverage map  we reduce it to the convex shape that describes the coverage region of the rfid reader than can read tags with some probability greater than 0 this virtually eliminates the possibility of false positives  additionally  describing the perimeter only requires two x points for each pair of y and z values  thus the representation of the region is greatly reduced in size from o  n3  to o  n2   using our prototype as an example  this reduces the storage requirement from 43.5m bytes to 178k byteseach of these are highly compressible  this greatly aids ferrets ability to store the regions directly on the storage-poor tags  the line segment representation does mean that the system can not incorporate negative regions  as intersecting with a negative region can create a concave  rather than convex  region  a concave region would return the complexity of the representation and the intersection to o  n3   false negatives do not affect the system  as negative readings are not used at all  3.4 dealing with nomadic objects we designed ferret to deal with objects that move infrequentlycommonly referred to as nomadicas opposed to mobile objects that move frequently  when objects do move  ferret should adjust to deal with this  in the online algorithm  this is straightforward  when the location algorithm performs an intersection of two maps  it may produce a region of zero volume  this indicates that the maps were disjoint  and the object could not possibly be within the previously postulated region  the system then reinitializes the location map  l  to the most current reading  which is m rotated and translated to the readers current position  however  the offline algorithm is more complicated as it produces a likelihood location map  one solution is applying a likelihood threshold to the likelihood location map and removing any location with a probability less than the threshold  if the resulting location map is empty  we will consider that the object has moved and reinitialize the location map  l  to the most current reading  choosing an appropriate threshold is a critical factor in this approach  using a larger threshold will increase the likelihood that the resulting location map is empty when the object actually did not move  in section 5  we show how to choose an appropriate threshold  4 implementation considerations we have implemented a prototype ferret system as shown in figure 5 although the prototype is quite large  this is due to the combination of many separate pieces of hardwarethere is nothing that would preclude a much smaller commercial version  our prototype is based on the following hardware  a thingmagic mercury4 rfid reader  the output power of the reader is set to 30dbm  1watt   this reader operates at the frequency range 909 928mhz  and supports rfid tags of epc class 0  epc class 1  and iso 18000-6b  the reader is paired with a thingmagic monostatic circular antenna that has a balloon shaped radiation pattern  an alternative is to a use a linear antenna that has a more focused radiation pattern and longer range ; however  the narrower beam will produce fewer positive readings for each tag  the tradeoff in antenna choice and the possibility of future antennas with variable radiation patterns are interesting questions for future research  we used an orientation-insensitive  epc class 1  alien technology m rfid tag operating at 915mhz  a sony motion eye web-camera connected to a sony vaio laptop  this cmos-based camera is set to a fixed focal length of 2.75mm  and uses a sensor size of 2.4mm by 1.8mm  the camera provides uncompressed 320x240 video at 12 frames-per-second  fig  5 ferret prototype system cricket  10  ultrasound 3d locationing system to estimate the location of the camera and rfid reader  we deployed cricket beacons on the ceiling  and attached a cricket sensor to our prototype system  the cricket sensor is offset from the camera and rfid reader and we correct for this translation in software  a sparton sp3003d digital compass to obtain the 3d orientations  pan  tilt  and roll  of the cameras lens and the readers antenna  we mounted the compass  the cameras lens  and the readers antenna with the same 3d orientation  experimental evaluation 1 volume volume  m3  10 0.1 100 % 100 % 80 % 80 % projection area 5 60 % 40 % 20 % 0.01 0 20 40 60 80 time  secs  100  a  absolute volume 120 0 % 60 % 40 % 20 % 0 20 40 60 80 time  secs  100  b  relative volume 120 0 % 0 10 20 30 40 50 60 70 80 90 100 time  secs   c  display area fig  6 online refinement of location in this section  we evaluate ferret by focusing on the performance of locationing and projection  in particular  we concentrate on how quickly ferret can refine the location of an object for a user  we show how to tune the offline algorithm to trade the size of the location region and the overall error rate  we then show a comparison of the online and offline systems  we demonstrate that ferret can detect objects that move within a room and we show the computation and storage costs of our system  we measure ferrets performance using two metrics  the size of the postulated location and the error rate  ferret automatically provides the size  either the volume of the three-dimensional region  or the area of the two-dimensional projection on the video screen  the three-dimensional region is not spherical  but to interpret the results  a sphere with a volume of 0.01m3 has a diameter of 26.7cm and a volume of 0.1m3 has a diameter of 57.6cm  ferrets error rate is the number of objects that do not appear in the area projected onto the display  the error rate is determined through manual inspection of a video recording  all of our experiments are conducted in a 4m x 10m x 3m room equipped with a cricket ultrasound system  we used five beacons mounted on the ceiling which we manually calibrated  the origin of our world-coordinate system is a corner of the room  the camera records all video at 12 frames/second  and the rfid reader produces 4 readings per second  for the online system  we use a coverage map that includes all places where the tag has a non-zero probability of reading a tag  that region is an irregular shape that is 2.56m x 1.74m x 2.56m at the maximum and has a volume of approximately 2m3  5.1 online refinement performance the primary goal of ferret is to quickly locate  refine  and display an outline on the video display that contains a particular object  as this happens online  ferret continuously collects readings and improves its postulation of the objects locationthis is reflected as the volume of the region shrinking over time  to demonstrate this  we placed one tag in the room  and then walked randomly around the room with the prototype  we plot the volume of the location estimation versus time in figure 6 the absolute volume tracks the total volume of the region  while the relative volume tracks the size of the region relative to the starting coverage region of the reader  in this case ferret does not make any errors in locating the object  the time starts from the first positive reading of the tag and ferret begins with no previous knowledge about object locations  the results show that the volume size of the location estimation drops from 2m3 to 0.02m3 which is only 1 % of the readers coverage region in less than 2 minutes  the volume monotonically decreases  as intersecting positive readings only shrinks the area  while negative readings are ignored  also  this is a pessimistic view of the refinement timewith prior knowledge  the process occurs much more rapidly  for instance  if the user switches to searching for another object in the same room  ferret can take advantage of all of the previous readings  if a previous user has stored location information on the tag  this reader can also take advantage of that from the time of the first reading  additionally  if some location information is stored in a centralized database  ferret can immediately project an area onto the video without any positive readings  in addition to the volume size of the location estimation  we also plot the projection area versus time in figure 6  c  in which the projection areas are shown as a percentage of the image plane area  our results show that the final projection area is only 3 % of the whole image  or approximately a 54 pixel diameter circle on a 320 x 240 frame  however  the projection area does not monotonically decrease as the volume does  this is because the camera is constantly moving  thus the point-view constantly changes  and the same volume can project different areas from different orientations  5.2 offline algorithm performance while the online algorithm is useful for current mobile devices  the offline algorithm uses more information  and a more precise representation of the objects location likelihood  to evaluate ferrets precision in locating objects  we placed 30 tags in a 2.5m x 2.5m x 2m region  and we move the prototype around the room for 20 minutes  we repeat the experiment 3 times and record the volume of the postulated region  and manually verify how many objects are truly contained in the area projected onto the video plane  with 30 tags and 3 experiments  ferret can make between 0 and 90 location errors  before evaluating the offline algorithm  we must set a threshold for the minimum likelihood for the object as described in section 3 recall that a larger threshold can reduce the volume encompassing the likely position of the object  however  a larger threshold will also increase the error rate of ferret  the volume doesnt contain the object   in order to test the sensitivity of offline ferret to the change of likelihood threshold  we varied the likelihood threshold from 0.00001 to 0.4  and ran the offline ferret algorithm on the data we collected in the experiment  we show the results in figure 7  1 fig  7 performance of offline ferret under different likelihood thresholds  0.8 probability threshold errors mean volume 0.00001 5/90 0.0117m3 0.0001 5/90 0.0117m3 0.001 5/90 0.0116m3 0.01 5/90 0.0112m3 0.1 6/90 0.0108m3 0.2 7/90 0.0104m3 0.3 8/90 0.0102m3 0.4 9/90 0.0100m3 0.6 0.4 0.2 0 0 online offline 0.05 0.1 0.15 0.2 volume  m3  0.25 0.3 0.35 fig  8 cdf of locationing accuracy the results show that   i  the number of errors almost doubles from 5 to 9 as threshold increase from 0.00001 to 0.4  ii  the mean volume of the location estimation is essentially constant ; and  iii  for a threshold 0.01  the number of errors doesnt change  when using too high of a threshold ferret incorrectly shrinks the volume  leaving out possible locations for the object  considering the balance of error rate and mean volume  we choose a likelihood threshold of 0.01 using this threshold  we run the offline algorithm and compare it to the performance of the online algorithm  in figure 8  we plot the cdf of ferrets location accuracy for both algorithms  the results show that  i  the online algorithm can localize an object in 0.15m3 and 0.05m3 regions with 80 % and 50 % probability  respectively  the 0.15m3 and 0.05m3 regions are only 7.5 % and 2.5 % of the readers coverage region which is 2m3 ;  ii  the offline algorithm outperforms the online algorithm by localizing an object in a 0.05m3 region with more then 90 % probability and in a 0.1m3 region with 100 % probability  however  when we verify the online algorithms error rate  it only makes 2 errors  as compared to the offline algorithms 5 errors  we believe that the slightly greater number of errors in the offline algorithm is due to our incorporation of negative readings in the algorithm  in this experimental setup  the prototype system is constantly moving and the tags are in the coverage region of the rfid reader for a small portion of the total time  less than 5 %   this scenario will generate 19 times the number of negative readings than positive readings  and negative readings are weighted as heavily as positive readings  considering that we measured the performance of the reader under ideal conditions  we have overestimated the performance of the rfid reader  the online algorithm does not exhibit the same behavior as it does not ever use negative readings  as negative readings are correlated by orientation  and location  we believe that more accurate modeling of reader performance is an important direction for future research  5.3 mobility effects ferret exploits the users mobility to produce a series of readings from multiple positions  and further refine its location estimation via intersecting the coverage regions at these positions  the previous experiment showed the results of a human  yet uncontrolled  mobility pattern  in reality users move erratically ; however  their motions are composed of smaller  discrete motion patterns  to study how individual patterns affect the performance of ferret we placed a single tag in the room and evaluated ferret with a small set of semi-repeatable motion patterns shown in figure 9   a  straight line  the prototype system moves in a straight line  tangential to the object  without changing the orientation of the camera lens and rfid reader ;  b  head-on  the prototype moves straight at the object and stops when the reader reaches the object ;  c  z-line  the prototype system moves in a z-shaped line without changing its orientation ;  d  rotation  the prototype system moves in an arc  while keeping the lens orientation radial to the path ;  e  circle  the prototype system moves in a circle  while keeping the reader facing the object  intuitively  the circular pattern may be the least likely of the mobility patterns  whereas the head-on is probably the most likelyonce the user gets one positive reading  she will tend to head towards the object in a head-on pattern  we evaluated ferrets performance using the volume of the resulting region  for each movement pattern we ran three experiments  averaged the results  and compared the smallest volume size of both online and offline ferret  our results are shown in figure 11 the results show that ferret performs similarly for each of the movement patterns ; however the circular pattern performs the worst  the circular pattern always keeps the object in view and generally in the center of the readers coverage region  this produces a set of readings that generally cover very similar regions  in each of the other cases  the mobility of the reader covers more disjoint spaces  and thus produces smaller volumes  this is true even of the head-on pattern as the first reading and the last reading have very little volume in common  another result is that the offline algorithm widely outperforms the online algorithm  except in the case of the circular and head-on patterns  where the performance is similar  much of the offline algorithms performance advantage  a  straight line  b  headon  c  zline rfid tag ferret moving direction  d  rotation  e  circle ferret system fig  9 path of the ferret device fraction detected 1 online offline 0.8 0.6 0.4 0.2 0 0 50 100 150 200 moving distance  cm  fig  10 detected object movements straight line head-on z-line rotate circle online volume  m  0.020 0.0042 0.023 0.026 0.032 3 offline volume  m  0.0015 0.0030 0.0017 0.0011 0.026 offline  online 13.33 1.40 13.52 23.63 1.23 3 fig  11 performance of ferret under various mobility patterns  comes from incorporating negative readings to reduce the possible locations for the object  in the case of the circular and head-on patterns  the object is always in view  producing few negative readings  yielding similar performance to the online algorithm  although non-intuitive  this means that not seeing the object is as important as seeing it to narrow its location  5.4 object motion detection ferret is designed to deal with objects that move infrequently  but when the object does move  ferret should detect this and start its refinement process over  as discussed in section 3  whenever ferret encounters an empty location estimation  ferret assumes that the corresponding object has moved  to evaluate ferrets performance in detecting these nomadic objects we place a tag in the room and use ferret to estimate its location  we then move the tag a distance between 5cm and 200cm and again use ferret to estimate its location  we repeat the experiment ten times for each distance  and record the number of times that ferret didnt detect a moved object  the results are shown in figure 10 the figure shows that the online and offline ferret can detect 100 % object movements when the moving distance exceeds 25cm and 20cm  respectively  this is consistent with our previous results that show that ferret can localize an object to within an region with a volume of hundredths of a m3 this gives a radius on the order of 20cm  exactly how well ferret can detect movement  as the object has not actually left the postulated area  ferret is still correct about the objects location  5.5 spatial requirements the prototype has a non-zero probability of detecting tags in balloon-shaped region  with maximum dimensions of 2.56m x 2.56m x 1.74mthis shape has a volume of approximately 2m3  for the offline algorithm we sample this coverage region every centimeter  as discussed in section 3  the offline algorithm requires every point in this space  while the online algorithm only requires a set of points that describe the exterior of the region  this reduced representation results in much smaller spatial requirements as compared to offline spatial requirements   i  the offline algorithm uses a float of four bytes to describe the probability of a sample point  and the total space is 256 256 174 4 = 43.5m bytes using a three dimensional array to store the probabilities of all sample points  and  ii  the online algorithm uses a two dimensional array  the dimensions correspond to y and z  to represent the coverage region  and consequently  it only needs two bytes to track the x value of every outside sample point  thus the total space required is 2561742 = 178k bytes  both the offline and online representations are highly compressible  the offline can be reduced to 250k bytes and the online representation to 5k bytes using the commonly available compression tool gzip  for the foreseeable future  rfid tags will not contain enough storage for the offline representation  while the online version is not unreasonable  if tags have more or less storage the number of sample points can be adjusted  although this will affect the precision of the system  5.6 computational requirements the computational requirements of the offline and online algorithms have a similar relationship  we measured the computational requirements of ferrets locationing algorithm on an ibm x40 laptop equipped with a 1.5ghz pentiumm processor   i  the offline algorithm costs 749.32ms per reading for each object  and  ii  the online algorithm only costs 6ms per positive reading for each object  which is only 1/125 of the offline computational requirements  our results show that the online algorithm incurs small overhead and will run online to track multiple tags simultaneously on relatively inexpensive hardware  while the offline algorithm incurs large overhead and can only run offline  6 related work researchers have developed rfid-based indoor locationing systems  8  9  using active  battery powered  rfid tags  in spoton  8   hightower  et  al  use the radio signal attenuation to estimate tags distance to the base stations  and triangulate the position of the tagged objects with the distance measurements to several base stations  landmarc  9  deploys multiple fixed rfid readers and reference tags as infrastructure  and measures the tracking tags nearness to reference tags by the similarity of their signal received in multiple readers  landmarc uses the weighted sum  the weight is proportional to the nearness  of the positions of reference tags to determine the 2d position of the tag being tracked  the above work use battery-powered sensors to identify and locate objects  these sensors are expensive  at least tens of dollars per sensor  and have limited lifetime  from several days to several years   these limitations prevent them from scaling to applications dealing with hundreds and thousands of objects  in contrast  passive rfid tags are inexpensive  less than a dollar per tag and falling  and do not require battery power source  these features make passive rfid technology ideal for such applications  fishkin  et.al  proposed a technique to detect human interactions with passive rfid tagged objects using static rfid readers in  4   the proposed technique used the change of response rate of rfid tags to unobtrusively detect human activities on rfid tagged objects such as  rotating objects  moving objects  waving a hand in front of objects  and walking in front of objects  however  this doesnt consider the problem of estimating the locations of rfid tagged objects  their experimental results show that their system could nearly always detect rotations  while the system performed poorly in detecting translation-only movement  hahnel  et.al proposed a navigation  mapping and localization approach using the combination of a laser-range scanner  a robot and rfid technology  6   their approach employed laser-based fastslam  7  and monte carlo localization  2  to generate offline maps of static rfid tags using mobile robots equipped with rfid readers and laser-range scanner  through practical experiments they demonstrated that their system can build accurate 2d maps of rfid tags  and they further illustrated that resulting maps can be used to accurately localize the robot and moving tags  ferrets offline algorithm uses the same underlying technique to map the detection probability and form a pose about the location of the tag  however  ferret focuses on the novel problems posed by the integration of a handheld device and nomadic objects  in addition to the offline technique  ferret also provides an online algorithm for real-time use on a mobile device this technique greatly reduces complexity over the offline technique  ferret also address the concerns of how to deal with nomadic objects  such as how to reset the locationing algorithm when objects move  furthermore  ferret incorporates a video display to show the tags locationsthe offline algorithm alone does not provide a method for displaying the uncertainty region to the user  something that ferret adds  our evaluation shows that ferret can incorporate human movements  as opposed to robotic ones  demonstrating that these techniques will be useful for human-driven applications  the 3d rfid system uses a robot-controlled uni-directional antenna  and the 3d tag consists of several combined tags  11   two kinds of 3d tags are developed  union tag and cubic tag  the proposed system can not only detect the existence of the 3d tag but also estimate the orientation and position of the object  however  they require specific orientation-sensitive 3d tags  custom-built from multiple tags  furthermore  the system uses an expensive robot system to control the antennas movement and then estimate the orientation and position of the object  in contrast  ferret only needs one standard orientation-insensitive tag per object and the users inherent mobility to estimate the objects location  7 conclusions this paper presents the design and implementation of ferret  a scalable system for locating nomadic objects augmented with rfid tags and displaying them to a user in real-time  we present two alternative algorithms for refining a postulation of an objects location using a stream of noisy readings from an rfid reader  an online algorithm for real-time use on a mobile device  and an offline algorithm for use in post-processing applications  we also present methods for detecting when nomadic objects move and how to reset the algorithms to restart the refinement process  we present the results of experiments conducted using a fully working prototype  our results show that  i  ferret can refine object locations to only 1 % of the readers coverage region in less than 2 minutes with small error rate  2.22 %  ;  ii  ferret can detect nomadic objects with 100 % accuracy when the moving distances exceed 20cm ; and  iii  ferret can use a variety of user mobility patterns  references 1 b barshan and h f durrant-whyte  inertial navigation systems for mobile robots  ieee transactions on robotics and automation  11  3  :328342  june 1995  2 f dellaert  d fox  w burgard  and s thrun  monte carlo localization for mobile robots  in proceedings of the 1999 ieee international conference on robotics and automation  icra99   detroit  mi  may 1999  3 a elfes  using occupancy grids for mobile robot perception and navigation  ieee computer  22  6  :4657  june 1989  4 k fishkin  b jiang  m philipose  and s roy  i sense a disturbance in the force  long-range detection of interactions with rfid-tagged objects  in proceedings of ubicomp04  pages 268282  september 2004  5 j d foley  a v dam  s k feiner  and j f hughes  computer graphics  principles and practice in c addison-wesley professional  second edition  1995  6 d hahnel  w burgard  d fox  k fishkin  and m philipose  mapping and localization with rfid technology  in proceedings of icra05  april 2004  7 d hahnel  w burgard  d fox  and s thrun  an efficient fastslam algorithm for generating maps of large-scale cyclic environments from raw laser range measurements  in proceedings of iros03  pages 206211  october 2003  8 j hightower  r want  and g borriello  spoton  an indoor 3d location sensing technology based on rf signal strength  technical report 00-02-02  university of washington  2000  9 l m ni  y liu  y c lau  and a p patil  landmarc  indoor location sensing using active rfid  in proceedings of percom03  pages 407417  march 2003  10 n b priyantha  a chakraborty  and h balakrishnan  the cricket locationsupport system  in proceedings of mobicom00  boston  ma  august 2000  11 s roh  j h park  y h lee  and h r choi  object recognition of robot using 3d rfid system  in proceedings of iccas05  june 2005  12 r want  an introduction to rfid technology  ieee pervasive computing  5  1  :25 33  januarymarch 2006  13 r want  a hopper  v falcao  and j gibbons  the active badge location system  acm transactions on information systems  tois   10  1  :91102  january 1992  14 a ward  a jones  and a hopper  a new location technique for the active office  ieee personal communications magazine  4  5  :4247  october 1997  15 x.liu  m corner  and p shenoy  ferret  rfid localization for pervasive multimedia  technical report 06-22  university of massachusets amherst  2006  