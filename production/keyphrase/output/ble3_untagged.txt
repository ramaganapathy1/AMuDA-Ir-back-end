an analysis of the accuracy of bluetooth low energy for indoor positioning applications r faragher  university of cambridge  uk ; r harle  university of cambridge  uk ramsey faragher ramsey faragher is a senior research associate at the university of cambridge working on gnss-denied positioning  sensor fusion and machine learning  he is also a fellow of the royal institute of navigation  an associate editor of the institutes journal  and a bye fellow of queens college  cambridge  previously he was a principal scientist at the bae systems advanced technology centre where he developed the navsop opportunistic positioning suite and other gnss-denied tracking technologies  in 2009 faragher won the bae systems early career engineer of the year award for developing navsop  faragher has also been the recipient of best paper in track and best presentation awards at previous ion conferences  robert harle robert harle is a senior lecturer at the university of cambridge and fellow of downing college  cambridge  his research interests in indoor positioning  sensor fusion  and wireless sensor networks  he has worked on indoor positioning since 2000  developing a series of infrastructure-based and infrastructure-free solutions  abstract this study investigated the impact of bluetooth low energy devices in advertising/beaconing mode on fingerprint-based indoor positioning schemes  early experimentation demonstrated that the low bandwidth of ble signals compared to wifi is the cause of significant measurement error when coupled with the use of three ble advertising channels  the physics underlying this behaviour is verified in simulation  a multipath mitigation scheme is proposed and tested  it is determined that the optimal positioning performance is provided by 10hz beaconing and a 1 second multipath mitigation processing window size  it is determined that a steady increase in positioning performance with fingerprint size occurs up to 7 1  above this there is no clear benefit to extra beacon coverage  i introduction the introduction of low-cost  low-power bluetooth low energy  ble  beacons for proximity detection also provides a new signal of opportunity with which to perform more fine-grained positioning  this paper provides a comparison of wifi and ble fingerprinting with representative hardware in a large indoor space with a highly-accurate  3 cm in 3d at 95 % confidence  ultrasonic ground truth referencing system  indoor positioning systems based on wifi fingerprinting schemes  1  2  3  are now well established due to the ubiquity of wifi signals and are known to provide positioning accuracy of a few metres given a wellsurveyed environment and dense wifi coverage  however  access points are rarely deployed with the ideal density and geometry for positioning  and wifi is a power-hungry protocol  bluetooth low energy  ble  uses the same 2.4 ghz ism radio band as wifi  and addresses many of these shortcomings  it was designed primarily as a short range energy-efficient machine-tomachine communication protocol characterised by very short messages with minimal overhead  the standard defines many core capabilities  including simple proximity sensing  targeted advertising and simple nearme applications are already exploiting these capabilities  however for most traditional indoor positioning applications such as asset tracking  route guidance  unrestricted navigation and rapid localisation  the indoor positioning system needs to be available at every possible location within the environment  not just when in close proximity to ble beacons  therefore the impact on unrestricted indoor positioning of introducing ble beacons into an environment needs to be assessed to determine whether ble can have a significant impact on solving the larger indoor gps problem  bluetooth low energy bluetooth low energy  4  devices operate in the 2.4 ghz licence-free band  and so share the same indoor propagation characteristics as 2.4 ghz wifi transceivers  the beaconing  or advertising mode  permitted in the ble standard enables a very short  unsolicited message at very flexible update rates  these messages can be used to allow a device to detect close proximity to a specific location based on the received signal strength  rss   in this way  location specific triggers  adverts  vouchers and information can be provided to the user  ble advertising beacons are particularly attractive to retailers because of the promise of long battery lives of many years  and so low maintenance requirements  long battery lives are expected to require low radio power output and/or low beaconing rates  while this does not affect their use for proximity detection it does affect their usefulness for providing fingerprint-based positioning throughout an entire indoor environment  fingerprinting fingerprinting is currently the state-of-the-art indoor positioning scheme readily available on standard smartphones  a fingerprint refers to the pattern of radio signal strength measurements recorded at a given location in space and consists of a vector of signal identity information  such as cellular cell-ids  or wifi mac addresses  and a corresponding vector of received signal strength  rss  values  typically wifi signals alone provide the fingerprints  but cellular measurements and data from a magnetometer can also be used  5   wifi signals exhibit greater dynamic range and anisotropy throughout a building than the rss from the external  and often very distant  signal sources such as the cellular network  magnetometer data provide a high dynamic range on a very fine scale but can only provide a single contribution to the fingerprint vectors  which will be dominated by the many wifi and cellular measurements available in a typical metropolitan indoor environment  of course also the case for ble  see figure 1  as both technologies operate at 2.4 ghz  ii  ble ranging precision one of the simplest ways to achieve metre-level accuracy in specific zones is by a proximity measurement  the measurement of distance using received signal strength is very accurate when within a metre or so of a transmitter because the signal strength decreases as the inverse square of the distance to the source  and there are rarely any signal obstructions  it is therefore easy to detect close proximity to a ble device  and hence confidently trigger a location-based event  however the ranging performance rapidly drops off with range  as shown in figure 1 if we were to assume a modest measurement noise such as 3 dbm  this would result in a ranging uncertainty of the same order of magnitude as the distance to the source ; within a metre of the transmitter a positioning uncertainty of only a few centimetres would be possible  however  at 10 m the ranging error would be around 5 m the human body also attenuates 2.4 ghz radio signals  further complicating the range estimation  figure 1 shows the output from a short set of static tests moving away from a ble beacon in an open environment  the experiment demonstrates that a ~10 db reduction in rss caused by this body effect will still result in a reasonable proximity measurement when within 10 cm of the transmitter  the receiver will still be estimated to be within a metre of the transmitter   whereas out at 1 metre the body effect can result in a range estimate of 5-10 m as a receiver moves through a complex signal environment  such as a building full of walls and objects  the rss of any non-line-of-sight signal can vary rapidly on a fine spatial scale  metre level  as that signal penetrates different media and interacts with different objects as it moves along different paths through the building  fingerprinting relies on these rss values varying rapidly on the spatial scale  but only very slowly over time  such that a receiver coming back to a fingerprint location in the future should record the same rss measurements  within the limits of measurement noise  in reality fingerprints inevitably degrade over time as environmental changes occur the density of people within the building at different times  the positions of furniture  even the positions of walls and partitions  this means that traditional fingerprinting schemes require regular re-surveying to ensure the accuracy of the system  wifi fingerprints are also affected by the position of the user 's body during the measurements  as the human body is typically a good attenuator at wifi frequencies  this is figure 1 shows the experimentally-derived rss reduction with range from a ble source  with and without body attenuation iii  channel bandwidth wifi access points communicate on a radio channel that is at least 20 mhz wide  broadcasting their identifier  bssid  on the same channel  ble follows bluetooth classic in using frequency hopping to communicate  it has 40 channels  each of width 2 mhz  it moves between these channels pseudorandomly to transmit data in short chunks  however  ble uses only three of these channels to broadcast  advertise  its identifier  this is an energy compromise  the receiver needs to do less work if it only needs to monitor three channels   the ble advertisement channels are nominally labelled 37  38  and 39 and are centred on 2402 mhz  2426 mhz and 2480 mhz  respectively  see figure 2   each advertisement is repeated on each of the three channels in quick succession  the receiving device adopts a scanning process that cycles over the advertising channels  pausing to listen for advertisements  the precise time spent by the tuner within each channel is unspecified in the bluetooth standards  but we have found that recent smartphone implementations switch between channels every few milliseconds  figure 2 shows the 40 ble channels within the 2.4 ghz band  the green channels are the advertising channels used by ble beacons  three wifi channels are shown for comparison  red   a ble scan continues indefinitely and each advertisement is reported as it is received  if a scan lasts longer than the beacon interval  multiple sightings of that beacon will be reported  some current mobile operating systems report each connectable beacon only once per scan  in this work we used non-connectable beacons to avoid this issue  for micro-location  proximity  applications all that is required is to listen for advertisements and take the strongest advertisement over some arbitrary period as coming from the nearest beacon  importantly  the ble specification for an advertisement report does not include the channel on which it was received  this information is available when using ios 7  and we exploit this here to provide extra insight into the behaviour of ble signals indoors  note that a device agnostic solution must not assume this channel information is available  fast fading effects figure 3 demonstrates ble fading due to interference in the spatial domain  the iphone was moved across a 3 m length  away from a ble beacon and two wifi access points using a simple conveyor belt in a small room  the test was performed out of working hours to give a more stable radio environment  the cluttered space contained many surfaces from which signals could reflect  including walls  the floor and ceiling  the conveyor belt  furniture and miscellaneous objects  figure 3 shows the rss variation over both time and distance for an iphone moving on a slow conveyor belt away from a ble beacon and two wifi access points  the motion was so slow  around a millimetre per second  that velocity doppler effects can be ignored  deep multipath fades are evident in all three ble channels  with 30 db drops in power across just 10 cm of movement  importantly  the different channels exhibit fades at different spatial positions  the exact distances travelled by reflected signals to cause destructive interference is dependent on the signal wavelengths and so fades occur at difference positions for different advertising channels  with their significantly different centre frequencies  the fades are notably less severe for wifi  from a signal fingerprinting perspective  deep fades present a challenge since the rss can vary so dramatically over a spatial range that is smaller than the expected positioning accuracy of the system  the problem is amplified if the receiver does not report the channel on which an advertisement is received  in that case the reported ble rss is effectively drawn randomly from one of the three advertising channels  resulting in an apparent high noise level and very rapid fluctuations in signal power  even for a static environment  understanding and dealing with these large fluctuations is thus key to producing an accurate ble fingerprinting system  to investigate this we used a ray-tracing simulator and a simple 3d model of the environment  only first-bounce reflections were simulated  the signals were constructed by considering a set of monochromatic waves with random initial phase spread across the desired bandwidth and the total power in the channel was determined by summing up the total power of all of these individuallyinterfering carriers  an example output from this simulator is shown in figure 4  comparable to the experimental output shown in figure 3 calculated power  as the average is taken over many oscillations of the sinusoid  narrow channels  such as the 2 mhz ble channel  will however report an average power that is highly dependent on the current locations of these peaks and troughs through the spectrum  the path length differences of interfering signals need to exceed 75 metres before the oscillations in the radio frequency spectrum are shorter than 2 mhz  and the ble bandwidth starts to provide a level of multipath resilience  figure 4 shows a simulated conveyor belt experiment for a single wifi channel and a single ble channel the fact that signal fading at a given spatial location varies with frequency explains why the depth of fades in the overall reported signal strength reduces as the bandwidth increases  this is demonstrated in figure 5  which shows the output of a simple simulated experiment where only one reflecting surface exists  an arbitrary point has been selected along the path that contains both the line of sight and the reflected signal  and the radio spectrum across the entire 80mhz band measured at that location is plotted  some frequencies experience constructive interference  and some destructive  as the simulation is of a simple single-reflection experiment there is a sinusoidal transition between these states  the wavelengths in this band range from 12.1 cm to 12.5 cm  therefore once the signal has propagated about 2 metres from the source the frequencies at the extreme ends of the spectrum are out of phase  2 metres represents 16.5 wavelengths for 2.4 ghz and 16 wavelengths for 2.48ghz   therefore if two copies of the signal interfere  one having travelled 2 metres further  there will be constructive interference at one end of the spectrum and destructive at the other  figure 5 shows the spectrum of the received signal amplitude across the 2.4 ghz ism band for a simple multipath interference event  a reflection coming straight back along its original path   an example channel occupied by a ble beacon is highlighted in blue  as we extend this idea to longer path length differences the number of constructive and destructive events through the spectrum increases  figure 5 is based on a reflector 7 metres from the source  as we can see from figure 5  if the entire band is used to calculate the total signal power  then small motions will have no effect on the overall for most typical indoor environments  the path length differences caused by reflectors  walls  ceiling and floor  are usually large enough to dampen the frequency selective fading phenomena for the 20 mhz and 40 mhz wifi channels  and future 5g wifi will makes use of 80 mhz and 160 mhz channels  which will improve matters further   however  the coherence length of the 2mhz ble channels is much longer than these typical length scales  hence we expect to see much larger fluctuations from fast fading multipath interference with ble indoor positioning than wifi  as observed above  corridor test a ble beacon  set to 20hz advertising rate  and wifi access point were placed at the far end of a 45 metre corridor  see figure 10  and two smartphones  an iphone and an android-based samsung s4  were mounted to a pedestrian who walked away from the devices at a slow pace  and then turned around and slowly walked back  ble data were logged with both devices ; wifi could only be logged using the s4  the wifi data and iphone ble data is shown below in figure 6 as expected from the previous analysis  the wifi data exhibits lower apparent measurement error than the ble data as it provides great resilience to fast fading in environments of typical indoor dimensions  figure 6 shows the wifi rss data  circles  and the iphone ble data separated out by channel number  triangles  as the user moved away from the transmitters  the s4 ble data displayed the expected fall and subsequent rise in rss for the roundtrip walk  see figure 7   however  we also observed a small but significant set of spurious measurements approximately 20 db higher than expected  after some investigation we discovered that turning the simultaneous wifi scanning off removed these outliers  see figure 8   figure 7 shows ble data for a walk away from  then back towards  a beacon using the s4 handset with wifi constantly scanning figure 8 shows a repeat of the experiment shown in figure 7 but this time with wifi scanning disabled these spurious values would be highly detrimental to fingerprinting if not filtered from the data  the issue appears to stem from the use of active wi-fi scanning  rather than passive  in the latest version of android  4.4.4   a conclusion that can be drawn at this point is that it may be useful to switch off all radios that are not being used while rss fingerprint measurements on a particular radio band are being recorded  multipath mitigation to aid accurate ble fingerprinting performance we need to ideally reduce the large measurement variation to the levels of wifi  or better   smoothing could be achieved by taking the mean or median of a batch of data  with a choice driven by the asymmetry of the distribution of samples around the true value  the batch size is also limited by many factors such as the beaconing rate  the receiver speed and the desired positioning accuracy  in order to assess the effect of window size on the ble rss error data from the corridor tests was examined  the data was segmented into batches of consecutive samples and the mean value calculated  the difference between pairs of consecutive mean values was recorded and the standard deviation of this new distribution calculated  different window sizes were tested  as the rss is expected to vary smoothly down a corridor in line of sight conditions once fast fading multipath interference has been mitigated  then this standard deviation should tend to a small value as multipath errors are removed  the result of this analysis is shown in figure 9 figure 9 shows the effect of batch window size on multipath mitigation performance for iphone data the test suggests that batch smoothing exhibits noticeable improvement up to a batch size of around 10 samples  without noticeable improvement above this value  if the batch is allowed to become too large then the user motion will be appreciable during the windowing process  smearing the measurements across a distance larger than the potential accuracy of the system for static batch measurements  processing data from all channels shows an improvement over single channel processing  this may due to the fact that the batch window can be populated three times faster if all channels are used  therefore the receiver moves a much shorter distance during the smoothing process  the batch size that is most appropriate in practice depends on the beaconing rate and the speed of the user  slower users can exploit lower beaconing rates to gather the same number of samples in unit distance travelled   the beaconing rate affects the battery life of the ble beacon  and for most ibeacon purposes will typically be set to an advertising rate of a few hertz  for positioning purposes it is clear that good multipath mitigation is highly dependent on the properties of the receiving device and the beaconing rate  during our experiments we determined that 10 hz beaconing and 1 second batch processing of median or mean values produced the best  smooth and repeatable  rss profiles  it was observed that taking the mean or median of the iphone datasets to provide a single rss metric produced very similar results  the highly skewed s4 data was filtered better by taking the median of a batch window than the mean  iv  geometry an advantage of ble over wifi is the flexible deployment options it provides  ble beacons are very small  typically the battery dominates the volume of the beacon  and can be placed anywhere  unlike wifi access points  which are typically located near power sources and are generally much bulkier than ble beacons  since wifi access points are also usually located in order to maximise signal coverage for minimal infrastructure deployment  they are seldom located ideally for radio positioning  for example  given a large square open area such as a canteen  a wifi access point may be located in the centre of the ceiling for best coverage  whereas optimal radio positioning performance would instead by provided by a set of transmitters distributed around the perimeter of the region  ble has the flexibility and portability to allow good signal geometries for radio positioning to be provided as needed  v fingerprints and maps wifi measurements are returned by smartphones at a rate of around 1hz or slower as a batch of data representing the full scan of the whole band  ble measurements are returned individually as soon as they are detected  fingerprints are a batch of data that identify the region of space where they were recorded  and so the ble measurements must be batched together intentionally to form an rss fingerprint  the choice of the width depends on a series of factors  including movement rate  fast fading and beaconing rate  the desire for metre-level positioning suggests that the windows should not exceed 1 second  as a pedestrian will walk further than 1 metre in this time  by a similar argument  the window should not fall below 0.1 s since fast fades occur at a spatial separation of around half the signal wavelength  around 12 cm  or longer  if the channel information is unavailable  as per the official ble specification   then we must aim to sample data from all three advertising channels for each beacon in each window  we choose a window that provides the handset with a chance to scan across all three channels  and hope that we have received samples on each  this requires a minimum of three samples per beacon per window  but of course the more samples we have the more likely we are to achieve a good result  this places a constraint on the beaconing rate correlated with the expected walking speed of the user being track  since it is easy to remove data manually in post processing but not to add more  we set a high beaconing rate of 50hz and a fingerprint window size of 100 ms in order to satisfy all of these constraints  fingerprint databases are commonly constructed by manually visiting a series of survey sites and manually taking readings at each  however  because the active bat system  6  offers high-accuracy ground truth position  we chose to construct the maps using data collected during the walking experiments  it is also possible to construct fingerprint maps using simultaneous localisation and mapping  5   each fingerprint was assigned a position using the ground truth and we used gaussian processes regression  7  to generate a continuous signal strength map per source  for ble  fingerprints were formed using the various fast-fade and smearing mitigation techniques described in the previous section  note that we selected an offline time window and fast-fade mitigation scheme that matched the online algorithm i.e  the maps were based on the same fingerprint construction technique as they were used for  positioning a bayesian estimator provided the positioning solution on subsequent walks  the operating region was divided into a grid with square cells of length 1 m or smaller and the probability of a given fingerprint corresponding to each cell was determined for each epoch using the euclidean distance  2 =1   = equation 1 for current fingerprint r containing rss measures for n beacons and the value m extracted from the coordinate of interest from the signal strength map for the corresponding beacon  this fingerprint distance was then weighted using a gaussian kernel to generate a probability for that cell which accounted for the uncertainty in both the map estimate and the current fingerprint measurement  the variance data within the gaussian process survey maps were thresholded such that map cells with moderate or high variance were ignored completely  not trusted  during these calculations  the resulting function across all cells was the bayesian likelihood function = 22 equation 2 where is the standard deviation associated with the fingerprint measurement noise  the gaussian kernel is well suited to the error distributions following the use of a multipath mitigation scheme  two priors were tested  a uniform prior at every epoch  and a prior based on the previous epochs posterior  to enable a tracking mode  the uniform prior carried no correlations through time  and so represents the performance of an acquisition position estimate at every epoch  this is referred to as one shot positioning  the tracking mode reduces the effects of sporadic errors in the fingerprint measurements pulling the user far from the true location  as it is assumed that the new posterior distribution will be close to and overlap with the previous one  note that this tracking mode is only appropriate for high beacon rates and good signal coverage such that it is a valid assumption that the user moves only a small fraction of the length scale of the posterior distribution between measurement epochs  once a posterior distribution was calculated  we estimated the position  and hence the error  using the maximum value  i.e  maximum a posteriori  map  probability  and also the weighted mean of the posterior  i.e  minimum mean square error  mmse    in general the results were very similar  except when the posterior was multi-modal  or described a sickle shape  vi  fingerprinting comparison experimental set up figure 10 shows the locations of the ble beacons within the test area  an analysis of the performance of indoor positioning using signal fingerprinting was conducted within the computer laboratory at the university of cambridge  the experiment provided a comparison between wifi and ble fingerprinting using the active bat positioning system as a ground truth reference  active bat provides a 3d positioning accuracy of around 3 centimetres and provides a position estimate at a 3hz update rate  the experiments were carried out in the 45m by 12m section of the building that had active bat coverage  we made use of the established wifi access point deployment  with access points positioned at the two ends of the experimental area  and one halfway down the corridor  there was also weak wifi signal coverage from access points in other  we deployed 19 ble beacons in the same area  figure 10   an attempt was made to locate the ble beacons in realistic locations for a typical commercial use case  i.e  mounted close to objects or items of interest  rather than being uniformly distributed specifically to ensure maximum signal coverage in a cellular fashion  ble rss measurements were collected using both an apple iphone running ios 7 and an lg nexus 4 handset running android 4.4.2 the former also provided channel information for each received advert  which was not available in android ; the latter recorded wifi rss at approximately 1 hz  which was not available in ios  the experiments consisted of a two lengthy  518 minute  walks in the test area  along routes that were not predetermined  the two walks were taken approximately one week apart  figure 11 shows an example ble signal strength map using gaussian processes regression  the training data can be seen as coloured circles  the black circle shows the location of the ble device  that information is not needed to produce the coverage map  the colour bar scale is in units of dbm  the experimental approach was to deploy an overspecified set of beacons with parameters set to give good results without consideration of real-world issues such as power consumption  this allowed us to bound the possible performance and to look at the effects of the parameters by post-processing the data many times  as a typical desire for indoor positioning using fingerprints is good acquisition performance  rather than relying on continuous tracking  we considered the performance provided by one shot fixes  as well as by a separate tracking solution  vii  fingerprinting results comparison we used data collected in the first walk data to generate a wifi fingerprint map that was then used to estimate the users position for the data from the second walk  this formed a baseline to compare ble against  for reference the positioning error for a wifi tracking scheme was less than 8.5 m 95 % of the time  this performance was limited by the poor signal geometry afforded by the existing wifi infrastructure available in our laboratory  the advantage of ble lies in the ability to freely locate beacons to provide good signal geometry  repeating this analysis with ble data rather than wifi achieved an accuracy of less than 2.6 m 95 % of the time  the boosted accuracy is in part due to the greater density of beacons  their fast beaconing rate  their high power output  and their better geometry  however  we argue that the density and geometry would be expected to be much higher than wifi in a ble beacon rollout  we have postprocessed the data using reduced beacon rates and transmission powers and found that near-optimal results were possible had we used 10 hz beacons and power levels around -20 dbm for the 19-beacon deployment  slower rates and lower power degrade the positioning result significantly  although rarely below the wifi baseline  which we again attribute to the density and geometry  figure 12 illustrates the value of our multipath mitigation when positioning with ble signals  the left hand image shows a position fix without multipath mitigation  the right shows the same position fix with a 0.5 second median filter applied to the ble input data  each batch processing window contained 10 measurements   it is clear that the multipath mitigation improves the ambiguity in the posterior distribution  figure 13 shows the effect of fingerprint size on position error for ble experiments  the error bars represent two standard deviations from the mean  viii  ble deployment density our testing has demonstrated that smartphones reliably report ble measurements with rss values as low as -100 dbm  this sensitivity should be taken into account during a large scale beacon deployment  since it potentially allows for a lower density than might be expected  we concentrated our studies on the effects caused by interior walls and any associated fittings  shelving  cupboards  etc   latapy  8  has previously proposed that one should assume 1 db of attenuation per metre of an indoor office/residential environment  accounting for furniture and walls  for broadcasts of similar frequency  cellular  to ble the data shown in figure 14 were generated by placing a beacon in the end office of the test area and recording the measurements at known locations in each office along the corridor  increasing the number of internal walls between the receiver and source by one per measurement  we observe that each wall led to an additional loss of around 2 3 db  figure 12 shows the benefit of multipath mitigation processing on ble positioning  the left image is without multipath mitigation and exhibits multimodality and reduced positioning performance compared to the right image  the true location is shown by the pink circle  the pink square and pink cross show the bayesian mmse and map estimators respectively  the high transmission powers and dense deployment also allowed us to asses the effect of fingerprint size on positioning performance  see figure 13  and it was determined that there is little benefit in having more than 6-8 beacons available for a given fingerprint  assuming that they are not co-located   figure 14 shows the experimental and predicted loss per interior partition wall in our office environment  we propose the following rule of thumb to determine ble beacon ranges indoors  = 10 + 20 equation 3 acknowledgments the range  d  in metres depends on the minimum detectable power    the transmission power    the number of interior partition walls w and the loss per wall   a value of 3dbm per wall was appropriate for our office building  the power and loss values are in base-10 logarithmic units  ix  conclusions and further work this paper has explored the use of bluetooth low energy  ble  beacons for fingerprint positioning  we have shown that significant positioning improvement over that available from existing wifi infrastructure is possible even using a relatively sparse deployment of beacons once the characteristics of ble signals are accounted for  1 the low bandwidth of ble makes it is more susceptible to fast fading  and so large rss fluctuations  than wifi  the use of three advertising channels by a ble beacon  combined with frequency-dependent fading  can result in rss measurements varying across a much wider range than the measurement noise for very small changes in the signal path length  this was confirmed in both simulated and experimental tests  2 smoothing the ble rss measurements by batch filtering multiple beacon measurements per fingerprint is necessary to account for the bandwidth and channel hopping issues  the batch window is determined by the user velocity  and best performance is provided by gathering a batch of measurements across a metre of user motion  assuming typical walking pace  this leads to batch windows of 0.5 to 1 second in length  3 positioning accuracy increases with the number of beacons per fingerprint  up to a threshold of around 68 beyond this there is no further improvement in positioning accuracy  combining this information with the desired beacon power level steers the beacon density required for maximum positioning performance  4 a rule of thumb has been provided to permit users to estimate their beacon ranges depending on transmit power and the number of interior walls  5 there is some evidence to suggest that active wi-fi scanning and wi-fi network access can cause errors in ble signal strength measurements  careful consideration of the use of the wi-fi radio in a smartphone is required during ble fingerprinting  the authors would like to acknowledge the technical and financial support of the project sponsors  csr limited  they are also grateful to reinoud erhorst  who developed the conveyer belt apparatus and collected the associated data  figure 3   references 1 bullock  j blake  chowdhary  mahesh  rubin  dimitri  leimer  donald  turetzky  greg  jarvis  murray  '' continuous indoor positioning using gnss  wi-fi  and mems dead reckoning  '' proceedings of the 25th international technical meeting of the satellite division of the institute of navigation  ion gnss 2012   nashville  tn  september 2012  pp  2408-2416  2 bahl  p  padmanabhan  v and balachandran  a   2000   enhancements to the radar user location and tracking system  3 youssef  m  2004 horus  a wlan-based indoor location determination system  ph.d dissertation  university of maryland  2004 4 bluetooth sig  bluetooth specification version 4.0  06 2010  5 faragher  r.m  harle  r.k  `` smartslam  an efficient smartphone indoor positioning system exploiting machine learning and opportunistic sensing  '' proceedings of the 26th international technical meeting of the satellite division of the institute of navigation  ion gnss+ 2013   nashville  tn  september 2013  pp  1006-1019  6 andy ward  alan jones  andy hopper  a new location technique for the active office  ieee personal communications  vol  4  no  5  october 1997  pp  42-47 7 mackay  d j c information theory  inference & learning algorithms  cambridge university press  2002 new york  ny  usa  8 gsm mobile station locating  masters thesis  norwegian university of science and technology  1996  