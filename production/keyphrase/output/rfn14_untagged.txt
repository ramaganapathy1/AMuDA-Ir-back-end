ad hoc networks xxx  2010  xxxxxx contents lists available at sciencedirect ad hoc networks journal homepage  www.elsevier.com/locate/adhoc ferret  an rfid-enabled pervasive multimedia application xiaotao liu a  mark d corner b  prashant shenoy b  a b emc corporation  1133 westchester avenue  white plains  ny 10604  united states department of computer science  university of massachusetts  amherst  ma 01003  united states a r t i c l e i n f o article history  available online xxxx keywords  sensor networks rfid pervasive multimedia positioning a b s t r a c t this paper presents the design and implementation of ferret  a system for locating nomadic augmented with rfid tags and visually displaying them to a user in real-time  we present a novel algorithm to infer location of tagged objects using the location of a camera and reader that observes them  we also present techniques to rene location estimates using multiple observations and a method to display and update object locations on a video camera screen  an experimental evaluation of the ferret prototype shows that  i  ferret can rene object locations to only 1 % of the readers coverage region in less than 2 min with small error rate  2.22 %  ;  ii  ferret can detect nomadic objects with 100 % accuracy when the moving distances exceed 20 cm ; and  iii  ferret is robust against different movement patterns of users mobility  2010 elsevier b.v all rights reserved  1 introduction rfid is a promising new electronic identication technology that enables objects to be equipped with lost cost identication tags  the technology  which is designed to replace bar codes  12   comprises tags with numeric codes to uniquely identify each object by querying it wirelessly  it is envisioned that all objects that have a bar code today  e.g  books  clothing  food items  will have self-identifying tags in the coming years  this paper proposes a novel mobile multimedia application that lies at the intersection of two trends  the ubiquity of rfid tags and the availability of inexpensive digital cameras and camcorders with wireless networking capabilities  specically we propose equipping digital cameras with mobile rfid readers so that the combined recording device can capture an image stream as well as identities and locations of all rfid-tagged objects contained within each image  users can query the video in real-time to determine the locations of rfid tagged objects in the captured video  thus  a user can point the camera at a bookshelf and query for the location of a mis corresponding author  tel   +1 413 577 0850 ; fax  +1 413 545 1249 e-mail addresses  liu_xiaotao @ emc.com  x liu   corner @ cs.umass.edu  m.d  corner   shenoy @ cs.umass.edu  p shenoy   placed book  and the application responds by displaying an outline of the likely location in the captured video  similarly  such a device can be used by mobile robots to conduct autonomous searches operations  retail stores can use such devices to proactively generate missing object alerts upon detecting the absence of an object from a store shelf and display a video of the action that triggered the alert  a key hurdle in implementing such an application is that rfid tags are self-identifying but not self-locating upon being queried  a tag can report its identify but not its location  if multiple tagged objects are present within an image  it is not possible to distinguish between these objects or pinpoint their individual locations  to accurately pinpoint an object in an image  e.g  to pinpoint a misplaced book on a bookshelf   the application needs to determine both the object identity and its location  although numerous locationing technologies exist such as gps and ultrasound  10,13,14   it is generally infeasible to equip every tagged with a positioning device in addition to a tag due to reasons of cost  form factor and limited battery life  thus  we must somehow exploit passive rfid tags to provide both location and identication information  the design of such a locationing technique for passive rfid tags is the primary contribution of this paper  1570-8705/ $  see front matter 2010 elsevier b.v all rights reserved  doi:10.1016/j.adhoc.2010.08.001 please cite this article in press as  x liu et al  ferret  an rfid-enabled pervasive multimedia application  ad hoc netw   2010   doi:10.1016/j.adhoc.2010.08.001 2 x liu et al  / ad hoc networks xxx  2010  xxxxxx in this paper  we present a system called ferret that uses a video camera and a mobile rfid reader to provide a locationing and identication support for pervasive multimedia  specically  ferret uses the location and directionality of rfid readers to infer the locations of nearby tags  it exploits the mobility of users and observations of the same object from multiple vantage points to further rene the inferred object location  object locations are displayed by drawing an outline of the probable location on the video display  the display is continuously updated as the user moves through the environment using a continuous stream of tag readings to rene the location  we have implemented a prototype of ferret and have used it to conduct a detailed performance evaluation  our results show that  i  ferret can rene object locations to only 1 % of the readers coverage region in less than 2 min with small error rate  2.22 %  ;  ii  ferret can detect nomadic objects with 100 % accuracy when the moving distances exceed 20 cm ; and  iii  ferret works with a wide variety of user mobility patterns  the rest of this paper is structured as follows  section 2 presents the architecture of ferret  while section 3 presents our online rfid locationing algorithm  section 4 presents our implementation and section 5 experimental results  finally  sections 6 and 7 present related work and our conclusions  2 ferret architecture in this section  we rst present the basic idea behind ferret  followed by a discussion of system requirements and assumptions  and the basic algorithm used by ferret  2.1 basic idea the basic operation of ferret is illustrated in fig  1 as indicated earlier  ferret employs a handheld camera with an embedded rfid reader  and records images as well as identities of nearby rfid tags for each recorded image  the user can pose a query for an object of interest  and the system in real-time updates the cameras display with an outline of the probable location of that object  see fig  1   since the knowledge of the object location can be imprecise  ferret displays a bounding box rather than a single point  the centroid  to depict the object location  the gure depicts a user looking for a soup can in an ofce  after scanning the room  the system displays a small region containing the soup can  2.2 system requirements a system such as ferret imposes several design requirements  2.2.1 scalability since rfid tags will become ubiquitous in the coming years  it is likely that even a small room will contain hundreds of tagged objects  for instance  a bookshelf with tagged books or a closet with tagged clothing   it is essential that ferret should scale to environments with hundreds of tagged objectsin particular  it should be able to continuously detect and improve the location of each sensed object by fusing a stream of noisy  and imprecise readings from the rfid reader to formulate a proposition of the objects location  2.2.2 locationing although rfid tags do not have any means to determine their locations  we assume that the camera contains a locationing device such as gps  this is a reasonable assumption since the latest generation of cameras contain onboard gps receivers to stamp each image with the gps coordinates  to record the location where the picture was taken   specically we assume that the ferret recorder contains a locationing device and a digital compass to its record the location and orientation  pan  tilt and roll   respectively  the key insight in ferret is to use the location and orientation of the camera/reader to determine the location of objects in its vicinity  in essence  whenever a tag is read by a reader  it follows that it is contained within the sensing range of the reader ; thus its location can be narrowed to a volume comprising the readers range  multiple observations from different vantage points allow the location estimates to be further rened  by maintaining a history of tags read by the system  ferret can progressively narrow the region containing the object  this is a simple yet elegant technique for inferring the location of passive rfid tags without expensive  battery-powered locationing capabilities  2.2.3 location storage and renement in order to rene past estimates using new observations  ferret must store a history of past observations  the simplest approach is to store past observations on the cameras storage medium  e.g  compact ash cards   such local storage implies that each ferret device must start nding objects with zero initial knowledge  fig  1 use of ferret to discover the location of a soup can in an ofce  please cite this article in press as  x liu et al  ferret  an rfid-enabled pervasive multimedia application  ad hoc netw   2010   doi:10.1016/j.adhoc.2010.08.001 3 x liu et al  / ad hoc networks xxx  2010  xxxxxx ferret also supports collaborative renement of location estimates using data recorded by multiple recording devices  sharing readings of the same object seen by multiple cameras enables faster renement and more precise location estimates ; however  it requires a means to share readings via a shared storage medium  two approaches are possible  since modern tags are rewritable and contain a limited amount of onboard storage  ferret cameras can write back their location estimates to the tag  which can then be shared with other cameras   the limited amount of tag storage implies that a limited history can be maintained  and the approach does not work with read-only tags that are likely to be more common  a second approach is to employ a central database where cameras can upload their location information  this has the advantages of allowing ofine querying and providing initial location estimates to mobile readers ; further  since database storage is plentiful  the system can store long histories as well as past locations of nomadic objects  however  it requires readers to have connectivity to the database and requires privacy controls on the database  2.3 basic algorithm assuming the above design requirements  the basic ferret algorithm involves a recording phase and a query phase  recording involves four steps   i  record image   ii  record camera coordinates and orientation   iii  record all tags within read range of the embedded reader  and  iv  compute  or rene  the location of each observed tag using the recorded cameras location and orientation  clearly  step  iv  lies at the heart of ferret and is discussed in detail in the next section  querying involves three steps   i  retrieve the location estimates for the object specied by the user query   ii  overlay a bounding box on the captured image depicting this location estimate  and  iii  display the resulting image to the user  next we discuss ferrets localization algorithm that can dynamically discover  update  store  and display object locations  3 online locationing for passive rfid consider an rfid reader that queries all tags in its vicinitythe reader emits a query signal which wirelessly powers the tags  and tags respond with their unique identier  given these tag responses  we propose a technique to determine and rene tags locations using the coordinates and orientation of the reader/camera  we begin with the basic idea behind our locationing technique  followed by the details  we also discuss how our system can handle nomadic objectsobjects that move locations  read range of the reader  see fig  2   and this yields an initial estimate of the objects location  suppose that subsequently the user moves to a different location in the vicinity and the reader reads the same tag again  this additional reading can be used to rene the object location estimate ; since the object must reside in the read ranges of the reader at both location  it follows that it lies in the intersection of the volumes representing the read range  see fig  3   the coverage region from each reading is intersected with all readings from the recent past  further reducing the possible region containing the object  see fig  3   using this method  ferret can continually improve its postulation of the object location so long the object remains stationary  it is also possible to make negative assertions about an objects location  thus  if an object is not read at a particular location  then it follows that it is not present in the readers read range and that volume can be eliminated from the set of possible locations for the object  although negative assertions can further narrow an objects location estimate  they are computationally more expensive than an intersection of two positive assertions  since our goal is to implement ferret on a mobile device  we a describe an online algorithm that only considers positive intersections to reduce computational cost  3.2 online locationing algorithm for ease of exposition  we present a discrete version of our algorithm and then describe how to further reduce its computational using a continuous version  assume that the world is represented as a discrete grid where each coordinate represents a possible location of an object  suppose that a reader reads an object from a certain location  then all grid points within its read range have a non-zero probability of containing the object  this coverage map of a reader is shown in fig  2 as shown  not all points within the read range are equally likely to contain the objectobjects closer to the centroid of its read range are detected with higher probabilities  while objects at the boundary are detected with lower probabilities  thus grid points closer to the centroid have a higher likelihood of containing the object that those near the boundary  let reader has a 95 % chance of detecting a tag here 3.1 locationing basics assume that the location and orientation of the camera/ reader is known  when a tag is read by the reader  the reader produces a positive assertion that the object is present within its read range  specically  a reading indicates that the object is contained in the volume dened by the reader has a 0 % chance of detecting a tag here reader has a 5 % chance of detecting a tag here fig  2 coverage region of an rfid reader and tag detection probabilities in 2d  please cite this article in press as  x liu et al  ferret  an rfid-enabled pervasive multimedia application  ad hoc netw   2010   doi:10.1016/j.adhoc.2010.08.001 4 x liu et al  / ad hoc networks xxx  2010  xxxxxx fig  3 rening location estimates  m  x  y  z  denote the probability that the object is located at grid point  x  y  z  within the read range ; this map m can be determined from the antenna data sheet of the reader or from empirical calibration  our algorithm works as follows   i  once ferret receives the rst positive reading of a tag it initializes a three dimensional map  l  with the coverage map m  to track the probability that the object is at each of the coordinates in the map   ii  each successive reading multiplies each coordinate in l by m  x  y  z   observe that the coverage map for each new reading  as shown in fig  3  is represented in the reader coordinate system  which assumes that the origin is at the center of the readers rfid antenna  the camera  although attached to the rfid reader  is offset from the reader  and has a slightly different coordinate system  which we refer to as the camera coordinate system and has its origin at the center of the cameras ccd sensor  to combine multiple readings from the reader  and subsequently display them to the user  each map m must be transformed into a common coordinate system  we refer to this as the world coordinate system  without loss of generality  we assume the reader  camera  and world coordinate systems are left hand coordinate systems  see fig  4   before intersecting two readings  we must transform each to world coordinates  this transformation involves translation and rotation using techniques from linear alge bra and computer graphics  4   for each reading  the reader has a location and orientation with respect to the world coordinates  this is described as a location  x0  y0  z0  and an orientation with a pan of a  the rotation along the y axis  range  180  180    a tilt of b  the rotation along the x axis  range  90  90    a roll of c  the rotation along the z axis  range  180  180    the direction of the rotation is given by the left hand rule where the thumb is in the positive direction of the rotation axis and the ngers show the positive direction of rotation  see fig  4   this transformation is formulated as a rotation matrix  3 3 2 1 0 0 cosc  sinc 0 7 6 7 6 r 4 sinc cosc 0 5  4 0 cosb  sinb 5 0 sinb cosb 0 0 1 2 3 cosa 0 sina 6 7 4 1 0 1 0 5 2  sina 0 cosa where r is a 3  3 orthonormal matrix which has columns that are mutually orthogonal unit vectors  so that r1 = rt  so  if a point is located at  xw  yw  zw  in the world coordinates  the objects location in the reader coordinates  xr  yr  zr  can be computed via  2 3 2 3 2 3 2 3 xw  x 0 xw x0 xr 6 7 6 6 7 6 7 7 4 yr 5 r  4 yw  y0 5 r  4 yw 5 t ; t r  4 y0 5 zr zw  z0 zw z0 2 where the composite rotation matrix r is given by eq   1   therefore  the reverse transformation from reader coordinate system to world coordinate system is given by  2 xw 3 02 xr 3 1 2 xr 3 2 x0 3 b6 7 c 6 7 6 7 6 7 1 1 4 yw 5 r  @ 4 yr 5  t a r  4 yr 5 4 y0 5 zw zr zr z0 fig  4 left handed coordinate system  where  x0  y0  z0  is the readers position in world coordinate system and r1 = rt  when computing the intersection of coverage maps  ferret rst transforms the coverage map  m into the world coordinate systems using eqs   1  and  3   and computes the intersection according to the our algorithm to produce a new map l containing the likelihood of object locations  please cite this article in press as  x liu et al  ferret  an rfid-enabled pervasive multimedia application  ad hoc netw   2010   doi:10.1016/j.adhoc.2010.08.001 x liu et al  / ad hoc networks xxx  2010  xxxxxx 3.2.1 displaying location estimates once ferret produces a three dimensional map that it believes contains a particular object  it must overlay this region onto the video screen of the camera ; doing so involves projecting a 3d map onto a two dimensional display  this is done in two steps  thresholding and projection  the threshold step places a minimum value for the likelihood on the map lby using a small  but non-zero value for the threshold  ferret reduces the volume that encompasses the likely position of the object  however  using a larger threshold may cause ferret to shrink the volume excessively  thus missing the object  currently this is a tunable parameter in ferretin the evaluation section we demonstrate how to chose s reasonable value  finally  ferret projects the intersection map onto the image plane of the video display  ferret must transform the intersection map from the world coordinate system into camera coordinate system  ferret performs this transformation using eqs   1  and  2   along with the cameras current position and orientation  as stated previously  the camera coordinate system follows the left-hand convention  and the z-axis of the camera coordinate system is co-linear with the cameras optical axis  assuming the camera has focal length f  and a point is positioned at  xc  yc  zc  in camera coordinate system  the projection is given by    u v   xc f  zc yc 3 where u and v is the projection at the ccd sensor  for each reading the rfid reader produces  the location algorithm must perform o  n3  operations  for a three dimensional space that is n  n  n  in addition to translating and rotating the coverage map  and projecting the location map onto the display  3.2.2 reducing computational overhead since the above discrete version of the algorithm may be too computationally intensive for small mobile devices  we present a continuous version that is simpler but at some loss of accuracy  the primary goal is to reduce the representation of the probability of where the object is  instead of a full representation that describes the probability at each location  we reduce it to describing just the convex region where the object is with very high probability  describing such a region is very compact  as we only need to track the points that describe the perimeter of the convex region  intersecting two maps is very fast  as it is a series of line intersections  fig  5 shows this in detail for two dimensions  extending it to three dimensions is straightforward  the rst half of the diagram shows sample points that describe the outside of the coverage map  ferret rotates and translates the coverage map m as described in the previous section  and intersects it with the current map l for each constant y value  the system nds the intersection of the two line segments and uses that as the description of the new map l for instance in fig  5  we choose a constant y value y1  after rotating and translating the map m to match to the readers 5 fig  5 online location estimation  current position  the system intersects the two line segments   x1  y1    x3  y1  from the current map l  with  x2  y1    x4  y1  from the new map m the resulting intersection is the segment  x2  y1    x3  y1   which describes the perimeter of the new location map l ferret repeats this process for all y values  extending this to three dimensions is straightforward  intersect two line segments for each pair of constant y and z value  this means the complexity of the intersection is o  n2  rather than o  n3  as in the offline algorithm  also  instead of using a map of probabilities for the coverage map  we reduce it to the convex shape that describes the coverage region of the rfid reader than can read tags with some probability greater than 0 this virtually eliminates the possibility of false positives  additionally  describing the perimeter only requires two x points for each pair of y and z values  thus the representation of the region is greatly reduced in size from o  n3  to o  n2   using our prototype as an example  this reduces the storage requirement from 43.5 m bytes to 178 k byteseach of these are highly compressible  this greatly aids ferrets ability to store the regions directly on the storage-poor tags  the line segment representation does mean that the system can not incorporate negative regions  as intersecting with a negative region can create a concave  rather than convex  region  a concave region would return the complexity of the representation and the intersection to o  n3   false negatives do not affect the system  as negative readings are not used at all  3.3 handling nomadic objects we designed ferret to deal with objects that move infrequentlycommonly referred to as nomadic as opposed to mobile objects that move frequently  when objects do move  ferret should adjust to deal with this  in the continuous version  this is straightforward  when the location algorithm performs an intersection of two maps  it may produce a region of zero volume  this indicates that the maps were disjoint  and th object could not possibly be within the previously postulated region  the system then reinitializes the location map  l  to the most current reading  which is m rotated and translated to the readers current position  in contrast  discrete algorithm uses thresholding to eliminate low probability regions containing the object  it applied applying a likelihood threshold to the likelihood location map and removes any location with a probability less than the threshold  if the resulting location map is empty  we will consider the object has moved and please cite this article in press as  x liu et al  ferret  an rfid-enabled pervasive multimedia application  ad hoc netw   2010   doi:10.1016/j.adhoc.2010.08.001 6 x liu et al  / ad hoc networks xxx  2010  xxxxxx reinitialize the location map  l  to the most current reading  choosing an appropriate threshold is a critical factor in this approach  using a larger threshold will increase the likelihood that the resulting location map is empty when the object actually does not move  in section 5  we will show the experiments on how to choose an appropriate threshold  a sparton sp3003d digital compass to obtain the 3d orientations  pan  tilt  and roll  of the cameras lens and the readers antenna  we mounted the compass  the cameras lens  and the readers antenna in a way that they all have same 3d orientations  our prototype consists of the following software modules  4.1 video module 4 implementation considerations we have implemented a prototype ferret system as shown in fig  6 although the prototype is quite large  this is due to the combination of many separate pieces of hardwarethere is nothing that would preclude a much smaller commercial version  our prototype is based on the following hardware  a thingmagic mercury4 rfid reader which has a sensormagic monostatic circular antenna connected to it  the output power of the reader is set to 30 dbm  1 w   this reader operates at the frequency range 909928 mhz  and supports rfid tags of epc class 0  epc class 1  and iso 18000-6b  the reader is paired with a thingmagic monostatic circular antenna that has a balloon shaped radiation pattern  an alternative is to a use a linear antenna that has a more focused radiation pattern and longer range ; however  the narrower beam will produce fewer positive readings for each tag  the tradeoff in antenna choice and the possibility of future antennas with variable radiation patterns are interesting questions for future research  we used an orientationinsensitive  epc class 1  alien technology m rfid tag operating at 915 mhz  a sony motion eye web-camera connected to a sony vaio laptop  this cmos-based camera is set to a xed focal length of 2.75 mm  and uses a sensor size of 2.4 mm by 1.8 mm  the camera provides uncompressed 320  240 video at 12 frames-per-second  cricket  10  ultrasound 3d locationing system to estimate the location of the camera and rfid reader  we deployed cricket beacons  served as references  on the ceiling  and attached a cricket sensor to our prototype system  the cricket sensor is offset from the camera and rfid reader and we correct for this translation in software  this module records the video stream from the web camera  and transcodes the video stream into mpeg-2 video clip  in addition to this functionality  the video module will project and highlight the estimated region containing the target object when displaying video stream  we modify the ffmpeg video suite  2  to implement this module  we implement the projection function according to eq   3  to compute the projection of the location estimation  and then intercept the display function of ffmpeg video suite to display the boundary of the projection area  4.2 rfid module this module controls the rfid reader  and records the readings from the rfid reader  the rfid reader provides functions of remote control and query via tcp connection using sql-like query and control messages  the rfid module submits a query request with interval value of 250 ms to the reader  and then the rfid reader periodically responds with congurable plaint text message including the tag id  the id of the antenna reading the tag  and so on  4.3 cricket and compass module this module communicates with the cricket sensor and digital compass to obtain the location and orientation of camera and rfid reader  the cricket module communicates with the cricket sensor via a serial port  and the output of the cricket sensor is its distances to beacons  our module records these distances  and uses them to triangulate the location of the cricket sensor  after adding some constant offset  measured manually   we then have the location of the camera and rfid reader  the compass module also communicates with the compass via a serial port  4.4 locationing module this module implements our locationing algorithm  this implementation includes   i  coordinate transformation functions between world coordinate system and the coordinate systems of camera and rfid reader according to eqs   1   3    ii  intersection functions to compute intersection for positive readings and negative readings  and  iii  a central database to store the location information  5 experimental evaluation fig  6 ferret prototype system  in this section  we evaluate ferret by focusing on the performance of locationing and projection  in particular  we concentrate on how quickly ferret can rene the please cite this article in press as  x liu et al  ferret  an rfid-enabled pervasive multimedia application  ad hoc netw   2010   doi:10.1016/j.adhoc.2010.08.001 7 x liu et al  / ad hoc networks xxx  2010  xxxxxx the results show that the volume size of the location estimation drops from 2 m3 to 0.02 m3 which is only 1 % of the readers coverage region in less than 2 min  the volume monotonically decreases  as intersecting positive readings only shrinks the area  while negative readings are ignored  also  this is a pessimistic view of the renement timewith prior knowledge  the process occurs much more rapidly  for instance  if the user switches to searching for another object in the same room  ferret can take advantage of all of the previous readings  if a previous user has stored location information on the tag  this reader can also take advantage of that from the time of the rst reading  additionally  if some location information is stored in a centralized database  ferret can immediately project an area onto the video without any readings  in addition to the volume size of the location estimation  we also plot the projection area versus time in fig  7c in which the projection areas are shown as a percentage of the image plane area  our results show that the nal projection area is only 3 % of the whole image  or approximately a 54 pixel diameter circle on a 320  240 frame  however  the projection area does not monotonically decrease as the volume does  this is because the camera is constantly moving  thus the point-view constantly changes  and the same volume can project different areas from different orientations  location of an object for a user  we also evaluate and compare the accuracy of the discrete and continuous versions  evaluate the ability to handle nomadic objects  and show the computation and storage costs of our system  we measure ferrets performance using two metrics  the size of the postulated location and the error rate  ferret automatically provides the size  either the volume of the three-dimensional region  or the area of the two-dimensional projection on the video screen  the three-dimensional region is not a sphere  but to interpret the results  a sphere with a volume of 0.01 m3 has a diameter of 26.7 cm and a volume of 0.1 m3 has a diameter of 57.6 cm  ferrets error rate is the number of objects that do not appear in the area projected on to the display  the error rate is determined through manual inspection of a video recording  all of our experiments are conducted in a 4 m  10 m  3 m room equipped with a cricket ultrasound system  we used ve beacons mounted on the ceiling which we manually calibrated  the origin of our world-coordinate system is a corner of the room  the camera records all video at 12 frames/second  and the rfid reader produces 4 readings per second  for the continuous system  we use a coverage map that includes all places where the tag has a non-zero probability of reading a tag  that region is an irregular shape that is 2.56 m  1.74 m  2.56 m at the maximum and has a volume of approximately 2 m3  5.2 accuracy of our techniques next  we evaluate and compare the precision of the discrete and continuous methods in locating objects  while the continuous algorithm is useful for current mobile devices  the discrete algorithm uses a more precise representation of the objects location likelihood  to evaluate ferrets precision in locating objects  we placed 30 tags in a 2.5 m  2.5 m  2 m region  and we move the prototype around the room for 20 min  we repeat the experiment 3 times and record the volume of the postulated region  and manually verify how many objects are truly contained in the area projected onto the video plane  with 30 tags and three experiments  ferret can make between 0 and 90 location errors  before evaluating the discrete algorithm  we must set a threshold for the minimum likelihood for the object as described in section 3 recall that a larger threshold can reduce the volume encompassing the likely position of 5.1 renement performance the primary goal of ferret is to quickly locate  rene  and display an outline on the video display that contains a particular object  as this happens online  ferret continuously collects readings and improves its postulation of the objects locationthis is reected as the volume of the region shrinking over time  to demonstrate this  we placed one tag in the room  and then walked around randomly the room with the prototype  we plot the volume of the location estimation versus time in fig  7 the absolute volume tracks the total volume of the region  while the relative volume tracks the size of the region relative to the starting coverage region of the reader  in this case ferret does not make any errors in locating the object  the time starts from the rst positive reading of the tag and ferret begins with no previous knowledge about object locations  0.1 100 % 100 % 80 % 80 % projection area 1 volume volume  m3  10 60 % 40 % 20 % 0.01 0 0 % 20 40 60 80 time  secs  100 120 60 % 40 % 20 % 0 % 0 20 40 60 80 100 120 time  secs  0 10 20 30 40 50 60 70 80 90 100 time  secs  fig  7 continuous renement of location  please cite this article in press as  x liu et al  ferret  an rfid-enabled pervasive multimedia application  ad hoc netw   2010   doi:10.1016/j.adhoc.2010.08.001 8 x liu et al  / ad hoc networks xxx  2010  xxxxxx the object  however  a larger threshold will also increase the error rate of ferret  the volume does not contain the object   in order to test the sensitivity of discrete ferret to the change of likelihood threshold  we varied the likelihood threshold from 0.00001 to 0.4  and ran the discrete ferret algorithm on the data we collected in the experiment  we show the results in fig  8 the results show that   i  the number of errors almost doubles from 5 to 9 as threshold increase from 0.00001 to 0.4   ii  the mean volume of the location estimation is essentially constant  and  iii  for a threshold 60.01  the number of errors does not change  when using too high of a threshold ferret incorrectly shrinks the volume  leaving out possible locations for the object  considering the balance of error rate and mean volume  we choose a likelihood threshold of 0.01 using this threshold  we run the discrete algorithm and compare it to the performance of the continuous algorithm  in fig  9  we plot the cdf of ferrets location accuracy for both algorithms  the results show that  i  the continuous algorithm can localize an object in 0.15 m3 and 0.05 m3 regions with 80 % and 50 % probability  respectively  the 0.15 m3 and 0.05 m3 regions are only 7.5 % and 2.5 % of the readers coverage region which is 2 m3 ;  ii  the discrete algorithm outperforms the continuous algorithm by localizing an object in a 0.05 m3 region with more then 90 % probability and in a 0.1 m3 region with 100 % probability  5.3 tuning ferret due to the inaccuracies in estimating the location and orientation of rfid reader  ferret might incorrectly estimate tags location  tag is not in the region estimated by ferret  and further ferret might incorrectly reset the algorithm when the tag has not moved  in our experiments  the continuous algorithm has two errors and none reset  while the discrete algorithm has ve errors and one reset  the larger errors of discrete algorithm is because the smaller volume of location map increases the chance of not containing object  we can compensate these inaccuracies by increasing the coverage region of rfid reader  and consequently  we are able to eliminate the errors  however  the increasing coverage region has larger volume  and therefore we pay the price of decreasing locationing accuracy  our results in table 1 show that as the volume size of coverage region increases from 2 m3 to 5 m3   i  for the continuous ferret  the number of errors drops from 2 to 0  and the mean volume of the location estimation increases from 0.077 m3 to 0.30 m3 ; and  ii  for the discrete ferret  the number of errors drops from 5 to 0  the number of resets drops from 1 to 0  and the mean volume of the location estimation increases from 0.011 m3 to 0.14 m3  5.4 mobility effects fig  8 performance of ferret under different likelihood thresholds  1 probability 0.8 0.6 0.4 0.2 continuous discrete 0 0 0.05 0.1 0.15 0.2 0.25 3 volume  m  fig  9 cdf of locationing accuracy  0.3 0.35 ferret exploits the users mobility to produce a series of readings from multiple positions  and further rene its location estimation via intersecting the coverage regions at these positions  the previous experiment showed the results of a human  yet uncontrolled  mobility pattern  in reality users move erratically ; however  their motions are composed of smaller  discrete motion patterns  to study how individual patterns affect the performance of ferret we placed a single tag in the room and evaluated ferret with a small set of semi-repeatable motion patterns shown in fig  10   a  straight line  the prototype system moves in a straight line  tangential to the object  without changing the orientation of the camera lens and rfid reader ;  b  head-on  the prototype moves straight at the object and stops when the reader reaches the object ;  c  z-line  the prototype system moves in a z-shaped line without changing its orientation ;  d  rotation  the prototype system moves in an arc  while keeping the lens orientation radial to the path ;  e  circle  the prototype system moves in a circle  while keeping the reader facing the object  intuitively  the circular pattern may be the least likely of the mobility patterns  whereas the head-on is probably the most likelyonce the user gets one positive reading  she will tend to head towards the object in a head-on pattern  we evaluated ferrets performance using the volume of the resulting region  for each movement pattern we ran three experiments  averaged the results  and compared the smallest volume size of both continuous and discrete ferret  our results are shown in fig  12 the results show that ferret performs similarly for each of the movement patterns ; however the circular pattern please cite this article in press as  x liu et al  ferret  an rfid-enabled pervasive multimedia application  ad hoc netw   2010   doi:10.1016/j.adhoc.2010.08.001 9 x liu et al  / ad hoc networks xxx  2010  xxxxxx table 1 performance of ferret under different volumes of coverage regions  volume of coverage region  m3  continuous 2 3 4 5  a  straight line discrete num  errors num  resets mean volume  m3  num  errors num  resets mean volume  m3  2/90 0/90 0/90 0/90 0/90 0/90 0/90 0/90 0.077 0.18 0.23 0.30 5/90 2/90 1/90 0/90 1/90 1/90 1/90 0/90 0.011 0.043 0.084 0.14  b  headon  c  zline rfid tag ferret moving direction  d  rotation  e  circle ferret system fig  10 path of the ferret device  1 continuous discrete false ratio 0.8 0.6 0.4 0.2 0 0 50 100 150 200 moving distance  cm  and thus produces smaller volumes  this is true even of the head-on pattern as the rst reading and the last reading have very little volume in common  another result is that the discrete algorithm  due to its better locationing accuracy  outperforms the continuous algorithm  except in the case of the circular and head-on patterns  where the performance is similar  5.5 object motion detection ferret is designed to deal with objects that move infrequently  but when the object does move  ferret should detect this and start its renement process over  as discussed in section 3  whenever ferret encounters an empty location estimation  ferret assumes that the corresponding object has moved  to evaluate ferrets performance in detecting these nomadic objects we place a tag in the room and use ferret to estimate its location  we then move the tag a distance between 5 cm and 200 cm and again use ferret to estimate its location  we repeat the experiment ten times for each distance  and record the number of times that ferret did not detect a moved object  the results are shown in fig  11 the gure shows that both the continuous and discrete versions can detect 100 % object movements when the moving distance exceeds 25 cm and 20 cm  respectively  this is consistent with our previous results that show that ferret can localize an object to within an region with a volume of hundredths of a m3this gives a radius on the order of 20 cm  exactly how well ferret can detect movement  as the object has not actually left the postulated area  ferret is still correct about the objects location  fig  11 detected object movements  5.6 memory overheads performs the worst  the circular pattern always keeps the object in view and generally in the center of the readers coverage region  this produces a set of readings that generally cover very similar regions  in each of the other cases  the mobility of the reader covers more disjoint spaces  the prototype has a non-zero probability of detecting tags in balloon-shaped region  with maximum dimensions of 2.56 m  2.56 m  1.74 mthis shape has a volume of approximately 2 m3  for the discrete algorithm we sample this coverage region every centimeter  as discussed in fig  12 performance of ferret under various mobility patterns  please cite this article in press as  x liu et al  ferret  an rfid-enabled pervasive multimedia application  ad hoc netw   2010   doi:10.1016/j.adhoc.2010.08.001 10 x liu et al  / ad hoc networks xxx  2010  xxxxxx section 3  the discrete algorithm requires every point in this space  while the continuous algorithm only requires a set of points that describe the exterior of the region  this reduced representation results in much smaller spatial requirements as compared to discrete spatial requirements   i  the discrete algorithm uses a oat of four bytes to describe the probability of a sample point  and the total space is 256  256  174  4 = 43.5 m bytes using a three dimensional array to store the probabilities of all sample points  and  ii  the continuous algorithm uses a two dimensional array  the dimensions correspond to y and z  to represent the coverage region  and consequently  it only needs two bytes to track the x value of every outside sample point  thus the total space required is 256  174  2 = 178 k bytes  both the discrete and continuous representations are highly compressible  the discrete can be reduced to 250 k bytes and the continuous representation to 5 k bytes using the commonly available compression tool gzip  for the foreseeable future  rfid tags will not contain enough storage for the discrete representation  while the continuous version is not unreasonable  if tags have more or less storage the number of sample points can be adjusted  although this will affect the precision of the system  5.7 computational requirements the computational requirements of discrete and continuous have similar relationship  we measured the computational and spatial requirements of ferrets locationing algorithm on an ibm x40 laptop equipped with a 1.5 ghz pentium-m processor   i  the discrete algorithm costs 749.32 ms per reading for each object  and  ii  the continuous algorithm only costs 6 ms per positive reading for each object  which is only 1/125 of the discrete computational requirements  our results show that the continuous algorithm incurs small overhead and can run online to track multiple tags simultaneously on relatively small mobile devices  6 related work researchers have developed rfid-based indoor locationing systems  7,9  using active  battery powered  rfid tags  in spoton  7   hightower et al  use the radio signal attenuation to estimate tags distance to the base stations  and triangulate the position of the tagged objects with the distance measurements to several base stations  landmarc  9  deploys multiple xed rfid readers and reference tags as infrastructure  and measures the tracking tags nearness to reference tags by the similarity of their signal received in multiple readers  landmarc uses the weighted sum  the weight is proportional to the nearness  of the positions of reference tags to determine the 2d position of the tag being tracked  all the above work  7,9  use battery-powered sensors to identify and locate objects  these sensors are expensive  at least tens of dollars per sensor  and have limited lifetime  from several days to several years   these limitations have prevented them from scaling to applications dealing with hundreds and thousands of objects  in contrast  passive rfid tags are inexpensive  less than a dollar per tag and falling  and do not require battery power source  these features make passive rfid technology ideal for such applications  fishkin et al  proposed a technique to detect human interactions with passive rfid tagged objects using static rfid readers in  3   the proposed technique used the change of response rate of rfid tags to unobtrusively detect human activities on rfid tagged objects such as  rotating objects  moving objects  waving a hand in front of objects  and walking in front of objects  however  this does not consider the problem of estimating the locations of rfid tagged objects  their experimental results show that their system could nearly always detect rotations  while the system performed poorly in detecting translation-only movement  in  5   hhnel et al  proposed a mapping and localization approach using the combination of a laser-range scanner and rfid technology  their approach employed laser-based fastslam  6  and monte carlo localization  1  to generate maps of static rfid tags using mobile robots equipped with rfid readers and laser-range scanner  through practical experiments  they demonstrated that their system can build accurate 2d maps of rfid tags  and they further illustrated that resulting maps can be used to accurately localize the robot and moving tags  another system is the 3d rfid tag  11   the 3d rfid system is equipped with a robot-controlled uni-directional antenna  and the 3d tag consists of several combined tags  two kinds of 3d tags are developed  union tag and cubic tag  the proposed system can not only detect the existence of the 3d tag but also estimate the orientation and position of the object  however  they require usages of specic orientationsensitive 3d tags custom-built from multiple tags  furthermore  the system uses highly expensive robot system to control the antennas movement and then estimate the orientation and position of the object  in contrast  ferret only needs one standard orientationinsensitive tag per object and the users inherent mobility to estimate the objects location  the pervasive multimedia application envisioned in this work has similarities with our recently-proposed seva system  8   seva assumes wifi-based tags that are both self-identifying and self-locatingeach tag has a unique identity and uses a cricket  10  ultrasound receiver to continuously determine its location  a digital camera records video as well as object locations and identities  which can be subsequently queried by the user  there are several key differences between seva and ferret  seva is based on active 802.11-based tags  while ferret relies on passive rfid tags  object tags in seva are assumed to have locationing capabilities and can determine their own positions  ferret does not make this assumption  seva is inherently designed for ofine use  where users query their video collections post-facto ; consequently  seva depends on postprocessing capabilities  in contrast  ferret requires the capability to capture and query video in real-time  finally  seva scales to around a dozen moving objects  whereas ferret requires the ability to scale to hundreds or thousands of nomadic rfid-tagged objects  please cite this article in press as  x liu et al  ferret  an rfid-enabled pervasive multimedia application  ad hoc netw   2010   doi:10.1016/j.adhoc.2010.08.001 x liu et al  / ad hoc networks xxx  2010  xxxxxx 7 conclusions this paper presented the design and implementation of ferret  a scalable system for locating nomadic objects augmented with rfid tags and displaying them to a user in real-time  we presented a novel algorithm to infer location of tagged objects using the location of a camera and reader that observes them ; location estimates can be rened over time using multiple observations of an object  we also presented methods for detecting when nomadic objects move and to display and update object locations on a video camera screen  our experiments conducted using a fully working prototype showed that  i  ferret can rene object locations to only 1 % of the readers coverage region in less than 2 min with small error rate  2.22 %  ;  ii  ferret can detect nomadic objects with 100 % accuracy when the moving distances exceed 20 cm ; and  iii  ferret is robust against different movement patterns of users mobility  we expect that future systems will build on the techniques presented in this paper  and make further improvements to the locationing algorithms  while a great number of hurdles exist in privacy issues  we contend that systems that leverage this ubiquity will provide untold utility to users  references  1  f dellaert  d fox  w burgard  s thrun  monte carlo localization for mobile robots  in  proceedings of the 1999 ieee international conference on robotics and automation  icra99   detroit  mi  may 1999   2  ffmpeg 0.4.8  < http  //ffmpeg.sourceforge.net/index.php >   3  k fishkin  b jiang  m philipose  s roy  i sense a disturbance in the force  long-range detection of interactions with rd-tagged objects  in  proceedings of ubicomp04  september 2004  pp  268282   4  j.d  foley  a.v  dam  s.k  feiner  j.f  hughes  computer graphics  principles and practice in c  second ed  addison-wesley professional  1995   5  d hhnel  w burgard  d fox  k fishkin  m philipose  mapping and localization with rd technology  in  proceedings of icra05  april 2004   6  d hhnel  w burgard  d fox  s thrun  an efcient fastslam algorithm for generating maps of large-scale cyclic environments from raw laser range measurements  in  proceedings of iros03  october 2003  pp  206211   7  j hightower  r want  g borriello  spoton  an indoor 3d location sensing technology based on rf signal strength  technical report 0002-02  university of washington  2000   8  x liu  m corner  p shenoy  seva  sensor-enhanced video annotation  in  proceedings of the 13th acm annual conference on multimedia  mm05   singapore  november 2005  pp  618627   9  l.m  ni  y liu  y.c  lau  a.p  patil  landmarc  indoor location sensing using active rd  in  proceedings of percom03  march 2003  pp  407 417   10  n.b  priyantha  a chakraborty  h balakrishnan  the cricket locationsupport system  in  proceedings of mobicom00  boston  ma  august 2000  11  11  s roh  j.h  park  y.h  lee  h.r  choi  object recognition of robot using 3d rd system  in  proceedings of iccas05  june 2005   12  r want  an introduction to rd technology  ieee pervasive computing 5  1   2006  2533   13  r want  a hopper  v falcao  j gibbons  the active badge location system  acm transactions on information systems  tois  10  1   1992  91102   14  a ward  a jones  a hopper  a new location technique for the active ofce  ieee personal communications magazine 4  5   1997  4247 xiaotao liu received his b eng in computer science from the south china university of technology  guangzhou  china in 1998  and his m.s  and ph.d in computer science from the university of massachusetts amherst both in 2006 he is currently a senior research scientist in the cto ofce of emc corporation  he worked as a technical consultant in computer associates co  ltd from 1998 to 2001 his research interests include operating systems  computer networks and distributed systems  mark d corner is an associate professor in the department of computer science at the university of massachusetts amherst  he graduated with his ph.d in electrical engineering from the university of michigan  his primary interests lie in the areas of mobile and pervasive computing and networking  le systems  and security  he was the recipient of an nsf career award in 2005  best paper awards at fast 2007 and acm multimedia 2005  as well as the best student paper award at mobicom 2002 professor corner serves on the editorial board of ieee pervasive  prashant shenoy is a professor of computer science at the university of massachusetts amherst  he received his ph.d and m.s in computer sciences from the university of texas at austin and his b.tech in computer science and engineering from iit bombay  his research interests lie in operating and distributed systems  sensor networks  internet systems  and multimedia  he heads the laboratory for advanced systems software at umass where he presently leads projects in virtualization  cloud computing  and green computing  he has published more than 125 papers on these topics and has won several best paper awards at conferences such as usenix  acm multimedia  and world wide web  he has been the recipient of the national science foundation career award  the ibm faculty development award  the lilly foundation teaching fellowship  the ut computer science best dissertation award  and an iit silver medal  he is a senior member of the ieee and a distinguished member of the acm  please cite this article in press as  x liu et al  ferret  an rfid-enabled pervasive multimedia application  ad hoc netw   2010   doi:10.1016/j.adhoc.2010.08.001 