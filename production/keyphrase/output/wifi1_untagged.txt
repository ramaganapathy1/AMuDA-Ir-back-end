the journal of systems and software 84  2011  442451 contents lists available at sciencedirect the journal of systems and software journal homepage  www.elsevier.com/locate/jss a comparison of deterministic and probabilistic methods for indoor localization brett dawes  kwan-wu chin university of wollongong  northelds ave  wollongong  australia a r t i c l e i n f o article history  received 28 april 2010 received in revised form 6 october 2010 accepted 3 november 2010 available online 21 november 2010 keywords  localization ieee 802.11 wireless local area networks rssi ngerprinting a b s t r a c t received signal strength indication ngerprinting  rssif  is an indoor localization technique that exploits the prevalence of wireless local area networks  wlans   past research into rssif systems has seen the development of a number of algorithmic methods that provide effective indoor positioning  a key limitation  however  is that the performance of these methods is heavily dependent on practical implementation parameters and the nature of the test-bed environment  as a result  past research has tend to only compare algorithms of the same paradigm using a specic test-bed  and thus making it difcult to judge and compare their performance objectively  there is  therefore  a critical need for a study that addresses this gap in the literature  to this end  this paper compares a range of rssif methods  drawn from both probabilistic and deterministic paradigms  on a common test-bed  we evaluate their localization efciency and accuracy  and also propose a number of improvements and modications  in particular  we report on the impact of dense and transient access points  aps  two problems that stem from the popularity of wlans  our results show methods that average the distance to the k nearest neighbors in signal space perform well with reduced dimensions  moreover  we show the benets of using the standard deviation of rssi values to exclude transient aps  other than that  we outline a shortcoming of the bayesian algorithm in uncontrolled environments with highly variable aps and rssi values  and propose an extension that uses a mode lter to restore its accuracy with increasing samples  2010 elsevier inc all rights reserved  1 introduction in the last decade  there has been a substantial increase in the number of mobile  networked devices  this has created a demand for a new generation of smart  context-aware applications that rely on localization to provide users with value added services  for example  they may rely on outdoor systems such as global positioning system  gps   getting  1993  and e911  zagami et al  1998  to provide targeted advertisements  or to pinpoint a persons location during an emergency  for indoors  these applications may use active badge  wang et al  1992   cricket  priyantha et al  2000   active bat  harter et al  1999   smart floor  orr and abowd  2000   awaremedia and awarephone  bardraml et al  2006   the main limitation of these systems is that they require specialized hardware and in many cases the installation of a new and independent infrastructure to support localization sensors  for example  cricket requires the installation of beacons whereas awaremedia and awarephone require existing wired networks to be augmented with bluetooth  haartsen et al  1998   active bat and active badge require the installation of a new wired network  in particular  corresponding author  e-mail addresses  bmd034 @ uow.edu.au  b dawes   kwanwu @ uow.edu.au  k.-w chin   0164-1212/ $ see front matter 2010 elsevier inc all rights reserved  doi:10.1016/j.jss.2010.11.888 active bat requires sensors to be placed in a grid pattern on the ceiling  to address the aforementioned limitation  the authors of bahl and padmanabhan  2000  propose a system  called radar  that uses the access points  aps  in wireless local area networks  wlans  for localization  specically  referring to fig  1  there are two phases  in the ofine phase  the system designer builds a map of rssi ngerprints for a given building or oor  for example  a ngerprint can be collected and associated with each cell of a oor that has been divided into a grid of 1 m 1 m cells  this information is then used by users who want to obtain their location in the online phase  their portable device will rst record a number of rssi readings  so called ngerprints  from multiple aps  and with the use of the map  attempts to nd a location or cell that has a similar ngerprint  the matching location or cell is then returned to the users  note that rssi is preferred over signal to noise ratio  snr  because it is a stronger function of location than snr  this is because snr suffers from random uctuation due to noise and interference from other devices operating in the same frequency band  bahl and padmanabhan  2000   in addition  rssi is available readily from all wireless network interface cards  interestingly  besides wlans  one can also use signals from base stations  varshavsky et al  2007   this is particularly advantages in indoor environments with little or no aps  b dawes  k.-w chin / the journal of systems and software 84  2011  442451 443 fig  1 overview of rssi ngerprinting  advantageously  radar does not require the installation of new hardware and rely solely on software  on the other hand  its key disadvantage stems from the use of rssi values  which are inherently noisy and varies over time due to non-negligible multipath fading  especially in indoors environments  as a result  the precision and accuracy of the system depends on how far apart ngerprints are in signal space  rather than physical space  just because two ngerprints are far apart in physical space  does not necessarily mean they are very far apart in signal space  in fact  they may be very close  apart from that  system designers need to spend a signicant amount of time initially to build the map or ngerprint database of a given environment  to this end  researchers have considered the use of strategically positioned anchors  theoretical modeling of signal space  and calibration to quickly build the database  barsocchi et al  2009 ; lim et al  2006   nonetheless  the construction of the rssif database is a once off cost but accuracy of different classes of localization algorithms remains a key issue  to this end  as shown in table 1  researchers have proposed a number of solutions  which can be divided into deterministic and probabilistic methods  deterministic techniques  such as k-nearest neighbor  see section 2.1   provide acceptable performance given their simplicity  in general  probabilistic methods offer superior localization performance  this  however  is achieved at the expense of higher computational requirements as they rely on a higher number of rssi samples taken per position  which effects their training time and cost  in addition  the total number of positions in the search space also has a signicant impact on their computation time  table 1 also shows the impact of aps on accuracy and precision  rssi system performance ranges from an accuracy of within 2.2 m 38 % of the time if there are a minimum of three aps  bahl and padmanabhan  2000  to within 2.5 m 90 % of the time using 10 aps  roos et al  2002   from table 1  it is clear that previous research has demonstrated the effectiveness of rssif techniques for indoor localization using deterministic and probabilistic methods  however  there is very little quantitative comparison between these two paradigms under the same experimental condition  which makes it difcult for context-aware applications developers to determine the best approach to employ  in addition  prior works have not outlined an effective strategy for the inclusion of aps in ngerprint databases  this is of importance because we found aps tend to drift in and out of range frequently  as a result  a number of aps may be missing during data collection and localization  moreover  we found each ngerprint contain an average of 17.5 aps  hence  in the interest of table 1 comparison of existing rssif systems  kaemarungsi  2005   system algorithm number of aps precision and % of the time attained prasithsangaree et al   2002  battiti et al   2005  heaberlen et al   2004  roos et al   2002  radar enhancements  bahl et al  2000  radar  bahl and padmanabhan  2000  youssef et al   2003  xiang et al   2004  ladd et al   2002  saha et al   2003  weighted k-nearest neighbor neural network and weighted k-nearest neighbor bayesian bayesian nearest neighbor with environment proling nearest neighbor bayesian bayesian with rss distribution model bayesian nearest neighbor and neural network 27 6 1533 10 5 3 4 5 5 3 7.2 m at 75 %  12.2 m at 95 % 4.9 m to 5.2 m at 90 % 3 m at 97 % 2.5 m at 90 % 3.16 m at 90 % 2.1 m at 38 % 2.1 m at 90 % 1.8 m at 90 % 1.5 m at 77 % 2 m at 90 % 444 b dawes  k.-w chin / the journal of systems and software 84  2011  442451 computation overheads and reliability  we must ensure only a subset of aps are used for localization  this is in contrast to prior works that only have a small number of anchors in each ngerprint ; e.g   barsocchi et al  2009   lastly  we showed that the bayesian method does not work well in environments with high variability  in particular  we found that its accuracy does not improve with additional samples  henceforth  this paper makes the following contributions  we objectively compare both deterministic and probabilistic methods on the same test-bed  we study the impact and provide solutions to the following key issues   i  high number of aps   ii  transient aps  and  iii  highly variable rssi values  we propose four new variants that address a key shortcoming with methods that compute a position estimate using k nearest neighbors  we evaluate the benets of combining k-nearest neighbor methods with those that use the probability distribution of rssi values  we show the effectiveness of using the standard deviation of rssi values in order to exclude transient aps  we modied the bayesian algorithm to use a mode lter in order to address its shortcomings in environments with high variability  in the next section  we will rst describe existing deterministic and probabilistic methods  after that  in section 3  we present our testbed  and the methodology used to collect and sanitize rssi data  this is followed by experimental results  and discussion in section 4 finally  section 5 presents our conclusions  2 background in each section  we rst provide an overview of a given approach before surveying prior works  2.1 deterministic deterministic ngerprinting was rst used in bahl and padmanabhan  2000   bahl et al   2000  and hossain et al   2007   to create a location ngerprint  radar  bahl and padmanabhan  2000  collects signal strength data  position  and orientation information for 70 distinct physical locations from three aps  the authors of radar also considered hosts orientation  because during data collection  the users body may form an obstruction between the host and aps  the ngerprints are created by taking the average rssi value for each combination of orientation and position  which are then stored as a tuple in the form x  y  d  si   where  x  y  is the physical location  d is one of four distinct orientations of the host  and si is the average rss from ap i  where i 1  2  3 apart from that  the authors also proposed a modication whereby they calculate the mean rss for each of the four orientations and then taking the maximum for each ap  given a ngerprint s1  s2  s3   and an observed signal strength tuple s1o  s2o  s3o   a mobile device estimates its location by calculating the euclidean distance between its observed signal strength tuple and those in the ngerprint database  this means a mobile device will pick the location corresponding to the ngerprint with the smallest euclidean distance in signal space  recall that the euclidean distance is dened as   d=  s1 s1o  2 +  s2 s2o  2 +  s3 s3o  2  fig  2 localization using the kola algorithm  where k = 3 ; n1  n2 and n3 are the three nearest neighbors ; t is the mobile hosts true location ; and e is the estimate from kola  which is closer to the true location than any of the single nearest neighbors  table 2 nearest neighbor search results for fig  4  listed in ascending order from the closest match  the results also include multiple instances of location four and ve  which are at different orientations  location 1 3 5 5 5 4 4 4 2 x-coord  y-coord  1 2 3 2 4 3 4 3 4 3 3 4 3 4 3 4 1 3 location  note that during localization  some of the aps in the observation vector may not be present in the ngerprint  in our investigation described in section 3  we only use the aps in the observation vector that are also contained in the ngerprint vector  instead of localizing to only one ngerprint/location  the authors of bahl and padmanabhan  2000  consider the average distance to k nearest neighbors in signal space ; referred to as kola  this extension reduces the median distance error by 28 % ; see fig  2 in this respect  we have developed three modications to kola  all of them implement the same general location averaging technique  differing only in how each of the k nearest neighbors contribute towards the average distance  these modications are needed because kola may select the ngerprints  each associated with a given orientation  of a physical location  hence  kola may not produce an estimate from k unique physical locations  the rst modication  called unweighted kola  uwkola   takes the sorted nearest neighbor results shown in table 2 and then selects the rst k unique locations  once a location is selected  uwkola ignores any subsequent appearances  hence  it ignores ngerprints that represent different orientations  in this example  uwkola will average all ve locations  with each location weighted equally towards the average  even though location four and ve appear in the list multiple times  the second modication is called iteration weighted kola  iwkola  and adds a weight to each location depending on how many times it appears before k unique locations are found  from fig  3 and table 2  iwkola averages all ve locations with location four and location ve weighed three times higher than the other locations as they appear in the list three times   1  this basic nearest neighbor in signal space  nnss  method  however  suffers from problems such as aliasing and large uctuations in estimation error distance due to variations in rssi  here  aliasing refers to the scenario where d is close in signal space to another fig  3 estimates produced by kola modications  b dawes  k.-w chin / the journal of systems and software 84  2011  442451 table 3 a summary of deterministic algorithms  algorithm key features a shortest euclidean distance to a single ngerprint/location takes the average of the k nearest location similar to uwkola but considers orientation  that is  it gives more weight to locations that appears multiple times in the sorted list similar to uwkola but ignores repeated locations  i.e  those described by different ngerprint  fingerprint of a location is set to the orientation with the best signal strength returns the location that is closest in signal space to all four orientations nnss uwkola iwkola wkola oinnssa nnsso a indicates existing algorithms  the third modication is called weighted kola  wkola   it rst determines k unique locations using the same method as uwkola  using fig  3 and table 2  all ve locations will be selected in the following order  one  three  ve  four and two  location one has the smallest distance between the observation vector and the ngerprint  and location two has the largest distance  wkola adds a weight of ve to location one  four to location three  three to location ve  two to location four and one to location two  such that the most probable location is weighed k times higher than the least probable location  the authors of bahl and padmanabhan  2000  also introduced an orientation independent method  called oinnss  which analyzes each ap in the ngerprint vector across the four orientations and selecting the maximum value to form a new ngerprint  we have also designed an improvement  called nnsso  that estimates physical positions independently of orientation  instead of treating each orientation separately  nnsso sums the distance across all four orientations for each physical location as follows  d=  n 4   j=1 1/2  sko sj  k  2  2  k=1 where sj  k corresponds to the signal strength value from ap k at orientation j the algorithm then returns the location or ngerprint that results in the smallest d value  table 3 summarizes the key features of the aforementioned algorithms  although nnss is simple to implement  it only returns the closest ngerprint in signal space  however  as we showed using fig  3 and table 2  further improvements can be made if we consider the k closest ngerprints  for example  iwkola gives more weight to a location that appears multiple times  the assumption here is that a close match to multiple orientations of a location implies the mobile device is probably at the said location  lastly  we propose a novel method that combines the information from all four orientations  this modication therefore exploits information provided by different orientations as opposed to only one specic orientation  as in oinss  2.2 probabilistic the probabilistic ngerprinting techniques presented in hossain et al   2007   heaberlen et al   2004  and youssef et al   2003  offer an advantage over deterministic methods because they include more information about the statistical range of radio frequency  rf  characteristics of a given location  deterministic methods contain a single vector which represents an estimated average rss for a given location  while probabilistic techniques provide a probability distribution function  pdf  estimate of the rssi for a given location  specically  the location ngerprint is a conditional probability p  o|s   where o represents an observed rss 445 vector and s denotes a known location or cell  the ngerprint p  o|s  is called a likelihood function because it represents the probability of an user observing an rss vector o when the user is at the location or state s  roos et al  2002   apart from that  researchers  hossain et al  2007 ; heaberlen et al  2004 ; youssef et al  2003  have also implemented numerous version of the bayesian algorithm  which represents the probability an observation belongs to a given location  in the next section  we rst discuss the normal pdf algorithm ; referred to as npdf  we then review bayesian techniques that work in conjunction with npdf  apart from that  we also review a number of improvements in section 2.2.2  2.2.1 normal pdf  npdf  let o =  o1  o2      on  be the set of all possible observations  and s =  s1  s2      sn  be the set of state si corresponding to the user at location i specically  si =  f1         fm       comprising of 1    m aps with rssi values represented by a normal distribution with mean  and standard deviation   in this method  the mean and standard deviation stored in the ngerprint database are calculated by tting a normal distribution to the sampled rssi values from each ap  the estimate that a user is at location i is given by  i = m  p  oj |fj        3  j=1  is given as the location i in which the users location estimation  eq   3  has a maximum value  we can also combine kola or wkola with npdf to further boost its performance  these algorithms  knpdf and wkpdf respectively  consider the pdf from only k aps that meet the criteria outlined in section 2.1 for example  a mobile device using kola will rst iterate through all ngerprints to determine one that maximizes eq   3   this ngerprint is then removed from the database  and the process is repeated until it nds the next k 1 closest ngerprints  once all k ngerprints are found  the mobile device averages the x and y coordinates of all k ngerprints to yield its position  2.2.2 bayesian the bayesian localization algorithm we implemented combines the ndpf method described in section 2.2.1 with bayes rule  bayes rule denes p  s|o  as the conditional probability that the user is in state s given observation o  which is dependent on p  o|s   the conditional probability of seeing an observation o from state s p  s  is the prior probability that the user was in state s before observing o and p  o  which is a normalizing constant and represents the marginal probability of observing o in other words  we have p  s|o  = p  o|s  p  s  p  o   4  n where p  o  = p  o|si  p  si   i=1 for each observation  the npdf algorithm is used to determine p  oj |si   then bayes rule  i.e  eq   4   is applied on each observation where p  s  = i  which denotes the probability for the previous observation in which the user is at location i a new likelihood   corresponds to the location i that maximizes estimate  i  i =  i p  oj |si      5  n i where  = p  oj |si   i=1 from preliminary results  which used n samples per observation  we found that the estimated location uctuated around the correct location over the course of n samples  the modal value for the estimation was often more accurate than the nth value  henceforth  we 446 b dawes  k.-w chin / the journal of systems and software 84  2011  442451 modied the aforementioned bayesian algorithm to instead run for n iterations  producing one location estimate based on n observations  in each iteration  a list of n preliminary location estimates were generated  we then return the mode of these n estimates as the users location  3 research methodology we rst present our test-bed in section 3.1 before outlining how rssi values are collected and used to generate ngerprints in sections 3.2 and 3.3 respectively  3.1 testbed our testbed and experimental site was located on the rst oor of the university of wollongong  uow  library  this site was chosen for two reasons  the rst  was the high density of wlan access points  the second  was that the site layout differs greatly from those in previous research  in particular  we have no control of aps position or their transmission range  the layout of the rst oor  see fig  4  consists of a large open indoor space with no internal walls  unlike the areas used in prior research  and primarily consists of small ofce rooms and corridors  the space measures 36.6 m 61.0 m for a total area of approximately 2160 m2  the area is multi-use in nature  consisting mostly of book shelves as well fig  4 university of wollongong  uow  testbed  as computer areas and quiet study areas with desks and chairs  although the space is considered open because of the absence of any internal walls  the way in which people move about in the space is largely limited by the arrangement of book shelves  which divides the area primarily into rows running northsouth  with a number of pathways running eastwest  table 4 compares the test-beds used in previous studies  and lists their total area and the number of ngerprint locations  the ngerprint density is calculated as the total area divided by the number of locations and represents area covered by a single ngerprint  fingerprint density is expected to have a signicant effect on the interpretation of localization results  the average distance between evenly spaced ngerprints is approximately equal to the square root of ngerprint density  a ngerprint density of 39 m gives an average spacing between ngerprints of 6.2 m while a ngerprint density of 9 m yields a spacing of 3 m an error distance of 6.2 m in this study represents at worst the location of the adjacent cell to the actual location  3.2 data collection this stage involves scanning all 11 channels in the 802.11 spectrum in order to identify all available aps  data collection also required time correlated sampling of the 802.11 band in order to build a robust picture of the signal strength characteristics of aps  we developed a command-line based program using the native wifi application programming interface  api   called wlanapi  in windows vista  this api is designed to manage both wireless network proles and wireless network connections  wlan api  and provides direct access to a signicant amount of networking information ; e.g  rssi values in dbm of all in-range aps  we also developed a program  called rssi logger  to handle data collection it is based on an open source program called wifi card manager  wcm  ; see  sourceforge   rssi logger is a lite version of wcm  which uses only one function call to wlanapi  and includes data logging services  the rst stage in developing rssi logger is to determine the globally unique identier  giud  of our sony vaio laptops wireless network interface card  nic   this is achieved using a wlanapi function called wlanenuminterfaces  which enumerates all of the wireless nics and their giud  we then store the guid for the desired nic  in this case intel pro/wireless 3945abg network connection  the rssi logger program makes use of the function called wlangetbsslist to retrieve the basic service set  bss  of all the wireless networks detected on the interfaced identied by the guid  the bss includes a large amount of information relating to the properties and status of each detected wifi network  however  the only information relevant to us is the mac address of aps and rssi values  the wlangetbsslist function returns a pointer to a structure  which contains a list of bss entries alongside information related to the total size and the number of entries in the list  to facilitate the data collection process  the wlangetbsslist function is called every 0.25 s over a period of 2 min to collect 480 rssi samples for each detected ap  after each 2 min scan  the entire rssi sample database is logged to a tab delimited text le  a truncated example of this le is shown in table 5 the top row contains the mac addresses of aps  after that  each entry contains the recorded rssi samples in dbm for the corresponding ap  the zero entries in table 5 indicate that an ap is not detected during this time period  for example  the second ap with the address 01ef6833130 is seen switching in and out during the course of the scan  another example is 00dbd1fb12e  which appeared towards the end of the scan  over a period of eight weeks  224 scans were carried out on the rst oor of the uow library at 56 unique physical locations  i.e  the red circles in fig  4  with each location requiring four scans representing the north  south  east  and west orientations  each of the b dawes  k.-w chin / the journal of systems and software 84  2011  442451 447 table 4 localization test-bed ngerprint density  study area  m2  number of locations fingerprint density fingerprint spacing  m  uow-testbed radar  bahl and padmanabhan  2000  radar-enhanced  bahl et al  2000  youssef et al   2003  hossain et al   2007  2160 980 940 1768 540 56 70 49 110 62 1:39 1:14 1:19 1:16 1:9 6.2 3.7 4.4 4 3 224 scans was performed for 2 min  which corresponds to a total of 480 rssi samples  recorded at a rate of four samples per second  the entire set of scans represents a total of 7.5 h of rssi readings  it was not possible to build multiple distinct environmental proles that reect busy and slow periods of human trafc within the library because of time limitations to carry out the rssi recordings and the uncontrolled library environment  instead  every effort was made to carry out the scans at both different times of the day and different days of the week  so as to build a robust rssi prole that incorporates many different environmental variables during busy and slow periods in the library  the success of the localization algorithms with such a data collection paradigm would also indicate the robustness of the localization system to function with data collected in uncontrolled and varied conditions  in previous work  bahl and padmanabhan  2000   researchers had complete control over the building being localized and could easily record all ngerprints over a constant environment  at the conclusion of the 224 scans  a total of 150 unique aps were detected  however  many of these aps are transients ; i.e  they are likely to be located in nearby buildings  and frequently switch in and out during our 2 min scans  as a result  our rssi sample database would be lled with zeros for periods when aps switched out of range  in addition  some aps have a rssi values that are at least 20 standard deviation from the mean  3.3 generating ngerprint databases this step involves processing the raw rssi sample database into location metrics specic to each localization algorithm  the metric used by deterministic localization algorithms is the mean rssi value for each ap across all samples in a specic scan  probabilistic algorithms use a slightly more complex metric  where the rssi samples for each ap in a specic scan are rst tted to a normal distribution before taking the mean and standard deviation  a conditional probability distribution can then be calculated for each ngerprint  which is then used to determine the likelihood that an observed rss vector falls within the range of rssi samples for that ngerprint scan  these metrics  which are extracted from the raw rssi data  essentially become the ngerprints for each location and orientation and are placed in a new database  the new database called the ngerprint database is organized as shown in fig  5 the rst axis consists of the metric for each of the four orientations  namely  north  south  east and west  the second is the ordered list table 5 raw rssi values  in dbm   00dbd1fb4ac 01ef6833130 00d6572c38a  00dbd1fb12e 169 169 169 169 169  171 171 171 179 179 179 0 0  179 179 179 179 178 179 180 179  180 180 179          0 0 0 0 0  145 145 145 fig  5 fingerprint database  of aps from the rssi sample database  table 5   and the nal axis corresponds to the physical location number ; i.e  156 an important step when generating the ngerprint database is the removal of erroneous aps from both databases  ngerprint and rssi sample database  if their performance over the duration of the scan is not desirable  during our data collection  we found many aps connect and disconnect during each scan  these aps are not constantly visible and hence offer a poor localization metric if they are relied upon as part of the ngerprint database  some aps also demonstrated very irregular rssi readings with large variation in magnitude over the scan period  the lack of consistency in rssi readings of these aps argues for their removal from the ngerprint database  while leaving the more desirable aps intact  an important consideration in selecting which aps to remove is the relative independent performance of aps across all individual ngerprints  a specic ap might perform badly in one ngerprint but at a different location  the same ap might perform very well  this could be due to the relative proximity of the ap to each ngerprint location or related to their locations within the building  hence  we remove undesirable aps for each of the 224 ngerprints independently  erroneous aps are removed using a range of standard deviation cut-offs  i.e  120 that is  we exclude an ap if the standard deviation of its rssi samples exceeded a given cut-off  in fact  from the 150 aps detected during the scanning stage  only 100 of these aps are included in the ngerprint database with a standard deviation cut-off of 20 this suggests that approximately 50 or 2/3 of the aps detected during the data collection stage were undesirable transients  the standard deviation cut-off of 20 produces an average of 17.5 aps per ngerprint  substantially less that the total of 100 aps present in the database  the signicant different between the total aps in the data set and the average number present in an individual ngerprint indicates that in this environment  there is a large amount of variation in the aps seen at each location  this is an important consideration as it suggests that in contrast with variations in the rssi samples from a common set of aps seen at all locations  the different physical locations in this environment may be better differentiated by the aps observed at each location  4 results we used matlab to test the algorithms described in section 2 we randomly select 5000 rssi sample vectors from the 100,000 in our sample database to represent the users rssi observations  448 b dawes  k.-w chin / the journal of systems and software 84  2011  442451 20 16 14 12 10 8 25 20 15 10 5 6 4 nnss nnsso oinnss 30 mean error distance  meter  18 mean error distance  meter  35 nnss nnsso oinnss 0 5 10 15 0 20 0 5 standard deviation cut-off fig  6 performance of nnss variants  the performance of the three nnss variants described in section 2 are shown in fig  6 there is a constant increase in performance using all three methods until a standard deviation cut-off of approximately six  at this point  there are approximately 100 aps in the ngerprint database  which means the localization algorithms are operating in 100 dimensions  the nnss algorithm operates at an error distance of 4.5 m  outperforming the nnsso method by approximately 0.8 m and the oinnss method by 4.1 m although there is still variation in their performance  it is clear that the nnss method consistently produces more accurate results than the other two alternatives  the mean error distance for the three alternative algorithms averaged over a standard deviation cut-off between six and 20 is shown in table 6 from our experimentations  we noticed that each ngerprint contains a large number of aps ; an average of 17.5 moreover  not all aps are present when an observation vector is presented for localization  we  therefore  investigate whether they are any advantages in reducing the number of aps used by deterministic methods  normally  in so called standard dimension  the euclidean distance between the ngerprint and observation vector is calculated over all aps even if some of these aps are not present  specically  if an ap in the observation vector is not present  the distance in this dimension is given as the magnitude of the observation vector  this means all aps present in the observation contribute to the localization estimation  on the other hand  in reduced dimension  only the aps in the observation vector that are also contained in the ngerprint vector are used in the euclidean distance calculation  this means the euclidean distance calculation now works with fewer aps or reduced dimensions as it ignores missing aps  in the rest of table 6 average performance of nnss variants  the range of standard deviation for standard and reduced dimension is 620 and 820 respectively  nnss nnsso oinnss improvement standard dimensions reduced dimensions 4.5 5.3 8.6 3.5 4.5 9.1 20 22 % 15 % 6 % the paper  we will use the sufx r to denote algorithms that work with vectors with reduced dimension ; e.g  nnssr  the nnss algorithm  see fig  7  with reduced dimension  has the best performance given its 22 % decrease in mean error distance  this indicates nnss performs well when only a subset of aps is used for localization  apart from that  we can see that nnss outperforms oinnss with an error distance of 3.5 m as compared to 8.6 m this result indicates oinnss is unsuitable for use in combination with knnss  the results thus far suggest that nnss and nnssr produce the most accurate estimations  and as such may increase the performance of kola algorithms  in order to conduct a comparative analysis with radar  bahl and padmanabhan  2000   we also simulated oinnss in combination with the kola algorithm  over the course of 5000 simulations  uwkola  iwkola and kola all performed identically  which suggests that in our test-bed  the k ngerprints with the smallest distance from the observation vector naturally represent k unique locations  this means no extra processing is necessary to ensure there are k unique locations  fig  8 shows the performance of kola and wkola in combination with nnss  nnssr  oinnss and oinnssr  this means if we combine kola and nnss  or knnss   the resulting algorithm picks k locations that have the smallest euclidean distance  similarly  for knnssr  the k locations are computed by only considering aps in 10 knnss knnssr wknnss wknnssr 8 koinnss koinnssr 7 9 mean error distance  meter  4.1 deterministic algorithms error distance  m  15 fig  7 performance of nnss variants with reduced dimensions  the 5000 rssi vectors chosen were randomly distributed across all of the 56 locations and four orientations  we then report on the median  50th percentile  error distance  algorithm 10 standard deviation cut-off 6 5 4 3 2 1 1 2 3 4 5 6 7 8 9 10 k fig  8 performance of kola variants  the combination of the following techniques are displayed  nnss with kola represented as knnss  nnssr with kola as knnssr  nnss with wkola as wknnss  nnssr with wkola as wknnssr  oinnss with kola as koinnss  and oinnssr with kola as koinnssr  b dawes  k.-w chin / the journal of systems and software 84  2011  442451 4 knpdf wknpdf 3.8 12 mean error distance  meter  mean error distance  meter  14 10 8 6 4 2 449 3.6 3.4 3.2 3 2.8 2.6 1 2 3 4 5 6 7 8 9 2.4 10 1 2 3 4 5 6 7 8 9 10 k standard deviation cut-off fig  9 npdf performance  fig  10 kndpf performance  the observation vector that are also contained in the ngerprint vector  again  with reduced dimensions  all algorithms have a better performance with the exception of knnssior  the performance increase of knnssr and wknnssr begins to decrease as k becomes larger  which suggests only the rst few location estimates generated by the reduced dimension algorithms maintain a performance advantage  the highest performing algorithm is knnssr  which uses the basic nnss method with reduced dimensions in combination with knnss  the knnssr algorithm  which yields 2.0 m accuracy represents an improvement of 43 % over nnssr  which only managed to yield an accuracy of 3.5 m knnssr also has the advantage of requiring the least calculation because it only uses two to three locations  this also indicates nnss produces very accurate results  with the true location most likely contained within the rst one to three estimations  bilistic and determinitic methods to further improve localization performance  fig  11 shows the performance of bayesian methods  with mode ltering  the basic algorithm provides a performance increase of 1.0 m after two samples have been processed  and with one sample recorded every 0.25 s  this represents a delay in 0.5 s before the location estimation becomes available  on the other hand  with mode ltering  the algorithm takes twice as long to reach this accuracy  which required four samples  although the basic algorithm outperforms mode ltered version during the rst second of operation  the mode ltered algorithm continues to increase in accuracy with additional samples  at 20 samples  which represents a delay of 5 s  the bayesian method with mode lter converges onto a mean error distance of 2.3 m in contrast  without mode ltering  the bayesian algorithm reaches its peak performance after two samples  and remains constant with the addition of new samples  4.2 probabilistic 4.3 discussion the standard deviation cut-off technique removes undesirable aps from the database in a way that maximizes localization performance without requiring sophisticated data collection methods  the aps detected during the data collection stage are primarily separated into two groups  one with a rssi sample standard deviation of below 68 and another with a standard deviation greater than 20 the signicant standard deviation gap between these two 4.5 mean error distance  meter  the mean error distance of npdf  as shown in fig  9  shows it converging more rapidly to a stable value and at a lower standard deviation cut-off than nnss variants ; viz  figs  6 and 7 the normal probability distribution function is undened for standard deviations of zero  this property of npdf also means it inherently operates with a reduced dimension ngerprint set  the primary advantage of npdf is its ability to produce comparative performance with fewer aps than nnss alternatives  a standard deviation cut-off of one results in an average of 13 aps per ngerprint with npdf producing an error distance of 12.5 m this result is comparable to nnss variants  which generate an error distance of approximately 13 m at the same standard deviation cut off ; see fig  6 however  nnss variants operate with the entire ngerprint database of 41 aps at this cut-off in order to produce this result  when nnssr variants operate with 13 aps per ngerprint  they produce an error distance in the vicinity of 30 m with a comparable number of aps utilized  the npdf performs almost 2.5 times better than nnssr  the ability to perform effectively with fewer aps means npdf is better suited to environments with a lower base station density than deterministic methods  fig  10 shows further improvement can be had when we combine kth location averaging with npdf ; i.e  kola with npdf  where the k most probable locations are used for localization  wknpdf consistently produces a mean error distance of 2.6 m after averaging k = 4 most likely user locations  this represents an improvement of 38 % over npdf  which operates with an error distance in the region of 4 m notably  kola + npdfs performance increased by 38 %  these results  therefore  argue in favor of combining proba bayesian bayesian with mode filter 4 3.5 3 2.5 2 0 2 4 6 8 10 12 14 16 number of samples fig  11 effect of mode lter on bayesian algorithm  18 20 450 b dawes  k.-w chin / the journal of systems and software 84  2011  442451 fig  12 the rank of all tested localization algorithms  groups allows them to be easily separated  the standard dimension and more dramatically  the reduced dimension of nearest neighbor variants highlight that localization performance continues to increase as the standard deviation cut-off increases  this increase in performance plateaus at a standard deviation cut-off of six for the standard dimension and eight for reduced dimension variants  the relatively consistent performance after this cut-off indicates that all the desirable aps have been included in the ngerprint database at this point  this technique will allow the effective implementation of localization systems in uncontrolled environments where transient and erroneous aps may be detected  as well as building robust ngerprint databases  where only the most desirable aps are included  our results show that localization methods work well with reduced dimensions  with standard dimension  i.e  all aps  the presence of an ap in an observation vector can either positively or negatively affect the distance metric used to calculate the nearest neighbor  this is because if an ap is observed  it will be factored into the distance calculation of all ngerprints  even if it is not presence in our ngerprint database or observation vector  the reduced dimension method  however  only uses aps from the observation vector  as a consequence  missing aps do not have any impact on the resulting calculation  nearest neighbor variants and the npdf method display reasonably good localization performance when only the most probable ngerprint is factored into the location estimation  kola  which incorporates the k most probable ngerprints into the location estimation  has the best performance  moreover  when paired with npdf and nnssr  kola achieved an improvement of 38 % and 43 % respectively  the radar  bahl and padmanabhan  2000  system  however  only achieved a 28 % increase with the kola algorithm  our results show that oinnss  a method implemented in radar  has inferior performance to the method that combines nnssr and kola  recall that oinnss is used ensure k unique locations  however  we did not observe this problem in our experimentation  which suggests that this issue is dependent on the test-bed and localization environment  and is not an issue faced by all localization systems  fig  12 shows the error distance of all tested localization algorithms  recall that the reported error distance is the median from our simulation of 5000 sample points  note  the performance of knnsssr and wknnssr is taken at k = 4 with a higher k value  as shown in fig  8  their accuracy reduces to 3.2 and 2.8 m respectively  investigation of npdf highlighted a signicant advantage over nearest neighbor methods  our results show npdf to have comparable error distance performance but utilizes signicantly fewer aps than nearest neighbor variants  for example  with only 13 aps per ngerprint  ndpf has an error distance of 12.5 m as compared to 30 m for nnssr  although this error distance is signicantly higher than the best result achieved  it clearly suggests that probabilistic methods are better suited to environments with very low ap density  the bayesian algorithm has a lower than expected performance as compared to results in previous studies  for example  the authors of heaberlen et al   2004  reported a continuous performance increase with additional samples  in our case  its performance peaked after two samples  which suggests that the environment and ngerprints used possess a very large amount of variability  hence  these variabilities  both in the ngerprint and observation vectors  limit the ability of bayesian methods to deliver increasingly accurate position estimations  the peak performance of the bayesian method after only two samples suggests that when more than two observation samples are considered  there is too much variation within the samples to make a more accurate position estimation  this limitation  however  is addressed effectively by incorporating a mode lter  5 conclusion this paper has evaluated two classes of localization methods that exploit the ubiquity of wlans on a common test-bed  in addition  it identies and provides solution to the following key issues  high number of aps  which increases the dimension of rssi ngerprints  transient aps that drift in and out of range constantly  and variable rssi values the latter two issues are particularly important as they render localization methods ineffective  to address these issues  we have proposed numerous enhancements to existing localization methods  and argue the importance of removing transient aps  in this respect  our standard deviation cut-off technique generated favorable results when tested with both deterministic and probabilistic ngerprints  apart from that  we found methods based on probability distributions to perform poorly in environments that display highly variable signal strength characteristics as is the case on our testbed  this is due to the variation of rssi samples across the sample set  which negates the advantage of using multiple rssi samples to calculate a position estimate  in such environments  algorithms based on nearest neighbors  which calculate position estimations based on a single rssi observation vector  offer greater efciency in terms of accuracy versus computational cost  the kth order location averaging technique or kola offers signicant performance enhancement in highly variable environments  moreover  it is simple  effective and proven to increase localization accuracy by up to 43 %  lastly  the proposed mode ltering technique proved very effective in reducing the error distance of the bayesian algorithm  in particular  it addresses a key limitation with the bayesian algorithm when operating in uncontrolled environments which have high variability in terms of rssi and aps  acknowledgment we like to give our sincere thanks to the anonymous reviewers for helping us improve the presentation of this paper  b dawes  k.-w chin / the journal of systems and software 84  2011  442451 references bahl  p  padmanabhan  v  2000 radar  an in-building rf-based user location and tracking system  in  proceedings of the ieee infocom2000  tel-aviv  israel  bahl  p  balachandran  a  padmanabhan  v  2000 enhancements to the radar user location and tracking system  microsoft technical report  february 2000 bardram1  j.e  hansen1  t.r  mogensen1  m  soegaard  m  2006 ubicomp  chapter experiences from real world deployment of context-aware technologies in a hospital environment  lecture notes in computer science  barsocchi  p  lenzi  s  chessa  s  giunta  g  2009 virtual calibration for rssi-based indoor localization with ieee 802.15.4 in  ieee icc  dresden  germany  june 2009 battiti  r  brunato  m  villani  a  2005 statistical learning theory for location ngerprinting in wireless lans  computer networks and isdn systems 47  825845 getting  i  1993 perspective on navigation  the global positioning system  ieee spectrum 30  3638 haartsen  j  naghshineh  m  inouye  j  joeressen  o.j  allen  w  1998 bluetooth  vision  goals  and architecture  acm mobile computing and communications review 2  4  october    harter  a  hopper  a  steggles  p  ward  a  webster  p  1999 the anatomy of context-aware application  in  acm mobicom  seattle  usa  october 1999 haeberlen  a  flannery  e  ladd  a  rudys  a  wallach  d  kavraki  l  2004 practical robust localization over large-scale 802.11 wireless networks  in  acm mobicom  philadelphia  usa  october 2004 hossain  m  van  h  jin  y  soh  w  2007 indoor localization using multiple wireless technologies  in  ieee mass  pisa  italy  october 2007 kaemarungsi  k  2005 design of indoor positioning systems based on location ngerprinting technique  phd thesis  ladd  a  bekris  k  rudys  a  marceau  g  kavraki  l  wallach  d  2002 roboticsbased location sensing using wireless ethernet  in  ieee mobicom  atlanta  usa  2002 lim  h  kung  l  hou  j  luo  h  2006 zeroconguration  robust indoor localization  theory and experimentation  in  ieee infocom  barcelona  spain  april 2006 orr  r.j  abowd  g.d  2000 the smart oor  a mechanism for natural user identication and tracking  in  acm conf  on human factors in computing systems  netherlands  april 2000 prasithsangaree  p  krishnamurthy  p  chrysanthis  p  2002 on indoor position location with wireless lans  in  ieee pimrc  portugal  september 2002 priyantha  n  chakraborty  a  balakrishnan  h  2000 the cricket location system  in  acm mobicom  boston  usa  october 2000  451 roos  t  myllymaki  p  tirri  h  misikangas  p  sievanen  j  2002 a probabilistic approach to wlan user location estimation  international journal of wireless information networks 9  july   155164 saha  s  chaudhuri  k  sanghi  d  bhagwat  p  2003 location determination of a mobile device using ieee 802.11b access point signals  in  ieee wcnc 2003  new orleans  usa  march 2003 sourceforge  wifi card manager  http  //sourceforge.net/projects/wicardmanager/  varshavsky  a  de lara  e  hightower  j  lamarca  a  otsason  v  2007 gsm indoor localization  elsevier pervasive and mobile computing 3  6   698720 wang  r  hooper  a  falcao  v  gibbons  j  1992 the active badge location system  acm transactions on information systems 10  91102 microsoft  wlan api  software documentation  http  //msdn.microsoft.com/enus/library/ms706556 % 28vs.85 % 29.aspx  xiang  z  song  s  chen  j  wang  h  huang  j  gao  x  2004 a wireless lan based indoor positioning technology  ibm journal research development 48  march   617626 youssef  m  agrawala  a  shankar  a.u  2003 wlan location determination via clustering and probability distributions  in  ieee wireless communications and networking conference  wcnc03   new orleans  usa  march 2003 zagami  j  parl  s  bussgang  j  melillo  k  1998 providing universal location service using a wireless e911 location network  ieee communications magazine 36  6671 brett dawes graduated with a bachelor of electrical engineering  honours  from the university of wollongong in 2009 he received a high distinction for his honous thesis on indoor localization methods  his main interests included localization algorithms  and positioning algorithms for indoor environments  kwan-wu chin is currently an associate professor at the school of electrical  computers  and telecommunications engineering  at the university of wollongong  australia  he obtained his phd from curtin university of technology  western australia  in 2000 after that  he joined the motorola australia research center as a senior research engineer  where he designed zero-conguration and wireless sensor networks protocols  he holds four us patents  and has published more than 45 conference and journal papers in various areas of wireless networks  ranging from rfid to dimensioning voice over ip calls  his current interests include designing approximation algorithms to np-hard problems and resource allocation problems in single and multi-hop wireless networks  