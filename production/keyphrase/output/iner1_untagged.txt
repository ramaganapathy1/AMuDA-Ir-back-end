hindawi publishing corporation mathematical problems in engineering volume 2015  article id 397298  32 pages http  //dx.doi.org/10.1155/2015/397298 review article improvement schemes for indoor mobile location estimation  a survey jianga shang,1,2,3 xuke hu,2,3 fuqiang gu,2,3 di wang,4 and shengsheng yu1 1 school of computer science & technology  huazhong university of science  wuhan 430074  china faculty of information engineering  china university of geosciences  wuhan 430074  china 3 national engineering research center for geographic information system  wuhan 430074  china 4 department of electrical and computer engineering  university of florida  gainesville  fl 32611  usa 2 correspondence should be addressed to jianga shang ; jgshang @ cug.edu.cn received 21 january 2015 ; accepted 26 march 2015 academic editor  paolo maria mariano copyright 2015 jianga shang et al  this is an open access article distributed under the creative commons attribution license  which permits unrestricted use  distribution  and reproduction in any medium  provided the original work is properly cited  location estimation is significant in mobile and ubiquitous computing systems  the complexity and smaller scale of the indoor environment impose a great impact on location estimation  the key of location estimation lies in the representation and fusion of uncertain information from multiple sources  the improvement of location estimation is a complicated and comprehensive issue  a lot of research has been done to address this issue  however  existing research typically focuses on certain aspects of the problem and specific methods  this paper reviews mainstream schemes on improving indoor location estimation from multiple levels and perspectives by combining existing works and our own working experiences  initially  we analyze the error sources of common indoor localization techniques and provide a multilayered conceptual framework of improvement schemes for location estimation  this is followed by a discussion of probabilistic methods for location estimation  including bayes filters  kalman filters  extended kalman filters  sigma-point kalman filters  particle filters  and hidden markov models  then  we investigate the hybrid localization methods  including multimodal fingerprinting  triangulation fusing multiple measurements  combination of wireless positioning with pedestrian dead reckoning  pdr   and cooperative localization  next  we focus on the location determination approaches that fuse spatial contexts  namely  map matching  landmark fusion  and spatial model-aided methods  finally  we present the directions for future research  1 introduction location is the most fundamental and important context in mobile and ubiquitous computing  a number of mobile applications have the requirement on the location knowledge of human or devices  it is estimated that people spend about 87 % of their time indoors  1   location-based services  such as mobile social network  2  and internet of things  iots   3   are extending to indoor environments  in outdoor environment  the global navigation satellite systems  gnss  such as gps can provide accurate location estimation  but they almost do not work indoors  4   to compensate the drawback of gps  some solutions have been proposed  such as cellular-based positioning  5   but the accuracy achieved is not high enough to meet the demand of most indoor applications  compared with open outdoor spaces  indoor spaces are more complicated in terms of layout  topology  and spatial constraints  6   as a result  the wireless signal suffers from multipath effect  scattering  and nonline of sight propagating  such effects cause extra signal attenuation and propagation time  thereby reducing the localization accuracy of these methods that assume wireless signal traverses in a straight line and depend on the time traveled or the signal strength received to estimate the location  7   on the other hand  due to the small-scale of the indoor environment  most applications have high demand for accuracy  for example  12 m or better  the accurate location determination remains challenging for mobile indoor localization and inspires researchers to constantly explore effective solutions  depending on whether there is a need for devices  indoor positioning methods can be categorized into two types  device-free and device-based  8   the former is still in its 2 infancy and has a lot of limitations  9   because of this  the latter becomes the mainstream of indoor positioning and is also the focus of this paper  typical device-based location sensing methods include proximity  10  11   triangulation  5   fingerprinting  12   and dead reckoning  8  13   a proximity location sensing technique implies determining when an object is near a known location  there are three general approaches to sense proximity  detecting physical contact  monitoring wireless cellular access points  aps   and observing automatic id systems  10   triangulation is known as the ranging-based method  which commonly uses wi-fi  bluetooth  uwb  css  and rfid to obtain the measurements such as time of arrival  toa   5  10   angle of arrival  aoa   5  10   symmetric double-sided two-way ranging  sds-twr   14   elapsed time between the two time of arrivals  etoa   15   or received signal strength  rss   5  10   based on these measurements  the distances between the target and beacons can be computed and then the location of the target can be determined  fingerprinting consists of two phases  offline training and online location estimation  the offline phase detects the signal strength from the surrounding beacons and collects location fingerprints to create a fingerprint database  in the online phase  the target obtains a vector of signal strengths in real time  these signal measurements are then compared with the fingerprints in the database  the location of the best matched fingerprint is used as the estimated location  given the initial position  dead reckoning can in real time infer the location of a mobile target equipped with inertial measurement units  imu   13   for example  accelerometers  gyroscopes  and magnetometers  based on the moving direction  velocity  and sampling interval  since the accuracy is the key indicator to evaluate the performance of a localization system  4   much research has put emphasis on how to improve the accuracy and provide users with reliable  accurate localization services  the accuracy depends on many factors such as the accuracy of wireless ranging  the algorithm used to deal with measurements  and even the geometric layout of nodes  16   the strategies for enhancing accuracy typically focus on three directions including optimizing hardware  improving location estimation  and enhancing the geometric dilution of precision  gdop   16   in fact  compared with the geometric factor  the environments and hardware play a fundamental role in the performance of indoor localization  since hardware optimization is inevitably restrained by their own coverage  time resolution  and cost  much attention in this field is given to the improvement approaches of location estimation  17 22   the process of localization contains measuring  location update  and optional optimization  11  23   in the location update stage  measurements are integrated into the positioning algorithm to compute the coordinates of a mobile target  7   the influence from noise  multipath  obstruction  and hardware clock drift generates the uncertainty in the raw measurements and signal metrics  such as distances  thereby affecting the accuracy of location estimation  this further results in that the achieved accuracy can not meet the need of most of applications and the optimization step needs to be executed  in practice  the optimization begins mathematical problems in engineering with the processing of measurements and persists throughout the whole localization process  therefore  the steps of location update and optimization can be taken as one step  namely  location estimation  the key of this step is to express the uncertainty and to fuse multisource information  10   probabilistic techniques are effective tools to deal with uncertainty problems  the most widely used one is the bayesian filtering  it can not only handle the uncertainty problem but also fuse different measurements  the family of bayesian filtering includes kalman filters  24   extended kalman filters  25   sigma-point kalman filters  26   particle filters  27   and hidden markov models  28   each localization technique has its drawbacks when comprehensively considering accuracy  cost  coverage  and complexity  none of them can be suitable to all scenarios  4  5  10   the probabilistic methods can reduce the uncertainty of location estimation to some extent ; it can not eliminate the drawback inherent in a technique  in this sense  the improvement of accuracy using the probabilistic method is still limited  on the other hand  the combination of multiple techniques can complement each other and further improve the accuracy  such combinations include multimodal fingerprinting  29   triangulation fusing multiple measurements  30   method combining wireless positioning with pedestrian dead reckoning  31   and cooperative localization  23   fusing spatial contexts is another significant approach for optimizing location estimation  an interesting phenomenon is that people usually complain that complex indoor spaces make localization difficult and troublesome  while the complexity can assist the positioning algorithm to achieve higher accuracy  for instance  compared with outdoor spaces  indoor spaces are closed ; moving targets can not pass a wall ; entering a room has to go through a door  these characteristics of indoor spaces can be utilized to improve the localization results  32   also  there are often landmarks within an indoor environment  including visible landmarks  such as stairs  elevators  and corners  and invisible landmarks  such as magnetic outlier points  these landmarks  21  33  impose the sensors to present some predictable or special patterns  by recognizing and analyzing these patterns  the localization results can be refined  combining the geometry  topology  and semantics of indoor spatial models with kalman filters or particle filters has been one of research hotspots  10  22  34  35   the core of designing an indoor localization system is determining the location estimation approaches  the key of location estimation lies in the representation and fusion of uncertain information from multiple sources  many approaches to enhance indoor localization results have been proposed  however  existing research generally focuses on certain aspects of the problem and specific methods  this paper reviews typical schemes on improving indoor location estimation from multiple levels and perspectives  by analyzing the error sources of typical localization approaches  we present a multilayered conceptual framework for location estimation refinement  particularly  we discuss probabilistic technique-based approaches  hybrid location estimation approaches  and localization approaches that fuse spatial contexts  the basic rationales  state of the art  and advantages and disadvantages of these methods  as well as potential combination among them  are given  this can help people not only comprehensively understand the improvement approaches of location estimation but also select the most effective solution when designing a localization system  this paper is organized as follows  section 2 introduces the concept of location accuracy and precision  error sources of typical localization approaches  in section 3  we present a multilayered conceptual framework for location estimation enhancement  section 4 gives the mathematical foundation of location estimation  that is  probabilistic techniques  including kalman filters  extended kalman filters  sigmapoint kalman filters  particle filters  and hidden markov models  the application of bayesian methods in different levels is also explored  in section 5  hybrid location estimation methods are investigated  including multimodal fingerprinting  triangulation fusing multiple measurements  combination of wireless positioning with pedestrian dead reckoning  and cooperative localization  the location estimation improvement methods by fusing spatial contexts are provided in section 6  namely  map matching-aided methods  landmark-aided methods  and spatial model-aided methods  in section 7  we discuss the open issues and comment on possible future research directions  finally in section 8  a conclusion is drawn  2 localization accuracy evaluation accuracy is one of the most significant indicators of localization performance  it is influenced by a lot of factors such as environment noise  hardware error  and positioning algorithms  this section begins with the comparison of accuracy and precision  then an analysis of the error sources of typical localization approaches is presented  finally  a multilayered framework for localization accuracy improvement is proposed  2.1 accuracy and precision  accuracy and precision are usually regarded as the same concept  but they actually measure different aspects  accuracy refers to the closeness degree between the truth and the measurement or how approximate the observation is to the truth  36   which is typically expressed as a distance interval such as 13 m precision represents the repeatability of measurements or how often we can expect to get a certain degree of accuracy  for the sake of simplicity  the accuracy and precision are generally combined into one concept and simply called the accuracy which is denoted by a distance interval  2.1.1 accuracy  accuracy is the most vital indicator evaluating the performance of a positioning system  which is defined with the average euclidean distance between the true location and the estimated location  also known as location error  5   in general  the location error can be expressed using standard error  mean error  or median error  it is difficult to precisely give the accuracy in most cases since there are many factors affecting the accuracy  this means that even the same system can show significantly varying accuracy 3 cdf  %  mathematical problems in engineering 100 90 80 70 60 50 40 30 20 10 0 0.5 1 1.5 2 2.5 error distance  m  3 3.5 4 positioning system 1 positioning system 2 figure 1  precision comparison of different systems  under different contexts  to better describe accuracy  the distance interval is adopted  for example  2-3 m accuracy can be regarded as a potential bias or offset of a system  generally  the higher the accuracy  the better the system  nonetheless  the excessive pursuit of accuracy often results in the degradation of other aspects of performance  e.g  real time  complexity  and cost   therefore  when choosing a system or technology  we need to take into account not only accuracy but also other performance characteristics in the light of the requirements  2.1.2 precision  precision measures the consistency of a system working under a level of accuracy  for instance  it can measure how robust the system is since it reveals the performance variation over many trials  the cumulative probability function  cdf  is usually adopted to measure precision  5  and is represented by the percentile format  when we compare two systems  the system with the cdf rising faster is considered to be the better one if they have similar accuracy  for instance  suppose that there are two localization systems  one with a precision of 70 % within 1 meter  the cdf of distance error of 1 m is 0.7  and 95 % with 2.5 m and the other with a precision of 55 % within 1 m and 95 % within 2.2 m as shown in figure 1 the latter is commonly considered as the one with higher performance  2.2 sources of localization error  location error is inevitable for any indoor positioning systems  the error can be divided into three types  intrinsic error  extrinsic error  and algorithmic error  37   intrinsic error is caused by the limitation of either hardware or software  extrinsic error stems from environmental factors such as multipath and shadowing  multiple access interference  fluctuations in the signal propagation speed  and the presence of obstructions  algorithmic error is determined by the rationale of the designed positioning algorithm  having a sound understanding to the error sources is necessary to design a suitable solution  2.2.1 triangulation  the triangulation technique computes the location of a target by using the distances or angles 4 table 1  accuracy comparisons of typical triangulation techniques  technique system accuracy and precision range tdoa zebra dart  5  0.3 m  50 %  200 m aoa + tdoa ubisense  5  0.3 m  99 %  30 m etoa beepbeep  15  1-2 cm  92 %  10 m sds-twr nanoloc  81  1-2 m 400 m rss tix  143  5.4 m  50 %  20100 m between the target and beacons  the distances are usually deduced from toa  tdoa  etoa  sds-twr  rss  and so on  such time-based ranging methods have high requirement on the hardware  for example  toa and tdoa need the time synchronization between targets and beacons  an error of 1 ns in the temporal domain can cause an error of 0.3 m in the spatial domain  for those methods that do not need time synchronization  such as sds-twr and etoa  the most important factor influencing accuracy is the processing of the delay between the sender and the receiver  because of time-varying characteristics and low recognition rate  rssbased methods commonly suffer from high location error  compared with tdoa  aoa-based methods demand special hardware equipment  for example  directional antennas or antenna arrays installed at the beacons  7   aoa-based methods also cost more for deployment and maintenance  moreover  the estimation using aoa is inaccurate when the target is far from the beacons  5  14   table 1 shows accuracy comparisons of typical triangulation techniques  wireless signal is susceptible to reflection  refraction  and diffraction of objects in the space of interest  as a result  the signal traverse in multipath is the main contributor to the location error for time-based ranging methods  38   the signal strength received from the direct path is also related to the ranging error  when the strength is below a threshold  the signal from the direct path would be omitted and the signal from indirect paths with stronger strength would be chosen to compute ranging result  this is called undetected direct path and leads to large ranging error  multipath  multiple access interference  and obstructions also affect the performance of rss-based methods  the general solution is building an approximate model that well describes the environment  such a model usually needs to consider the size  texture  and thickness of obstructions in the environment  except the accuracy of the ranging measurements  geometric factors related to the relative location of the beacons and the mobile devices also have a significant influence on the accuracy of the triangulation localization technique  7  36   if the location is geometrically calculated using the triangulation algorithm  the location error will be further magnified by dilution of precision  dop   the general form of dop is geometric dop  gdop   which represents the magnification factor of the distances between the target and the beacons  it explains how location accuracy reduces with the effect of geometry  the volume of the shape formed by the unit-vectors from the target to the beacons is inversely proportional to the gdop  a higher gdop implies more uncertainty in the calculated location mathematical problems in engineering and hence the lower location accuracy  to minimize the gdop  we should always distribute beacons as evenly as possible  the research of gdop focuses on optimizing the deployment manners or number of devices of localization system  but this paper aims to explore the effective strategies and algorithms of location estimation to particularly improve localization accuracy  the discussion about gdop is not in the scope of this paper  readers who are interested in gdop are recommended to see  16   2.2.2 fingerprinting  indoor fingerprinting can use existing signal sources to compute the location of a target  because of this  it has been a popular approach for indoor positioning  typically  signal sources include wi-fi  bluetooth  gsm  fm  dtv  29  39  40   terrestrial magnetism  41   lights  and acoustic sources  2  42   an ideal signal source should possess two properties  recognizability and stability  the time-varying characteristic is the most significant factor to affect the performance of fingerprinting  in other words  it is difficult to match the online signal fingerprints with these fingerprints collected and stored in the database in the offline phase if the signal changes over time  the mismatch can lead to a large location error and even cause failure to positioning  besides  sensors of different brands have different specifications and varying sensor readings even at the same locations  43   that is  if we use smartphones of a brand to collect training fingerprints and another brands smartphones to receive online fingerprints  there would be a mismatch between training fingerprints and online fingerprints  both the time-varying characteristic of the signal and the rss difference between sensors of different brands are illustrated in figure 2 the data for figure 2 was collected at the same point using a smartphone of brand a and another smartphone of brand b during one hour  it shows that wi-fi rss presents the normal distribution and fluctuates around a mean value  figure 2 also demonstrates that there is a significant difference in the rss collected from different smartphones  to illustrate the time-varying characteristic of the magnetic signal and the effect of different devices  we collected magnetic strength at a region with an area of 2 m 14 m the magnetic distribution was calculated by interpolating  figure 3 shows how different two groups of data collected at the same region during two different time periods are  similarly  there is a difference between data collected by different smartphones at the same time  as shown in figure 4  2.2.3 pdr  pdr  44  is a localization solution of pedestrian equipped with imu sensors given the initial position  it is likely to play an increasingly significant role in indoor tracking and navigation  due to its low cost and ability to work without any additional infrastructure  this is especially useful in the blind or weak area of wireless signal  in general  pdr can be divided into three steps  step event capturing  stride length calculation  and heading evaluation  the mathematical mathematical problems in engineering 5 ap 1  20  dc  e6  fb:43:36  0.14 0.1 0.1 rss probability distribution rss probability distribution 0.12 0.08 0.06 0.04 0.08 0.06 0.04 0.02 0.02 0 90 ap 2  e0:05  c5:44:79  bc  0.12 80 70 60 50 40 0 90 30 80 70 60 50 40 30 rss  dbm  rss  dbm   a  rss distribution using the smartphone of brand a 0.25 ap 1  20  dc  e6  fb:43:36  0.18 ap 2  e0:05  c5:44:79  bc  0.16 0.14 rss probability distribution rss probability distribution 0.2 0.15 0.1 0.12 0.1 0.08 0.06 0.04 0.05 0.02 0 75 70 65 60 55 50 45 40 35 30 25 rss  dbm  0 75 70 65 60 55 50 45 40 35 30 25 rss  dbm   b  rss distribution using the smartphone of brand b figure 2  rss distribution for different smartphones  formula of pdr is shown by  1   13  where    is the coordinate of the user at time and and indicate the stride length and heading  respectively  consider 1 + cos       =  1 + sin    1  on the other hand  the problem that pdr suffers from is the cumulative error  45   because the location estimation is always computed based on the prior result  the error accumulates rapidly over time  this means that the recalibration is needed regularly in pdr  the accelerometer embedded in a smartphone can be used to capture step events and to further compute stride length using stride models such as weinberg  but it is susceptible to walking speed  road slope  and so on  46   giving rise to the inaccurate results of stride length computation  comparatively  the error from heading detection has a greater influence on the location estimation than that 6 mathematical problems in engineering magnitude magnitude 60 12 58 12 10 56 10 52 54 52 50 54 8 56 14 y  m  y  m  14 6 8 48 6 46 4 44 50 4 48 2 46 2 0 44 0 0 0.5 1 1.5 42 40 2 0 0.5 x  m   a  1 x  m  1.5 2  b  figure 3  magnetic strength distribution collected using the same smartphone at the same region in different time periods  magnitude magnitude 56 14 14 54 12 52 12 50 52 48 10 10 8 48 46 y  m  y  m  50 8 44 6 46 6 42 4 44 4 40 42 2 38 2 36 40 0 0 0.5 1 x  m  1.5 2  a  0 0 0.5 1 x  m  1.5 2  b  figure 4  magnetic strength distribution collected by different smartphones at the same region in the same time period  from stride length calculation  47   the readings from both magnetometers and gyroscopes can be utilized to compute the heading  however  the magnetometer is prone to the disturbance of electric current and metals in the environment ; the gyroscope has the drift problem  which means that the reading error rises over time  in addition  the tilt of the smartphone can cause its heading to deviate from the user walking direction  48   the poses of the smartphones also contribute to the accuracy of heading evaluation  which need to be taken into account in practice  3 conceptual framework of improvement schemes for location estimation the location error is unavoidable no matter which localization approach is used  to reduce the errors from different sources  a number of solutions for improving location estimation have been proposed  however  most of the existing research works generally concentrate on certain aspects of the problem and specific methods  here we provide a comprehensive framework to introduce potential strategies mathematical problems in engineering 7 pda phone laptop tag lbs server spatial contexts fusion map matching bayes filters multimodal fingerprinting spatial model landmarks hybrid localization multimodal pdr triangulation fusion cooperative localization measurements rss distance angle pdr results wireless modules and sensors wi-fi bluetooth uwb zigbee imu sensors figure 5  a multilayered conceptual framework of improvement schemes for location estimation  for location estimation enhancement  as shown in figure 5 the bottom layer is positioning hardware  including wireless modules  e.g  wi-fi  bluetooth  and uwb  and motion sensors  e.g  accelerometers  gyroscopes  and compasses   for a particular localization technique  bayesian filtering such as particle filters  kalman filters  and hidden markov models can be utilized to filter out the noise from measurements  there are usually three options for filtering  raw measurements  signal metrics  e.g  distances   and coordinates  also  as a mathematical tool  bayesian filtering can be applied to fusion of multiple localization techniques and fusion of spatial contexts  except employing filtering technique to control the location error of single localization approach  researchers have put forward a series of hybrid localization approaches  through fusing different measurements and/or localization techniques  it is possible to draw on each others strength and to achieve an ideal accuracy  the fingerprinting error stems mainly from low recognition rate of fingerprints  which can be solved by adding the dimension of fingerprints  that is  multimodal fingerprints  in this way  the reliability as well as location accuracy can be improved significantly  the main problem of pdr is that its cumulative error increases over time  combining pdr with geometric localization techniques such as uwb tdoa can eliminate the cumulative error and achieve a higher location accuracy  typically  the results of geometric localization system are used to calibrate the results of pdr  on the other hand  the results of pdr can be used to eliminate the incidental error of geometric localization system  for triangulation  the error sources are mainly multipath  reflection  diffraction of the signal  and nonline of sight environment  multimodal localization approaches can combine different techniques or measurements  e.g  rss  toa  and tdoa  to determine the location  when a positioning technique offers poor accuracy  another one with better performance can be chosen  for example  aoa can be used to relieve the effect of multipath and nonline of sight  nlos  to obtain higher accuracy  different from approaches above  cooperative localization is able to use the distances  neighbour relationships  and other spatial information between mobile targets to improve location estimation  cooperative localization technique can also be combined with multimodal fingerprinting  which can significantly reduce the probability of mismatch between fingerprints and further obtain better location accuracy  indoor localization systems are considered to be one of core components of mobile and ubiquitous computing environment  in such localization systems  both bayesian filtering-based approaches and multimodal localization approaches utilize mainly the measurements from wireless 8 mathematical problems in engineering table 2  comparison of different improvement strategies for location estimation  bayesian filtering multiple localization technique fusion multimodal multimodal pdr cooperative fingerprinting triangulation fusion localization spatial context fusion map spatial landmarks matching model accuracy improvement deployment effort medium excellent good excellent excellent good good excellent nil high high medium medium medium low very high applicability algorithm complexity very good good bad good average very good good very good medium medium high high high medium medium medium nil nil high general general nil nil nil hardware cost network nodes and sensors  these measurements are often regarded as the low-level context from the view of context aware system  besides  there are other higher level spatial contexts  34  such as indoor maps  landmarks  21   and spatial model  35   these contexts can be used to restrain the motion of a target and to eliminate the outliers of location estimation  thereby optimizing location estimation  recently  fusion with spatial contexts has been an important method for location estimation enhancement  if the devices have enough computation resource  we can further fuse multimodal fingerprinting with pdr and even map matching to obtain an ideal accuracy  however  the more the information is fused  the higher the algorithmic complexity as well as the cost is  higher accuracy would reduce the real time capability  when choosing a location estimation scheme  there is often a need of trade-off between accuracy and other factors  e.g  effort  applicability  complexity  and cost   table 2 demonstrates the performance comparison of different approaches to improve location estimation  4 probabilistic methods for location estimation as mentioned in section 2  the noise in measurements is inevitable due to complicated indoor environments and other factors  causing the uncertainty of location information  bayesian filtering estimates the states of a dynamic system via probabilistic technique  which is suitable to deal with the uncertainty problem caused by the measurement noise  it can be also applied to fusion of multiple sensors or measurements to achieve higher accuracy  this section begins with the commonly used bayesian filtering approaches  including kalman filers  extended kalman filters  sigma-point kalman filters  particle filters  and hidden markov models  then  a special example is provided to illustrate how to use these filters to filter out the measurement noise so as to improve location accuracy  except bayesian filtering approaches  smoothing  18  is another widely applied technology to process noise  it simply computes the average value of measurements or estimates within a sliding window  there are two types of smoothing technology  time smoothing and space smoothing  since smoothing approach is simple and easy to implement  this paper will not discuss it in depth  4.1 bayes filters  bayes filters are powerful probabilistic tools that probabilistically estimate a dynamic systems state from noisy measurements  36   in the context of positioning applications  the state can be measurements of different levels such as rsss  distances  angles  and coordinates  deduced from bayesian rules  bayes filters use new observations to calibrate probabilistic distribution  49   the basic bayesian rules can be interpreted as follows   |  =  |        2  where   represent the prior probability of  which is known previous to new evidence being available   |  /   indicates the effect of on the belief of and  |  is posterior probability  bayes filters aim to sequentially estimate such beliefs over the state space conditioned on all information included in the sensor data  assume that the state at time is represented by random variable and the sensor data consists of a sequence of observations 1  2       the uncertainty at each time step is expressed as a probability distribution over  called belief  bel    the belief bel   is defined as bel   =  | 1  2        it means the probability of a target at state given a sequence of observations 1  2       to avoid the fact that the computation grows exponentially over time  bayes filters assume the system is markov  meaning that the current state includes all relevant information  in other words  the current state depends only on the prior state 1 and the states before 1 offer no additional information  this assumption allows us to work out the belief without losing information  bayes filters use the following equation to predict the state whenever a new observation is reported  36   bel   =  | 1  bel  1  1   3  and then correct the predicted estimate using the new observation  36   bel    |  bel     4  mathematical problems in engineering 9 bayes filters are an abstract concept and only provide a framework that uses probabilistic technique to recursively estimate the state  the implementation of bayes filters needs to specify both the state model and the measurement model  except processing the uncertainty of measurements  it can also be used to fuse different measurements  section 5 will involve how to use bayes filter-based methods to combine different positioning technologies and measurements  next  we will introduce the basic ideas of kalman filters  extended kalman filters  sigma-point kalman filters  particle filters  and hidden markov models  an example based on wifi positioning technique is given to illustrate that bayes filterbased methods can be used in different levels to improve the location accuracy  4.2 kalman filters  the kalman filters  25  are the most frequently used variant of bayes filters that pursue the optimal state estimation based on the minimum-variance principle  they assume that the posterior density at every time step is gaussian and the state sequences are markov  there are two models that need to be used  state model and measurement model  the state model describes how the state changes over time while the measurement model represents the change of the state with measurement noise  to better illustrate the rationale of the kalman filter  let and indicate the sequences of the state and measurements  respectively  the corresponding state model and measurement model are as follows  state model  = 1 + v  measurement model  = +   5   d  updating the targets state using measurements and kalman gain  = +     9   e  updating the error variance matrix using kalman gain  =     10  among the equations above  and are the targets state and measurements  respectively  is the kalman gain  is the identity matrix  and is the error covariance  markoulidakis et al   50  used kalman filters to optimize the performance of wi-fi positioning system  three different options were considered  filtering of the sequences of rss measurements  filtering of the distances between the target and beacons  and filtering of coordinates of the targets  it turned out that filtering of rss measurements outperformed the two other options and especially the performance of filtering of coordinates was the worst  also  kalman filters can be used to deal with the heading evaluation of dr  47   which can combine readings from the gyroscope with readings of the compass  in this way  the drift problem of the gyroscope and the influence of metals on the compass can be eliminated  thereby achieving a more accurate heading evaluation  kalman filters are the optimal solution to the positioning and tracking problem if its assumptions hold  it has been widely applied to robot navigation  control  computer image processing  and tracking  however  the posterior density is not necessarily gaussian and in this case it does not work very well  where and are known linear functions  respectively  and v and are process noise and measurement noise  both v and are assumed to be zero-mean gaussian distributed with known covariance and  respectively  the kalman filter consists of two stages  prediction and update  in the prediction phase  the current state and process noise variance matrix are used to compute the prior estimate of next state ; in the update phase  new observations can be employed to optimize the prior estimate obtained in the prediction phase to gain improved posterior estimation  the kalman filter proceeds recursively in the order predictingmeasuring-updating  the detailed calculation steps of kalman filters are as follows  4.3 extended kalman filters  different from kalman filters  which can only deal with linear problems  the extended kalman filter  ekf  is able to process nonlinear problems by using the first term in a taylor expansion of the nonlinear function  a higher order ekf would keep further terms in the taylor expansion  but this is at the expense of additional complexity  thereby restraining its applicability  the steps of ekf are described as follows   a  utilizing the current state to predict the next state with the assumption that the state model has no influence from the noise   c  computing the kalman gain that minimizes the error covariance matrix  = 1   6   b  predicting the error covariance matrix of next state  = 1 +   7   c  computing the kalman gain that minimizes the error covariance matrix  1 =  +    8   a  employing the current state to predict the next state  1   11  =  b  predicting the error covariance matrix of next state  +  1 =  12  1  +   =  13   d  updating the targets state using measurements and kalman gain    = +   14   e  updating the error variance matrix using kalman gain   =    15  10 mathematical problems in engineering in the equations above  the symbols are similar to those of and  which are denoted as kalman filters except =   v   =1  v=0 =     =  =0 recursively worked out through the weighted statistical linear regression method  the procedures of standard spkf can be described as follows   a  initialization  0 =  0    16  0 =   0 0   0 0     18  0 =  0  =  0 v0 0   the ekf is originally used in the field of robot positioning and tracking  25   for instance  jetto et al   51  proposed an adaptive ekf for the localization of mobile robots  recently  yim et al   52  developed an ekf-based wi-fi positioning approach  which took the distances between the mobile target and wireless aps as inputs  in this way  a more reasonable state model was designed according to user motion characteristics and a better accuracy was achieved  frank et al   53  utilized a two-layer ekf in which the bottom ekf was used to process the data of inertial sensors and the upper ekf was adopted to combine the output from the bottom ekf with wi-fi positioning results  the ekf can deal with many nonlinear and non-gaussian problems  and it has been widely used in many fields  however  the ekf often approximates the probability density function  pdf  of the observed signal as gaussian distribution and does not consider the potential random variables in the process of the state linearization  instead  it only employs the first-order term of the taylor expansion of the nonlinear function  therefore  if the density is bimodal or heavily skewed whereas gaussian can never describe it well  the ekf would fail to obtain the ideal performance  54   0 =   0 0   0 0     b  computing the sigma points  =  +  +   +     19   c  calculating the weighted statistical linearization of the state transition function    2 2 =      +1| +1   +1 =0 =0  = 1   20  +1  = +1    = +1     d  updating measurements   +1| =   +1|     = 0  1      2  2 4.4 sigma-point kalman filters  unlike ekf  the sigmapoint kalman filter  spkf   26  introduces unscented transform into the framework of ekf  which considers a set of points selected from the gaussian approximation to the density  called sigma points  these points all are transmitted via the true nonlinearity and are able to capture the true mean and covariance of the gaussian random variable  the spkf is considered to be an alternative solution to the ekf since it can better deal with nonlinear/non-gaussian problems  the variants of the spkf include unscented kalman filters  ukf   55  and central difference kalman filters  cdkf   56   to better describe the spkf  the weighted statistical linear regression  wslr  is utilized to rewrite the targets state model and measurement model ; namely  = ,1 1 + ,1 + ,1  v1 + ,1   =  +  + +   +1 =  +1|  =0 2 2 =   +1| +1    +1| +1   +1 +1 =0 =0 +1 +1  21  2 2 =   +1| +1    +1| +1   =0 =0 +1 = +1 +1 1  +1 +1 +1 = +1 + +1  +1 +1   +1 = +1 +1 +1 +1 +1   17   e  computing the weighted statistical linearization of the measurement transition function  1 where ,1    ,1  and  denote parameters of statistical linearization and ,1 and  are linearization errors of zero-mean variances ,1 and   respectively  ,1 is the input matrix  all the parameters can be  = +1 +1  +1    = +1  +1   = +1 +1  +1    22  mathematical problems in engineering 11 in the equations above  and denote scalar weights  respectively  and is the dimension of the enhanced state  the spkf has been successfully applied to the positioning and tracking field  for example  paul and wan  56  used it to fuse a dynamic model of human walking with a lot of low-cost sensor readings to track 2d position and velocity ; crassidis  55  employed it to combine gps measurements with inertial measurements from gyroscopes and accelerometers to compute both the position and the attitude of a moving vehicle  the algorithmic complexity of the spkf is similar to that of the ekf  but it can accurately capture the posterior mean and covariance to the second order for any nonlinearity  although it overcomes the drawbacks of the ekf  it is sensitive to the initial value  a small error in the initial value can be amplified in the process of propagation and result in a large error in the results  to relieve the effect of initial error  the variance inflation principle can be adopted  besides  sampling strategies and sampling rate have an influence on the performance of the spkf  57   4.5 particle filters  particle filters  27  are numerical methods for approximating the solution of the filtering problem based on bayesian estimation and monte carlo sampling  the basic idea behind particle filters is to look for a set of samples approximating the posterior probability density and to replace the integral operation with the sample value to estimate the ultimate state  its calculation procedures can be interpreted as follows   a  initialization  draw a set of particles  0  =1 according to the initial probabilistic density  0  and set the weight for each particle to 1/   b  sampling  draw   =1 according to the density function    =1  | 0:1     23   c  weight computation  the weight of each particle is updated as = 1  |   | 1   | 1  1     24  normalizing the weights  = =1   25   d  state estimate  the probabilistic distribution  | 1   after filtering can be approximated as  | 1     ;  26  =1 thus  the ultimate state can be written as =  =1  27   e  resampling  a common problem encountered by the particle filter is the degeneracy phenomenon ; that is  all but one particle will have negligible weight after a few iterations  resampling is an effective method to address this problem  which usually eliminates particles with small weights and concentrates on particles with large weights  there are many resampling strategies  58  59  such as stratified resampling  residual resampling  and systematic resampling  there are a number of variants of particle filters such as auxiliary particle filters  60   regularized particle filters  61   adaptive particle filters  and local linearization particle filters  particle filters have been widely used in outdoor or indoor positioning  navigation  and tracking  for instance  gustafsson et al   62  developed a particle filter-based framework that integrated map matching  gps  and cellular technologies  which could be applied to navigation  tracking  and anticollision of cars as well as aircrafts  evennou and marx  31  developed a structure that consisted of a kalman filter and a particle filter to combine pedestrian dead reckoning and wi-fi signal strength measurements  the kalman filter provided real time position and inferred position when a user was in the wireless blind areas  while the particle filter was used to correct the drift on the inertial sensors  6365   as one of the most promising filters for indoor location estimation  the key advantage of particle filters is the capability to describe arbitrary probability densities and they have been widely accepted  4  8  10  13  17  19  22  27  6672   particularly  they are suitable for processing non-gaussian  nonlinear problems and able to converge to the true posterior if there are enough large samples  which is unfulfilled by kalman filters  however  the performance of them depends strongly on the number of samples used for filtering  to some extent  the more the samples  the higher the accuracy  but this results in the rise of the computational complexity  in the worst case  the complexity grows exponentially in the dimensions of the state space  10   in addition  there is the degeneracy phenomenon after a few iterations  which implies that we need to choose good importance density or use resampling strategies  overall  there is a need of trade-off between the efficiency and the real time capability  in particular  inappropriate methods may lead to the bad performance  4.6 hidden markov models  the hidden markov model  hmm   73  is developed based on the markov model  in which each state represents a physically observable symbol  compared with markov models  which need each state to be directly observed  hmm has no such restrictive requirement and assumes that an observation is a probabilistic function of hidden states  due to the fact that physical states of many applications are unobservable  hmm is more applicable than traditional markov models  a typical hmm is shown in figure 6 where we can see that there are five key components   a  =  1  2        a set of hidden states  the state at time is denoted by  12 mathematical problems in engineering transitional probabilities aij = p  xt+1 = sj |xt = si  evolution of states x1 xk xt1 xt emission probabilities bj  t  bj  t  = p  o  t  |xt = sj  observables time o  1  o  k  o  t 1  o  t  t1 tk tt1 tt figure 6  hidden markov model  76    b  =  1  2        a set of observations  the observation at time is denoted by   c  =    the transition probability matrix  where indicates the transition probability from state to state  =  = | =   1    28   d  =    the emission probability matrix  where indicates the emission probability at time from state  =  = | =   1  1   29   e  =    the initial state distribution  1  let =     represent the parameters of a hmm and =  1  2       is a sequence of observations ; there are three basic problems   i  evaluation problem  compute the probability  |   given the hmm and the observation sequence ;  ii  decoding problem  work out the most likely sequence of hidden states that produced this observation sequence  given the hmm and the observation sequence ;  iii  learning problem  how to adjust the model parameters to maximize  |   in the context of location estimation  a hidden markov model describes the temporal correlation of a users positions  the state corresponds to location and the observation depends only on the current position  kontkanen et al   74  demonstrated the feasibility of hmm to track the target in the areas of wireless radio networks  when the target was moving at a normal speed  it was possible to observe a series of continuous  dynamic measurements  upon which the location estimation problem could be modelled into a function of time  the location of a target at the current time step only relied on that at the previous time step  in this way  it significantly reduced the error of location estimation when performing dynamic tracking  wallbaum et al   75  used the hmm to improve the accuracy of wi-fi positioning technology  in their research  wi-fi fingerprints were considered as hidden states and rss measurements as observations  this was enhanced by  76  77   who further introduced pdr to accurately generate the state model  different from other researches  park et al   28  took the reference points of wi-fi fingerprints as the state of hmm and eliminated a large part of location error  in comparison with other bayesian filtering techniques  the hmm has its special advantages  it is more suitable for the fusion of different types of measurements and/or localization approaches  this is because kalman filters or extended kalman filters have the gaussian assumption  which conflicts with some positioning measurements  77   also  the efficiency of hmm is higher than particle filter which requires high computation resources  in particular  without any restrictions on the motion of the target  the hmm is more applicable to represent the complex motion of indoor targets  77   4.7 applications of bayesian location estimation  bayesian filtering is an effective tool to process the measurement noise as well as fuse different types of measurement or localization techniques  it has been demonstrated that the measurement noise can be processed in different levels  50   such as rss  distances  and coordinates  as shown in figure 7 this subsection provides a filtering framework for location estimation  which does not rely on a particular filter  let represent the state of the target at time step and is the corresponding observation  thus  the state model and measurement model can be written as follows  state model = 1 +   30  measurement model = +   31  where and denote the state transition matrix and measurement matrix  respectively  and are zero-mean gaussian random variables  taking wi-fi positioning technique as an example  we introduce how to use the filter in different levels and to describe the corresponding models  in the process of wi-fi fingerprint positioning  the rss measurements between the target and the beacons are collected at first ; then compute the distances between the target and the beacons using typical rss-distance model or curve fitting ; finally  the coordinates of the target can be calculated via trilateration or multilateration  the state models and measurement models for three filters  rss filter  distance filter  and coordinate filter  are presented in the following   1  rss-based filter  for rss filter  the state vector and observation at time are written as rss  1   rss  2    rss  3      =     v  1    rss vrss  2    vrss  3    rss  1   =  rss  2     rss  3    32  mathematical problems in engineering 13 measurementdistance function measurements  rssi/toa/aoa  trilateration /multilateration distance pairs layer 1 filter coordinates layer 2 filter terminal coordinates layer 3 filter figure 7  applications of filtering algorithm in location metrics of different levels  where rss     = 1  2  3  indicates the actual rss of the target to the th beacon at time and rss    represents the corresponding observation  vrss    is the rate of the change in the rss between the target and the th beacon  the corresponding matrices in the state model and measurement model are as follows  1 0 0 0 0 0   0  =    0  0   =   3     v  1   v  2    v  3     34   1   =   2      3   1 0 0 0  0 1 0 0      0 0 1 0 0   0 0 0 1 0 where    denotes the observed  computed by the rssdistance model  distance between the target and the th beacon and v    is the rate of change in the distance  the matrices   and have the same value as in the rss filter   0 0 0 0 0 1  0 0 0 0   0  =     0 using the rss-distance model  the corresponding state and measurement can be revised as  1    2    3  coordinate-based filter  if the input of the filter is coordinates  the filter is called coordinate filter  it can be kalman filter  particle filter  or other filters  for such filter  the state vector and measurement vector are described as       =  v    35  v   0 0  0 0      0 0   0  0 0    =      1 0 0 0 0 0 where is a vector consisting of the coordinate and speed of the target and is the observed coordinate  the corresponding matrices    and  are given as =  0 1 0 0 0 0   0 0 1 0 0 0  33  where denote the time interval of sampling  after filtering of rss  the ultimate coordinate can be worked out by trilateration  where the distances required can be obtained using typical rss-distance model   2  distance-based filter  if the filter is used to deal with distances between the target and beacons that are obtained 1 0 =  0 0 0 1 0 0 0 1 0 0 0 =  0 0 0   0 0   0 1 1 0 0 0 =    0 1 0 0  36  14 5 hybrid methods for location estimation as analyzed in section 2.2  each type of measurement has its own inherent error characteristics  which means that the accuracy improvement of one single technique is always limited  comprehensively  considering the cost  infrastructure  mobile device  and accuracy of localization systems  none of the techniques and algorithms can fulfill the requirements of all the applications  on the other hand  with the development of mobile communication technologies  wireless infrastructures are increasingly available in indoor environments  and many different types of smart mobile devices and sensors are becoming ubiquitous  this leads to the constant emerging of novel applications  such as mobile social networks  in this case  it is highly likely that there exist different types of wireless networks or signals in the same environment  for example  a factory would use uwb networks for the location-based service while wi-fi networks for the internet connection service  besides  modern mobile devices are equipped with wireless modules  e.g  wi-fi and bluetooth  and sensors  e.g  accelerometers  gyroscopes  compasses  and barometers   this has strongly driven the development of hybrid localization techniques combining heterogeneous measurements and approaches  the hybrid methods can exploit their positive aspects and limit the impact of their negative aspects and hence significantly improve the location estimation  this section reviews some major hybrid localization methods  in this paper  hybrid localization methods are classified into four categories  multimodal fingerprinting  triangulation fusing multiple measurements  the combining wireless positioning with pedestrian dead reckoning  and cooperative localization  5.1 multimodal fingerprinting  a large number of indoor localization techniques adopt fingerprint matching as the basic scheme of location estimation  this process normally consists of two stages  the offline training phase and the online location estimation phase  the offline phase is also called training phase  in which a radio map of the area in study is built  signal characteristics  e.g  rss  from multiple beacons are registered at reference points  rps   the online phase is also called localization phase  in which the mobile devices collect signal characteristics in real time and estimate its location through best matching between the signal metrics being collected and those previously registered in the radio map  together with no special demands on infrastructures and mobile devices  the characteristics of low cost and high accuracy make fingerprinting a very popular localization technique and well-studied  as mentioned in section 2.2.2  an ideal fingerprint signal source should be recognizable and stable  the most popular fingerprint signal for indoor localization is wi-fi rss  actually  other kinds of rss measurements  e.g  bluetooth  fm  dtv  and gsm   magnetic strength  and even ambient features  e.g  sound  light  and color  can also be considered as fingerprints  one common solution for improving fingerprinting is to enhance the recognition rate of fingerprint mathematical problems in engineering signals  since fingerprint signals present a great difference at distinct positions  extending the dimension of fingerprint signals can dramatically improve the recognition rate  in this section  the multimodal fingerprinting techniques fusing wifi rss with other fingerprint signals are described as follows  5.1.1 combining wi-fi with magnetic strength  wi-fi signal has global recognizability  because the mac address of every ap is unique worldwide  however  due to the signal fluctuation  the local recognition rate of wi-fi rss is normally low  wi-fi rss-based fingerprinting can only acquire an accuracy of about 3 m in contrast  magnetic strength has relatively high local recognition rate  in particular  when there are metals and electric devices around  magnetic fingerprinting can achieve high localization accuracy  angermann et al   78  drew a conclusion through detailed experiments that the resolution of magnetic signal could reach centimeter-level accuracy  however  it could not be recognized globally  the fusion of wi-fi and geomagnetic signal can make up the drawbacks of both sides  realizing fine-grained localization accuracy globally  79   geomagnetic fingerprints have two forms  one is the triple composed by magnetic strength sensed from the three-axis magnetometer  the other is the geomagnetic magnitude at a certain location  the former considers the attitude of mobile devices when collecting fingerprints  while the latter does not need to consider  this is because no matter what the attitude of mobile devices is  theoretically  the geomagnetic magnitude of a location does not vary  the two forms can be given as follows  1 =   1  rss1    2  rss2         rss   mag  mag  mag   2 =   1  rss1    2  rss2         rss    37  magnetic   where  1  rss1  represents that the signal strength of 1 is rss1 and mag  mag  mag are magnetic strength sensed from three axes of magnetometers  respectively  magnetic is the geomagnetic magnitude  5.1.2 combining wi-fi with other opportunistic signals  opportunistic signal here refers to these signals existing in our environment  which are not specially created for positioning purpose  such as fm  gsm  dtv  and bluetooth  there is no essential difference between wi-fi and these opportunistic signals when they act as fingerprints  these wireless signals are sent by globally unique beacons and then received by mobile devices  during this process  the mobile devices can extract some useful information  such as rsss  signal to noise ratio  snr   multipath  and distances  which all can be used to generate fingerprints  29   moreover  wifi fingerprint database can be expanded through adding its dimension using these opportunistic fingerprints  as a result  the accuracy of location estimation can dramatically be improved  29  40  80   figure 8 shows the architecture of mathematical problems in engineering 15 wi-fi ap 1  a  training phase wi-fi ap 2 wi-fi ap n rpi  i = 1  2      l  bluetooth beacon1  x  y  1  wrss1  wrss2  wrss  brss1  brss2  brss   x  y  2  wrss1  wrss2  wrss  brss1  brss2  brss   x  y  3  wrss1  wrss2  wrss  brss1  brss2  brss  bluetooth beacon2  x  y  l  wrss1  wrss2  wrss  brss1  brss2  brss  bluetooth beaconm  b  positioning phase  ?  ?   wrss1  wrss2      wrss  brss1  brss2      brss  positioning algorithm  x  y  figure 8  architecture of multimodal fingerprinting approach  fusing wi-fi and bluetooth   multimodal fingerprinting fusing wi-fi with bluetooth  the corresponding fingerprint form is given as follows  =   1  rss1    a2  rss2         rss    1  measurement1    2  measurement2        38    measurement    where  1  rss1  represents that the signal strength of wi-fi 1 is rss1  refers to bluetooth beacon  and measurement denotes the corresponding measurement signal  apart from the above mentioned opportunistic signals  some ambience features such as light  color  and even background sound can also be utilized to enhance fingerprinting  2  42   as an improvement scheme for location estimation  multimodal fingerprinting has no special requirements for infrastructures and just the need to collect available signals from surrounding environments  combining different types of fingerprints together to generate multidimensional fingerprints can considerably improve the recognition rate of fingerprints and therefore the localization accuracy  however  the disadvantages of all the fingerprinting approaches are that the training process for collecting fingerprints is laborintensive and time-consuming  although researchers have proposed many unsupervised techniques for training fingerprints  most of them highly depend on the availability of finegrained floor plans or initial positions of users  therefore  these solutions are not always ideal for many applications  5.2 triangulation fusing multiple measurements  triangulation uses geometric properties of the triangle formed by the target device and the beacons to estimate location  and it can fall into two categories  lateration and angulation  lateration measures the distances between mobile targets and multiple beacons  which are used to estimate the position of mobile targets  therefore  lateration is also regarded as a ranging technique  while angulation calculates the position through measuring the angles between mobile targets and multiple beacons  5   the coexistence of heterogeneous networks in the environment enables users to simultaneously obtain various triangulation measurements  the most common signal metrics of ranging approaches are rss  toa  tdoa  and time of flight  tof   in particular  rss has become a standard parameter of most wireless devices  and it can be easily acquired through pervasive devices  for instance  nanoloc  14  81  is able to obtain tof and rss at the same time  however  under different wireless channels and network conditions  tdoa  toa  aoa  and rss have different error characteristics  and correspondingly different localization algorithms will be adopted  in general  localization techniques based on one single measurement can not reach a satisfactory accuracy  particularly in nlos environments where positioning results tend to present a larger deviation  theoretically  hybrid localization techniques  36  49  82   such as toa and rss  30  8385   tdoa and aoa  86  87   rss and aoa  88  89   toa and aoa  9092   and fusing multiple measurements can overcome the shortages of localization technique with single measurement  there are several typical measurement fusion models explored as follows  the most common fusion models of multiple measurements include least squares  ls  or weighted least squares  wls   86  89  90   maximum likelihood  ml   30  88   bayes filters  87   and taylor series  85   each model provides different trade-offs between the positioning accuracy and complexity  the general framework of multimodal triangulation is shown in figure 9  16 mathematical problems in engineering uwb wlan css zigbee wireless signals rss path loss distance models tdoa where dist  x|1  represents the euclidean distances between the mobile target and all the beacons at time  for the th beacon bayes filters sl/wsl ml toa refined location taylor series aoa fusion methods depending on the way of measurements fusion  multimodal triangulation can be divided into two basic categories  fusion between distance measurements and fusion of distances and angle measurements  because each category has similar fusion methods  we just consider the fusion of tdoa and aoa and the fusion of rss and aoa as the examples  chan and ho  93  proposed a widely used fusion algorithm based on tdoa  which could achieve a great positioning accuracy in the gaussian noise environment  particularly  the fusion method of tdoa and aoa is based on chan and hos algorithm  by adding an angle measurement error in the original tdoa error equations to form a 2d nonlinear equation set  the estimated location of targets can be computed using twice the least squares  ls   86   the fusion algorithm of rss and toa tends to combine the distance metric obtained by using rss and that acquired by using toa between mobile targets and beacons  in a sense  this equals increasing the number of beacons in the environment  i.e  rss and toa metrics extracted from different beacons  or increasing the dimension of observation values  i.e  rss and toa metrics derived from the same beacon   84   the following is the specific fusion algorithm of rss and toa by employing extended kalman filter  suppose that there are uwb beacons and zigbee beacons in the environment and rss is obtained from zigbee beacons  while toa is obtained from uwb beacons  observation vector of extended kalman filter can be defined as zdist  zrss     41   x|1  = 0 2 10log10   42  2   +   0   where 0 represents the signal power received from a distance 0 and is the path loss exponent  the hybrid jacobian matrix can be defined as h =  hdist  hrss     43  where hdist  is the jacobian matrix of dist  x|1  which can be estimated with a priori state vector x|1  thus  it can be defined as hdist  1 1  dist    dist    0 0    1 1      =       0 0  dist    dist      44  where hrss  is the jacobian matrix of rss  x|1  and is given as  39  hrss  = where zdist  =  1  2    and zrss  =  1  2    denote the distance observation vector obtained by toa and the rss observation vector from zigbee beacons  respectively   represents the estimated distance between the mobile target and the th uwb beacon at time   is the rss measurement between the mobile target and the th zigbee beacon at time  the vector  |1  in this hybrid algorithm is given as dist  x|1   x|1  =    rss  x|1  2 rss  x|1  is rss between the mobile target and all the beacons at time   x|1  is the rss that mobile target receives from th zigbee beacon  expressed in dbm  rss is modeled by the log-normal shadowing path loss model and is defined as follows  figure 9  architecture of multimodal triangulation  z =  2 dist  x  x  =   +    40  10 ln  10  1 1   dist2    dist2    1 1            2 2  dist    dist    0 0              0 0   45   the hybrid covariance matrix r of the observation vector is defined as r =  rdist  o o rrss     46  mathematical problems in engineering 17 signals of opportunity wlan uwb measurement processing distance/angle/location step detector step length estimator sensors accelerometer step length bayes filters refined location gyroscope kalman filter  heading estimator  compass heading figure 10  architecture of pdr-based hybrid location estimation  where o and o represent zero matrices with sizes and  respectively  rdist  is the covariance matrix of uwb distance measurement matrix  which is denoted as 2 2 rdist  = diag  1      47  where 2  is the initial variance of the distance measure ment from th uwb beacon  rrss  indicates the covariance matrix of zigbee rss measurements  which is represented as 2 2 rrss  = diag  1      48  2 where is the initial variance of the shadowing for the  th zigbee beacon  the drawback of multimodal triangulation is that it relies too much on positioning hardware  although the fusion of tdoa and aoa is theoretically feasible  wireless network devices in real world that can support tdoa and aoa measuring are rare  in particular  rss  toa  and tdoa ranging and aoa measuring are easily affected by various factors such as multipath and nlos  it is  today  still difficult to eliminate these effects  in general  when choosing two or more techniques and/or measurements for fusion  there should be at least one kind of techniques or measurements which are not affected by multipath and nlos  for example  we usually combine triangulation with pdr  94  95  or fingerprinting  because pdr and fingerprinting are less affected by multipath and nlos  5.3 hybrid location estimation by fusing pdr  pdr is a self-localization and navigation technique  which can be realized on current mobile devices  e.g  smartphones and tablets  equipped with imu  from a known position  we can infer users location at next step by detecting users step events and estimating the length and heading of each step  pdr is a relative localization approach  and current location estimation depends on the prior estimation  although each estimation might have quite small error  the cumulative error grows quickly over time  leading to the fact that pdr is not suitable for long time tracking tasks  in contrast  each location estimation from absolute localization techniques  e.g  wi-fi  uwb  and magnetic fingerprinting  has nothing to do with the previous positioning results  however  the localization results of the absolute techniques during a short time may dramatically jump for a variety of reasons mentioned above  for example  two successive estimation results  e.g  in a 3 s interval  may present a difference at ten or dozens of meters  which is obviously impossible for normal people movements  the combination of pdr and absolute localization techniques can complement each other  therefore  it can reduce the possibility of jumping estimations and obtain accurate and reliable localization results even during a long time tracking  besides  it can work functionally even when mobile targets walk into the blind area of wireless signal  for example  tunnels  where other localization techniques almost do not work  the methods for fusing pdr and wireless localization techniques are commonly based on bayes techniques  such as kalman filters  96   particle filters  64   and the hmm  76   the measurements of pdr  including step length and heading  are normally used to generate the motion model in bayes filter to predict targets location  the metrics such as distance and location estimated from wi-fi and uwb  66  94  96  act as the observations  the typical architecture of pdr-based hybrid location estimation is shown in figure 10 next  we give a detailed example of fusing pdr and wifi fingerprinting with particle filter  the state vector of targets is denoted as =    consisting of their coordinates and headings  the measurement model and state model in particle filter are given as follows  measurement model =   +   49  where is the step length at time which is calculated with accelerometers  is the angular velocity at time which is measured with gyroscopes  is the estimated location by wi-fi fingerprinting at time  and represents the gaussian 18 mathematical problems in engineering random process  since the heading is filtered by a kalman filter  the orientation change can be obtained directly from the kalman filter  state model  63  1 + cos  1 +  =  1 + sin  1 +     50  1 + the computational steps of particle filter are described as follows   a  initialization  calculate the initial position and heading of targets with wi-fi fingerprinting and compass measurement  respectively   b  prediction  sample particles according to the state model   c  weight update  update the weight of each particle with the following equation  31   = 1 2 1   exp  2 22    51  where is the location of the th particle at time and is the confidence of measured location with wi-fi fingerprinting  the smaller will be  the more confident the user is at the measured location  the weight of all particles is normalized with the following equation  = =1   52   c  state estimate  the state probability distribution  | 1   after filtering can be approximately represented as  | 1     ;  53  =1 then  we are able to obtain the position estimation with the following equation  =   54  =1 the challenge for pdr-based hybrid location estimation lies in the correct estimation of users movement heading  because heading errors affect the pdr estimation the most  as we have mentioned earlier  estimated heading is not always coincident with users moving heading due to the tilt of mobile devices  which is especially the case for smartphones  many research works assume that users hold the phones in hands and keep the -axis of phones coincident with users moving heading  96   actually  this assumption is very demanding because users may place their phones in any attitudes  such as holding them in hands  putting them in pockets  or keeping them near the ear for calling  also  it is impossible for users to keep their phones in one single attitude all the time  and the changes between different attitudes may occur frequently  to address this problem  rai et al   64  proposed a method through using the spatial constraints to mitigate the negative effects caused by the tilt of mobile devices  but it is not easy for the public to get such a specific indoor floor plan  how to correctly estimate the walking heading is the key problem the pdr-based fusion solution is faced with  5.4 cooperative location estimation  cooperation between peer nodes  in wireless sensor networks  is used for improving the performance and the coverage of networks  recently  cooperation technique is introduced to the navigation and positioning field to improve the accuracy of traditional localization techniques  23  67  97   depending on the requirements for the infrastructure  the traditional indoor localization techniques fall into two basic types  infrastructure-based  e.g  wi-fi  uwb  and zigbee positioning systems  and infrastructure-free  e.g  pdr  localization  the former needs to deploy wireless beacons and depends on the measurements between the mobile target and beacons to localize  such as the signal strength  distances  and angles  infrastructurefree localization is also called self-localization  in which the mobile device collects the sensor data from the imu sensors embedded in it and estimates its location  however  both of the two common localization techniques ignore the measurements between mobile targets  in cooperative localization  mobile targets within the communication range can interact with each other to obtain their spatial relations  for example  proximity and distances  such spatial information between neighboring nodes can contribute to improve the localization accuracy and robustness  moreover  in infrastructure-based localization  when mobile targets do not sense adequate beacons  e.g  the number is less than 3   neighboring nodes can be regarded as the alternatives of missing beacons and thereby extend the coverage of localization system  as shown in figure 11  the traditional infrastructure-based localization approach can only locate a limited number of mobile targets  because other targets can not receive measurements from adequate enough beacons  in contrast  in cooperative localization  all the mobile targets can exchange measurements with their neighboring nodes within the communication range and then use these measurements to enhance location estimation  there are two basic parts in cooperative localization systems  traditional localization and peer-to-peer communication  the cooperative localization problem can be represented as follows  estimating a parameter standing for the locations of all mobile targets from an observation  here  denotes not only the measurements between mobile targets and beacons but also that between mobile targets  typically  cooperative localization obtains the distance measurements  97  among peers through a variety of signal metric techniques  such as rss-based signal propagation model or mathematical problems in engineering 19 anchor node anchor node mobile node mobile node  a  traditional localization mode  b  cooperative localization mode figure 11  traditional localization and cooperative localization  tdoa  others would capture the social relationships  e.g  encountering   20  between mobile targets to improve localization  in the cooperative localization system  the traditional localization techniques could be self-localization  67  98  99  or infrastructure-based localization  e.g  wi-fi aps-based  100  and uwb beacons-based  101    we categorize cooperative localization as bayesian or non-bayesian  deterministic   23   depending on whether or not we consider as a realization of a random variable  5.4.1 non-bayesian estimation  non-bayesian estimators treat a targets location as an unknown deterministic parameter  and it includes the least squares  ls  estimator and the maximum likelihood  ml  estimator  the ls estimator assumes =   +  where   is a known function and is the measurement error  the ls estimate of is obtained by solving the following optimization problem  2 = arg min ls     55  the ml estimator considers the statistics of noise sources and maximizes the likelihood function  = arg max |  |   ml  56  raulefs et al   102  proposed an uwb cooperative localization solution  in which particle filter was used to track targets locations  levy flight model was used to represent the motion model of users and the initial position was estimated with uwb beacons  during the tracking process  the distances between mobile targets and beacons as well as other peer nodes could be obtained and used to compute the location of a mobile target through nonlinear weighted least squares algorithm  the estimated location was then treated as the observation of particle filter  vaghefi and buehrer  103  put forward a long term evolution  lte  based cooperative localization solution  the targets could not only receive observed time difference of arrival  otdoa  of the noncooperative signal from lte beacons but also interact with peer nodes to obtain round-trip time  rtt  of the cooperative signal  finally  ml was used to fuse the two kinds of measurements to accurately calculate the location of targets  liu et al   100  adopted the deterministic cooperative localization method  in which acoustic ranging technique was introduced to obtain the accurate distance among the peer nodes  also a distribution graph of mobile targets was created  the distribution graph of mobile targets was then matched with the distribution graph of fingerprints to improve the localization accuracy  this algorithm representatively used the spatial constraints between mobile targets to reduce the probability of erroneous fingerprint matching  5.4.2 bayesian estimation  bayesian estimation uses probabilistic techniques to compute targets locations  which treats the location as a realization of a random variable with an a priori distribution    bayesian estimation methods can be generally divided into two types  the minimum mean squared error  mmse  estimator and the maximum a posteriori  map  estimator  mmse tries to minimize the estimation error as follows  mmse = |  |    57  20 mathematical problems in engineering the map estimator finds the mode of the a posteriori distribution  and it can be treated as the regular ml estimator  map = arg max |  |    58  tseng et al   67  proposed a self-localization-based cooperative scheme where the mobile target obtained the noncooperative measurements  toa  between itself and beacons and cooperative measurements  toa  between itself and peer nodes  particle filter was used to track the mobile users and these noncooperative and cooperative measurements were treated as the input of the observation model  stromback et al   104  achieved tracking of mobile targets through pdr and the distance between mobile targets obtained by the wearable uwb modules  these two kinds of signal metrics were fused by the kalman filter  and the the accuracy was improved  li et al   105  proposed a similar pdr-based cooperative localization approach  in which pdr was used for self-tracking and acoustic ranging technique was used to detect proximity  when the proximity of two mobile targets was detected  which meant that their current locations would be equal  the pdr tracking results of two targets then were calibrated  it could eliminate the accumulative error caused by tracking a single target with pdr  this process was also implemented with the kalman filter  jun et al   20  implemented a cooperative localization solution from the perspective of social sensing  by utilizing the encountering and nonencountering events in social activities to constrain users possible locations  the accuracy of existing localization techniques such as wi-fi fingerprinting and pdr could be enhanced  the encountering and nonencountering events were detected with the built-in wi-fi modules  finally  users location is estimated with probabilistic methods  cooperative localization techniques depend on the interaction and information exchange between mobile targets  however  in the places with a high density of mobile targets  such as airports  the communications between each pair of mobile targets would bring great pressure to the network and even give rise to network congestion  moreover  this would significantly increase the power consumption for mobile targets  on the other hand  when determining the location of each mobile target  cooperative localization algorithm commonly needs to refer to spatial information between current node and its neighboring nodes  more often  in order to obtain better localization results  we need to take into account the globally spatial distribution of all nodes  thus  the computational complexity of cooperative localization algorithm may be very high  in general  in order to measure the spatial information between mobile targets  mobile devices require the access to the physical processing units or the additional functional modules  these requirements would not be met in many applications  for instance  most of commercial smartphones do not allow average users to access some particular underlying hardware  such as the bottom layer interfaces of acoustic sensors  which is necessary to acquire the distance between two smartphones  15   6 location estimation by fusing spatial contexts although hybrid localization can significantly improve location estimation  they have the particular demands for infrastructures and mobile devices  especially for sensors and wireless protocols  in many cases  these requirements can not be met at all  too much dependence on positioning hardware would limit the use of hybrid schemes in many applications  thus  it is necessary to make use of the context information derived from nonlocalization devices in order to improve the location estimation  in fact  on the one hand  the complex and constrained indoor spaces give rise to so much troubles for localization  on the other hand  they also provide the rich spatial contexts for enhancing localization results  34   these spatial contexts typically include the indoor structures  e.g  rooms  corridors  and stairs   facilities  e.g  desks  doors  and elevators   and various landmarks  e.g  corners and signal blind areas   in particular  they can be used to constrain mobile targets movement and/or calibrate localization results and  therefore  eliminate some erroneous estimation results  currently  fusion with spatial contexts has become an important method for improving location estimation  6.1 map matching-aided estimation  indoor maps  the main carrier of spatial contexts and the foundation of indoor lbs applications  are now widely used to aid indoor localization  this process is also called map matching  map matching is first applied in the intelligent transport system  its   in which the spatial road network is used to determine the spatial reference of the vehicles location after the coarse location is obtained from traditional positioning technologies such as gps or pdr  the main purpose of map matching is to identify the correct road segment on which a vehicle is traveling and to determine the vehicle location on that segment  106   the assumption of this algorithm especially is that the vehicle is constrained to a finite network of roads  obviously  this is valid for most vehicles under most conditions  although problems may be encountered in off-roadway situations such as car parks or private lands  outdoor map matching techniques can be divided into three basic types  geometric matching  topological matching  and probabilistic matching  in addition  some filtering algorithms  e.g  particle filters or extended kalman filters  often are utilized in the matching  a geometric matching algorithm makes use of the geometric information of the spatial road networks by considering only the shape of the links  instead of the relationship of the links  this algorithm can be further divided into three subtypes  pointto-point matching  point-to-curve matching  and curve-tocurve matching  107   topological matching makes use of the geometry as well as the connectivity and contiguity of the links  108   the probabilistic matching requires the definition of an elliptical or rectangular confidence region around a position obtained from a navigation sensor  typically  this region can be obtained based on gps positioning results and its error variance  then  this region will be superimposed on the road network to determine a road segment on which mathematical problems in engineering the vehicle is traveling  the road networks or segments of outdoor environments mainly contain the properties of width and length  in contrast  indoor environments have a completely different scale  and the internal structure is also more complicated  also  most of the indoor localization applications are pedestrian-oriented and other slow moving targets  compared with the fixed movement patterns of cars on the roads  which is always along the road direction  humans indoor movement behaviors have high randomicity and are not unpredictable  in sum  indoor map matching algorithm has a large difference from that of the outdoors  and next we will explore the indoor map matching techniques in detail  indoor environments and outdoor environments have similar spatial constraints  which can be used to rule out some incorrect positioning results  thereby improving the accuracy of traditional positioning techniques  theoretically  the estimated results of targets could be anywhere that the positioning infrastructure covers  actually  it is impossible for targets especially pedestrians to be at some specific places due to the constraints of indoor spaces  moreover  indoor spaces are typically divided into rooms  corridors  stairs  and other building structures  for instance  it is unreasonable that the estimated location is in the area occupied by obstacles  if two consecutive estimations with 1 s interval cross a wall and they are far away from the nearest exit  e.g  door  of the wall  we think this kind of trajectory is incorrect  similarly  indoor map matching methods can also be divided into three categories  point-to-point matching  geometry   trajectory matching  topology   and bayesian methods  point-to-point algorithms match the estimated coordinate points with the locations of indoor environments based on floor plans  the most typical point-to-point algorithm is the landmark matching  21   which first observes some sensor data or detects users activities and then calibrates targets locations to some landmarks  such as visible landmarks  e.g  elevators  stairs  and corners  or virtual landmarks  e.g  the spot with an unusual magnetic or wireless signal fluctuation   landmarks-based localization is a relatively new technology  which involves a wide range of background knowledge  so we will elaborate it in section 6.2 trajectory or topology matching usually makes use of the geometry and topology information of corridors  corners  and rooms  which is matched with captured trajectory to obtain a global optimal estimation  lan and shih  109  inferred the users last-visited corner by calculating the geometric similarity between the user trajectory and that of the floor plan  to be specific  the geometric similarity between two graphs was estimated by comparing their shapes  vertex angles  and relative edge lengths  in this way  map matching could calibrate pdr errors caused by gyroscopes  park and teller  110  proposed the concept of motion compatibility for indoor localization  assuming that users initial locations were unknown and they walked with smartphones in the indoor space  after a period of time  a trajectory would be generated and a sequence of user motions such as walking  turning  or opening the doors were also detected along the trajectory by using the users inertial sensors  finally  the floor path whose 21 activities were best matched with the sensed activities was regarded as the estimated trajectory  in fact  a more effective method is to use the bayesian techniques to reduce uncertainty of the location estimations that violate the space constraints  such as walking through walls or obstacles  bayes filters  e.g  kalman filters  particle filters  or hmm  are the most commonly used techniques for fusing spatial constraints or contexts  32  111   to illustrate  we take particle filter as an example to introduce the basic fusion approach  in which space constraints are mainly used for updating the weights of particles  if the predicted location of a particle is considered to be invalid  the weight of the particle will be assigned to 0 also  we should make sure that newly generated particles are not in the invalid areas when initiating and resampling particles  resides in invalid areas  0  | 1  =   59   1  otherwise   particularly  widyawan et al   68  proposed a backtracking particle filter for fusing map matching and pdr  which mainly used the historical trajectories of particles to improve estimations  if particle is invalid at time  the previous state estimates at time can be refined by removing the invalid particle trajectories  this is based on the assumption that an invalid particle is the result of a particle that follows an invalid trajectory or path  obviously  the recalculation of the previous state estimation without invalid trajectories will facilitate better estimates  if elevators  stairs  and other vertical passages are represented in the maps and barometers are used to measure the altitude of the building floor  13   not only can we refine the 2d location estimations but also we can refine 3d localization results  in addition to refining localization accuracy  map matching can also be used to calibrate the error of heading sensors  e.g  the compass and gyroscope   li et al   65  used an enhanced particle filter to model users states  including the position  step length  and heading  when tracking users in corridors  the most likely reason for particles to cross walls is the heading estimation error rather than step length model error  therefore  the corresponding particles are removed and we only resample the heading for newly generated particles while the step length model remains the same  bao and wong  32  used map matching to improve the localization accuracy and calibrate the error of moving heading  the algorithm first determined if users were walking on corridors and then the heading of corridors was utilized to calibrate the moving heading of users  point-to-point matching is simple and has high operation efficiency  which can be treated as a search process  yet it is sensitive to the recognition rate of landmarks  and incorrect matching may result in the bigger localization errors  additionally  it is difficult to correctly match users current location to one of two specific locations being near each other  e.g  two corners with approximately equal angles and two locations with an unusual magnetic fluctuation   trajectory matching considers more geometric and topological information  it has better robustness and smaller 22 matching error than point-to-point matching  though the algorithm complexity is higher  the biggest weakness is that its real time capability is poor because the matching process starts only when the walking trajectory becomes long enough  map matching algorithms based on bayesian theory can finely represent the probability of each location and update the probability with the spatial constraints in maps  compared with point-to-point matching and trajectory matching which use spatial contexts in a coarse-grained level  bayesian approaches obviously can achieve better localization accuracy and high real time ability  however  they are computationally expensive  concerning this issue  xiao et al   112  proposed a lightweight map matching algorithm  which replaced bayesian techniques  e.g  kalman filters  particle filters  and hmm  with conditional random field  crf   to fuse multiple localization techniques  e.g  wi-fi  bluetooth  and pdr  and the floor plan  unlike existing techniques that model the problem using directed graphical models  the proposed algorithm used an undirected graphical model which was particularly flexible and expressive  crf allowed a single observation to be related with multiple states and multiple observations to inform a single state  therefore  it could express the extent to which observations support not only states but also state transitions  experiments showed that crf was more computationally efficient than traditional techniques and it was able to accurately track the location of a user from accelerometer and magnetometer measurements only  map matching can significantly improve the localization accuracy  moreover  there are no additional requirements on mobile devices and infrastructures except a digital map  therefore  among many studies  map matching is always an indispensable component of optimizing methods for indoor mobile location estimation  however  detailed indoor maps in many environments may not always be readily available  on that issue  simultaneous localization and mapping  slam  and crowdsourcing techniques  113115  have been used to automatically construct reliable indoor maps  6.2 landmarks-aided estimation  landmarks are features or unique signatures which can be easily reobserved and distinguished from the environment and can also help people to recognize the space  116   landmarks have typical characteristics  easily reobservable  distinguishable from each other  and stationary  for instance  the statue of liberty is just a good landmark as it is unique and can easily be seen from various locations  actually  landmarks for indoor localization are originally used in slam  117  118   in which landmarks are also named geometric beacons  slam is used to track robots moving in unknown environment and simultaneously construct the indoor maps  in particular  indoor mapping refers to capturing the landmarks  e.g  planes  corners  cylinders  and obstacles  when a robot is moving in the unknown environment and determining its location  then  a simple indoor map is constructed based on these landmarks whose locations have been determined  when a robot reports a newly observed landmark  the algorithm will match the landmark with the constructed map and determine mathematical problems in engineering laser scan landmark capture data association odometry change ekf/pf/    odometry update ekf/pf/    reobservation ekf/pf/    new observations figure 12  the workflow of typical slam algorithms  the robots location  the workflow of typical slam algorithms is shown in figure 12 currently  most of users mobile devices  e.g  smartphones and tablets  have been equipped with many advanced wireless modules  e.g  wi-fi and bluetooth  and imu sensors  e.g  accelerometers  magnetometers  and gyroscopes   therefore  users have the access to many landmarks like robots  wang et al   21  proposed to use the smartphones to sense the landmarks in indoor environments which could then help to improve the localization accuracy of users  landmarks are certain locations of indoor environments where signatures are identifiable on one or more sensing dimensions  for instance  an elevator imposes a distinct pattern on a smartphones accelerometers ; a corridor-corner may denote a big angle change measured by gyroscopes ; a specific spot may experience an unusual magnetic fluctuation ; we may encounter some signal blind areas where there are no wireless signals at all  such as wi-fi and gsm  shen et al   33  treated the places in the corridors where wi-fi rss presented a peak value as landmarks  that is  wi-fi-marks  normally  the trend of the received wi-fi signal strength changes from increasing to decreasing when moving along the pathway  in fact  these kinds of landmarks naturally exist in the environments  and the number is large  most often  in the offline phase  we obtain the locations of landmarks through map searching and/or machine learning  then when the mobile user observes these landmarks during the online phase  the users location can be calibrated by the locations of these landmarks  landmarks can be further classified into seed landmarks and organic landmarks  the former is often the building components and indoor facilities  e.g  elevators  stairs  and exits   at these places  the sensor readings would present some special characteristics  particularly  the locations of seed landmarks can be easily obtained through indoor maps  in order to distinguish different activities  e.g  climbing up and down elevators  walking up and down stairs  and walking on floors   some classification approaches are needed such as the least square support vector machine  ls-svm  and the decision tree  119  120   organic landmarks can not be directly obtained through searching maps ; instead they are perceived by sensor data  for example  magnetic fluctuation spots have to be identified with magnetometers  the locations could be also derived through some automatic learning approaches  such as clustering techniques  e.g  -means and dbscan   because landmarks are only related to the physical space  theoretically  landmark-based localization does not depend mathematical problems in engineering on infrastructures and the only one thing needed is the mobile device equipped with imu sensors for perceiving landmarks  therefore  landmark-based localization is generally considered as a low-cost solution for accuracy improvement compared with other traditional solutions  the key challenge for this solution is the correct recognition and matching of landmarks  the main factors that affect the recognition and matching of landmarks are the changes of environment  heterogeneous mobile devices  and differences between training objects  the changes of environment can give rise to the changes of locations of landmarks and further the recognition and matching errors  for instance  the addition of new wi-fi aps in the environment representatively may result in the disappearance of some previously existing wi-fi signal blind areas ; the movement of a metal object location is likely to cause the location changes of magnetic fluctuation spots  for the changes of landmarks  we have to adaptively learn the changes  whatever the changes are  moreover  the sensor readings derived from the same landmarks may be very different if heterogeneous mobile devices are used  because of the same reasons mentioned in section 2.2.2 taking the wi-fi signal blind area as an example  phones of brand b have a smaller wi-fi rss value than that of brand a according to our experimental results  in our experiments  when measuring the rss value from the same ap at the same location  the rss for phones of brand b is 78  while that for phones of brand a is 60 if the rss value is below 100  we will regard the corresponding ap as invisible  therefore  when a spot is determined as the signal blind area with phones of brand b  this is not the case for phones of brand a as for this issue  we can suppose phones of the same brand have the same or similar sensor specification  during the process of learning landmarks  it is necessary to extract and record sensor readings with the brand of the phones  while matching landmarks  only these landmarks with the same brand will be chosen and matched  in addition  the difference of motion patterns from training users may lead to the training results being invalid  this means the sensor reading learnt by a user at a landmark may be inconsistent with that collected by another user at the same landmark  for example  assuming that there are two users a and b performing the training task where a is much taller than b because taller people tend to have a greater acceleration compared with shorter one  the incorrect activity recognition can occur if we use the data collected by a to match with the data from b to further address the landmarks mismatching issue  the batch gating  121  and trajectory matching  110  can be used  which match multiple landmarks  i.e  several continuous landmarks detected on a traveling path  at one time  6.3 spatial models-aided estimation  although map matching can improve the location estimation  it primarily uses the geometric and topologic information of indoor spaces to constrain targets movement and only limited spatial information is utilized  moreover  landmarks can calibrate the localization results and it is a low-cost solution for improving localization accuracy  however  it is not easy to 23 correctly identify enough landmarks  landmarks matching is another challenge for this technique  an indoor spatial model  35  122  typically represents the static and mobile real-world objects and their properties such as locations and spatial relationships in indoor moving environment  static objects commonly include the building  floors  rooms  doors  sensors  obstacles  and other objects of interest  mobile objects generally refer to the persons  a typical spatial model contains more fine-grained and rich geometric  topological  and semantic information  which can be used to further improve the location estimation and further realize richer and more reliable location services  35  122  123   currently  the most commonly used spatial models for assisting localization are grid models  124  and graph models  125  126   correspondingly  spatial model-aided localization approaches can fall into grid-based methods and graph-based methods  6.3.1 grid model-based methods  the grid model partitions a space into regular cells with semantics  e.g  wall  obstacle  and open area  ; for example  a piece of room is considered a grid cell  and each grid cell is linked to its neighbors  the size of each grid is also able to be adjusted for different applications  since the grid model does not abstract the space  it is able to describe the locations of almost all objects in indoor environments accurately and continuously  each grid contains a value for the probability that the tracked object is located within this cell  obviously  for static objects  that is  obstacles  e.g  furniture and walls   the probability for corresponding cells is 0 the grid model is especially suitable for computation  because it can be also regarded as a matrix which enables many matrix-based computation  the drawbacks of the gird model are that it needs to store too many grids in the memory and update the probability of all grids when new observations are available  therefore  the model faces the challenge of high memory cost and computational complexity  moreover  the number of grids needed grows exponentially with the dimension of grids ; hence it is just used to solve low-dimension problems  such as the heading or location of users  figure 13 shows a square-shaped grid model  fox et al   127  proposed a grid-based markov localization algorithm  it used a fine-grained grid model to represent the state space of robots and divides the indoor space into regular 3d grids  10 cm40 cm   when the robot moved or received new sensor data  ultrasound sensors   the probability of each state  grid  was updated  to update the state spaces efficiently  two techniques were developed  precomputation of the sensor model and the selective update scheme  bohn and vogt  128  proposed a high-level sensor fusion architecture which could support an arbitrary number of sensors  the probabilistic localization algorithm was used to fuse map knowledge and high-level sensor to increase the accuracy and plausibility  the indoor space was represented as a 2d grid with a fixed cell size  each cell contains three probabilities  the probability that the target was located within this cell ; probabilities for movement into the eight adjacent cells ; probability for staying in the cell  invalid locations  e.g  walls and obstacles  had an influence on the probability calculation 24 mathematical problems in engineering figure 13  square-shaped grid model  126   of cells  the cell with the maximum probability would be selected as the targets location  bhattacharya et al   129  divided the grocery into cells with the same size  the grid model was applied to constrain the localization results of targets  so as to improve the localization accuracy of wi-fi fingerprinting  essentially  the spatial model-based methods use the spatial constraints to limit the movement of targets  the location of targets is narrowed to a smaller probability space  so as to automatically rule out some erroneous estimations  the key point lies in the mining of available spatial information to constrain users movement which is represented in the spatial model  some typical spatial constraints represented in the grid model are as follows   i  buffer  a buffer is defined as a search region of current location and centers at the known previous location  the range of the buffer usually depends on the walking speed and the time interval of location determination  we just need to determine users location within the buffer  and the locations out of the buffer can be ruled out directly   ii  shortest path distance  based on the spatial connectivity of grid model  there are several algorithms to calculate the shortest path distance  for example  dijkstras algorithm  a search algorithm  and so on  different from the shortest path distance  the euclidean distance is the straight-line distance without considering the obstacles or walls between two cells  figure 14   obviously  the shortest path distance is more reasonable than the euclidean distance to represent the distance users move in the indoor environment  in order to obtain the range of the buffer  we need to determine whether it is possible for a user to travel from the current location to each cell of grid model in a certain interval  e.g  2 s   for example  assuming a user walk at about 1.5 m/s and the interval between two location estimations is 2 s  these cells with a shortest path distance below 3 m to the users current location will be added to the buffer  while the others will be excluded   iii  moving heading  if there is no turn at the previous location  we believe that there is a very high probability that the current moving direction is the same as figure 14  the euclidean distance and the shortest path distance between two cells  the previous one  based on this assumption  we can further rule out some cells out of the range of the moving heading with a deviation angle  for instance  we can calculate the angle between the current moving heading and the surrounding cells  when this angle is beyond an angle threshold  e.g  30   the corresponding cell is invalid  while for the cells fulfilling this requirement  they will be assigned with different probability values according to the angle  figure 15 describes the angle between the heading vectors of the grid cells   iv  occupancy grid  users can not freely move in the indoor environment  because it often have only limited free space  e.g  rooms and corridors  and may contain a number of obstacles  e.g  desks and walls   these physical structures occupy some cells of the grid model  to which users can not move  therefore  these occupancy grids can be deleted from the candidate grid cells for users location estimation ; that is  the probabilities for the occupancy grids should be set to 0 in addition  many other spatial constraints represented in grid model can also be used  for instance  the one-way passage  e.g  the check-in path of the metros  only permits the moving along one direction and the other is forbidden ; mathematical problems in engineering vector 1 angle vector 2 figure 15  the angle between moving heading and cells  users tend to walk on the central area of the corridors  instead of close to the walls ; the opening and closing state of the doors also affect users movement  in sum  grid model can provide lots of spatial information to improve location estimation  the research focuses of the method are how to correctly mine  represent  and use as much spatial constraints as possible  6.3.2 graph model-based methods  grid model is a geometrical spatial model and the computational complexity of grid model-based location estimation can be reduced by nonmetric representations of an environment  such as typical graph model  actually  in indoor environments  users movement is often in a more determined way directed to some destination than random walk  71   moreover  users normally move in a more natural way  for instance  when walking in an indoor environment  they tend to move along the main axes of rooms or corridors  so we can naturally represent typical human motion on graphs  70   this can reduce the degrees of freedom from user movement and therefore improve location estimation even when using only sparse  noisy information provided by sensors  such as enhancing robustness and decreasing the computational complexity  e.g  the number of particles for particle filtering   graph-based motion models represent an indoor space as a graph where nodes model predefined locations  e.g  places  doors  and points of interest  extracted either manually or automatically from the environment  and links or edges stand for the connections that make it possible to move through these locations  the graph model can be categorized into five different kinds  35   place graphs  visibility graphs  generalized voronoi graph  gvg   fine-grained graphs  and sensor-based graphs  figure 16 shows the walkable graph model from level 4 of our office building  krumm et al   130  used hmm to fuse the graph of indoor environment for improving the location estimation of fingerprinting with 433 hz rf technology  it defined the transition probabilities between connected nodes according to the node connectivity in the graph  for example  if the probability of a target moving from a node in an office to another node outside the offices door was 0.05 within 1 s  25 the probability of the target being in the office was then 0.95 in that case  sensor measurements  e.g  rss  could be treated as the observations of hmm  experiments showed that the graph model could efficiently enhance the traditional positioning technologies  especially in robustness  liao et al   70  utilized the voronoi graph of the environment to accurately determine the locations of users by representing typical human motion along the main axes of the free space  particularly  the particle filter was used to estimate the locations of users on the voronoi graph  lee and chen  131  used a floor model to improve the location estimation of wi-fi fingerprinting  the floor model allowed to query the zones  e.g  rooms and corridors  and the paths between the zones  moreover  in order to disambiguate the users location  previous locations in the floor model were used to eliminate candidate locations that were not likely to be reachable from the previous locations  jensen et al   132  proposed a graph model which could represent the connectivity and accessibility of the indoor space  based on the constructed topological graph  the deployment graph of rfid readers was built by combining with the maximum speed of users to improve the tracking accuracy of traditional rfid positioning technique  nam  133  employed the topological graph to aid localization  the spatial relationships between indoor entities  e.g  rooms  corridors  and corners  and the users activity events  e.g  turn left and turn right  were used to improve the localization accuracy  particularly  when the users activity  e.g  turning  was detected using the imu sensors  estimated trajectory containing sequential activities would be compared with the topological graph  in this way  the tracking errors of imu sensors could be calibrated  hilsenbeck et al   22  designed a fusion method of multiple sensors based on a variant of the gvg  making the best of wi-fi and motion sensors  e.g  accelerometers  gyroscopes  and compasses   the particle filter for location estimation was formulated directly on a fully discretized  graph-based representation of the indoor environment ; that is  the state space consists of the discretized nodes in the graph  particularly  in this model  the narrow parts of the building were treated as one-dimensional voronoi diagram and the large open spaces as two-dimensional grid graph  therefore  the proposed localization approach could reduce the computational complexity and at the same time achieve high accuracy  nurminen et al   71  implemented a graphbased particle filter algorithm for pedestrian tracking  the graph was used to derive users motion model in the environment  while wi-fi measurements were used to update the weights of particles  the main contribution was inferring users motion model via the graph  when the estimated users location reached a link endpoint  the probabilities of other links being selected as the next link were computed based on the graph  graph model-based methods have the merit of high efficiency because they represent distributions over a smaller scale of discrete state space  which is the key to decrease computational complexity as mentioned above  the drawback of graph model  generally  is that the represented indoor space is relatively coarse-grained and lacks the geometric details of locations  the graph model-based methods are 26 mathematical problems in engineering rm 401 rm 402 rm 403 rm 404 rm 405 rm 406 stair corridor rm 420 rm 426 rm 407 corridor rm 419 stair elevator rm 421 corridor rm 425 rm 417 stair rm 416 corridor rm 415 co rri do r rm 414 rm 411 rm 422 rm 423 rm 413 corridor rm 424 rm 412 figure 16  the walkable graph model of indoor space  path links  green  and nodes  red   often adequate if the sensors in the environment provide only very imprecise location information  they are especially suitable for pedestrian localization and tracking  although spatial model-based methods  grid-based and graph-based  can significantly improve the localization performances  constructing a refined spatial model is a laborintensive and time-consuming task  it is true  in particular  for the large and complex indoor environments  such as shopping malls  sometimes  it is even difficult to build the floor plan  not to mention the more complex spatial model  therefore  constructing spatial model only for the purpose of assisting localization is not cost-effective  a reasonable solution for this issue is to provide value-added services for users on the basis of constructed spatial model  for example  the indoor navigation service  moving objects queries  in this way  constructing spatial model is worthwhile  for instance  indoorgml  134   a candidate ogc standard  aim to provide a common framework of representation and exchange of indoor spatial information  particularly  it is based on the requirements from indoor navigation and is still facing many challenges  recently  crowdsourcing  a promising solution  brings a hope to the indoor spatial modelling through users trajectories  which is worthwhile to further study  8  72  135   7 open issues and future research directions the location estimation has always been a hot topic in the field of indoor localization and tracking  and lots of progress has been made as mentioned in our review  however  there are still some open issues limiting the widespread application of indoor localization techniques  which deserve further research  for instance  how to reduce the efforts  e.g  on constructing fingerprint database and floor plans  is still a tough challenge  moreover  the current methods of location estimation can be improved and extended  in this section  we present a list of some promising research directions of improvement schemes for indoor location estimation   1  automatically updating fingerprint database  fingerprinting-based localization requires labor-intensive on-site survey activities for constructing an accurate fingerprint database  although crowdsourcing fingerprinting techniques have been successfully utilized to generate the fingerprint database  64   it is challenging to update these fingerprints when a change  e.g  the removal or addition of an ap and adjustment of indoor structures  happens  the fingerprints are commonly influenced by environmental factors  the brands and models of the devices  the strategies to automatically update the collected fingerprints especially on a large scale are still required to be further investigated   2  fusing multiple contexts  existing solutions usually use the limited spatial contexts  for example  most of them only utilize indoor maps  in fact  far more contexts can be used to reduce the uncertainty of location estimation  such as mobile social information  20   users profiles  preferences  and activities  using more contexts can lower the cost  reduce uncertainty  and enhance user experience   3  crowdsourcing spatial model construction  users smart mobile devices are generally equipped with various imu sensors  e.g  accelerometers  gyroscopes  and magnetometers  which can record users activities and trajectories at any time and any places  the tremendous trajectories crowdsourced by users mathematical problems in engineering can be utilized to automatically construct and update the indoor maps without any prior knowledge about the indoor spaces  8  72  135   however  the indoor spaces contain abundant semantics  not only the basic structures represented by a map but also landmarks and so on  it is a challenging task to construct spatial models with much more semantics in a crowdsourcing way   4  infrastructure-less or device-free localization  most traditional indoor localization technologies require users to wear rf tags or carry the mobile devices  this leads to a rise in the cost of deployment and maintenance  so far  the lack of infrastructure remains one of the key factors limiting the widespread application of indoor localization technologies  and more importantly  in some applications  such as the emergency response and indoor intrusion detection  we can not guarantee that localization targets will wear rf tags or carry the mobile devices  therefore  the research that can reduce the dependence on infrastructures  136 138  and even do not depend on any mobile devices  that is  device-free  has become a hot topic in recent years  139  140    5  performance evaluation schemes  there are a lot of performance indicators for an indoor localization technique  such as accuracy  complexity  cost  power consumption  and usability  different systems or solutions have varying performance ; hence it is necessary to develop a performance evaluation scheme to help customers choose appropriate devices  systems  or solutions  for instance  for cost-sensitive applications  the opportunistic techniques  141  should be adopted ; the semantic localization approach  2  142  should be used to enhance the usability and lower the power consumption for user-friendly cases   6  online localization approaches  most past studies profit from offline methods where the data are collected in the mobile devices but processed offline on a back-end server  although the computation ability of mobile devices has been significantly enhanced recently  it is still necessary to develop real time  online  and energy-saving applications in order to prolong the battery life and meet the demand in real world  the major challenge that online localization methods face is to achieve the ideal performance trade-off  e.g  accuracy  power consumption  usability  and security  on the resource-limited platform  8 conclusion in this paper  we provided a review of the state-of-theart in the improvement schemes for indoor mobile location estimation  especially targeting probabilistic techniques  hybrid localization methods  and localization methods by fusing spatial context  the accurate localization determination is always the most significant challenge in the indoor localization field  and the key of location estimation is the representation and fusion of uncertain information from 27 multiple sources  we analyze the main error sources of typical localization approaches and propose a multilayered conceptual framework for improvement schemes of the location estimation  due to the effect of multipath  nlos  hardware errors  and so on  the localization measurements are inevitable to contain uncertainty in the indoor environment  the bayes filters are powerful statistical tools  and they use probabilistic techniques to estimate the state of dynamic systems from noisy data  the bayes filters are especially suitable for filtering measurements of different levels  such as rsss  distances  angles  and even locations  as well as fusing multiple sensor data  therefore  bayes filters have become the basic mathematical models and tools used in the majority of location estimation approaches  the most commonly used bayes filters include kalman filters  extended kalman filters  sigmapoint kalman filters  particle filters  and hmm  each indoor localization technology or approach has its own inherent defects  when we comprehensively consider their accuracy  cost  coverage  complexity  and so on  that is  none of the techniques can fulfill the requirement of all applications  although the bayesian techniques can significantly reduce the uncertainty of location estimation to some extent  they still fail to completely eliminate the inherent drawbacks of single localization technology or approach  the hybrid localization schemes through fusing multiple localization techniques or measurements can combine each others advantages and  therefore  considerably enhance the location estimation  we discuss four typical hybrid localization schemes  multimodal fingerprinting  triangulation fusing multiple measurements  method combining wireless positioning with pdr  and cooperative localization  although hybrid localization schemes can effectively improve the localization accuracy  they depend too much on the localization hardware  and thereby both the cost and the complexity are high  actually  the spatial contexts of the indoor environment  such as the commonly used indoor maps  can be used to assist the localization  recently  the location estimation methods by fusing spatial contexts especially  such as the landmarks and indoor spatial models  have become a quite hot topic  but constructing refined indoor maps or spatial models is a labor-intensive and time-consuming task and is still a challenge  obviously  every solution has its own drawbacks  the schemes for indoor mobile location estimation with high accuracy as well as widely accepted cost  complexity  and effort are still a challenge  in particular  the improvement of location estimation is a complicated  comprehensive issue  as for practical applications  we have to comprehensively consider the requirements of specific applications on the accuracy  cost  complexity  deployment efforts  and existing devices and infrastructures and then choose one or the combination of multiple technologies and/or approaches presented in this paper  conflict of interests the authors declare that they have no conflict of interests regarding the publication of this paper  28 mathematical problems in engineering acknowledgment this work was supported by the national natural science foundation of china under grant no  41271440 references  1  l yang and m worboys  a navigation ontology for outdoorindoor space   work-in-progress   in proceedings of the 3rd acm sigspatial international workshop on indoor spatial awareness  isa 11   pp  3134  chicago  ill  usa  november 2011   2  m elhamshary and m youssef  checkinside  a fine-grained indoor location-based social network  in proceedings of the acm international joint conference on pervasive and ubiquitous computing  ubicomp 14   pp  607618  seattle  wash  usa  september 2014   3  d macagnano  g destino  and g abreu  indoor positioning  a key enabling technology for iot applications  in proceedings of the ieee world forum on internet of things  wf-iot 14   pp  117118  seoul  republic of korea  march 2014   4  j hightower and g borriello  location systems for ubiquitous computing  computer  vol  34  no  8  pp  5766  2001   5  h liu  h darabi  p banerjee  and j liu  survey of wireless indoor positioning techniques and systems  ieee transactions on systems  man and cybernetics part c  applications and reviews  vol  37  no  6  pp  10671080  2007   6  s winter  indoor spatial information  international journal of 3-d information modeling  vol  1  no  1  pp  2542  2012   7  k yu  i sharp  and y j guo  ground-based wireless positioning  wiley-ieee press  west sussex  uk  2009   8  c luo  h hong  and m c chan  piloc  a selfcalibrating participatory indoor localization system  in proceedings of the 13th international symposium on information processing in sensor networks  ipsn 14   pp  143154  piscataway  nj  usa  april 2014   9  m youssef  m mah  and a agrawala  challenges  device-free passive localization for wireless environments  in proceedings of the 13th annual acm international conference on mobile computing and networking  mobicom 07   pp  222229  montreal  canada  september 2007   10  j hightower  the location stack  ph.d dissertation   university of washington  seattle  wash  usa  2004   11  k muthukrishnan  m lijding  and p havinga  towards smart surroundings  enabling techniques and technologies for localization  in proceedings of the 1st international workshop on location and context-awareness  loca 05   pp  350362  berlin  germany  may 2005   12  k chintalapudi  a p iyer  and v n padmanabhan  indoor localization without the pain  in proceedings of the 16th annual international conference on mobile computing and networking  mobicom 10   pp  173184  chicago  ill  usa  september 2010   13  o woodman and r harle  pedestrian localisation for indoor environments  in proceedings of the 10th international conference on ubiquitous computing  ubicomp 08   pp  114123  seoul  republic of korea  september 2008   14  y liu  z yang  x wang  and l jian  location  localization  and localizability  journal of computer science and technology  vol  25  no  2  pp  274297  2010   15  c peng  g shen  y zhang  y li  and k tan  beepbeep  a high accuracy acoustic ranging system using cots mobile  16   17   18   19   20   21   22   23   24   25   26   27   28   29   30   31  devices  in proceedings of the 5th acm international conference on embedded networked sensor systems  sensys 07   pp  114  sydney  australia  november 2007 i sharp  k yu  and y j guo  gdop analysis for positioning system design  ieee transactions on vehicular technology  vol  58  no  7  pp  33713382  2009 d fox  j hightower  l liao  d schulz  and g bordello  bayesian filtering for location estimation  ieee pervasive computing  vol  2  no  3  pp  2433  2003 a lamarca and e de lara  location systems  an introduction to the technology behind location awareness  synthesis lectures on mobile and pervasive computing  vol  3  no  1  pp  1122  2008 n wagle and e frew  a particle filter approach to wifi target localization  in aiaa guidance  navigation  and control conference  pp  22872298  toronto  canada  august 2010 j jun  y gu  l cheng et al  social-loc  improving indoor llcalization with social sensing  in proceedings of the 11th acm conference on embedded networked sensor systems  sensys 13   p 14  roma  italy  november 2013 h wang  s sen  a elgohary  m farid  m youssef  and r r choudhury  no need to war-drive  unsupervised indoor localization  in proceedings of the 10th international conference on mobile systems  applications  and services  mobisys 12   pp  197210  low wood bay  uk  june 2012 s hilsenbeck  d bobkov  g schroth  r huitl  and e steinbach  graph-based data fusion of pedometer and wifi measurements for mobile indoor positioning  in proceedings of the acm international joint conference on pervasive and ubiquitous computing  ubicomp 14   pp  147158  seattle  dc  usa  september 2014 h wymeersch  j lien  and m z win  cooperative localization in wireless networks  proceedings of the ieee  vol  97  no  2  pp  427450  2009 c k chui and g chen  kalman filtering with real-time applications  springer  4th edition  1999 d simon  kalman filtering with state constraints  a survey of linear and nonlinear algorithms  iet control theory & applications  vol  4  no  8  pp  13031318  2010 r van der merwe  sigma-point kalman filters for probabilistic inference in dynamic state-space models  ph.d dissertation   oregon health & science university  portland  ore  usa  2004 j hightower and g borriello  particle filters for location estimation in ubiquitous computing  a case study  in ubicomp 2004  ubiquitous computing  lecture notes in computer science  pp  88106  springer  beilin  germany  2004 i park  w bong  and y c kim  hidden markov model based tracking of a proxy rp in wi-fi localization  in proceedings of the ieee 73rd vehicular technology conference  vtc spring 11   pp  15  yokohama  japan  may 2011 y chen  d lymberopoulos  j liu  and b priyantha  fmbased indoor localization  in proceedings of the 10th international conference on mobile systems  applications  and services  mobisys 12   pp  169181  lake district  uk  june 2012 a catovic and z sahinoglu  the cramer-rao bounds of hybrid toa/rss and tdoa/rss location estimation schemes  ieee communications letters  vol  8  no  10  pp  626628  2004 f evennou and f marx  advanced integration of wifi and inertial navigation systems for indoor mobile positioning  eurasip journal on advances in signal processing  vol  2006  article id 86706  11 pages  2006 mathematical problems in engineering  32  h bao and w.-c wong  an indoor dead-reckoning algorithm with map matching  in proceedings of the 9th international wireless communications and mobile computing conference  iwcmc 13   pp  15341539  cagliari  italy  july 2013   33  g shen  z chen  p zhang  t moscibroda  and y zhang  walkie-markie  indoor pathway mapping made easy  in proceedings of the 10th usenix conference on networked systems design and implementation  nsdi 12   pp  8598  berkeley  calif  usa  april 2013   34  a kealy  s winter  and g retscher  intelligent location models for next generation location-based services  journal of location based services  vol  1  no  4  pp  237255  2007   35  i afyouni  c ray  and c claramunt  spatial models for context-aware indoor navigation systems  a survey  journal of spatial information science  vol  4  no  1  pp  85123  2012   36  j hightower and g borriello  the location stack  multisensor fusion in action  in proceedings of the 5th international conference on ubiquitous computing  ubicomp 03   seattle  wash  usa  october 2003   37  a savvides  w garber  s adlakha  r moses  and m b srivastava  on the error characteristics of multihop node localization in ad-hoc sensor networks  in information processing in sensor networks  vol  2634 of lecture notes in computer science  pp  317332  springer  berlin  germany  2003   38  n a alsindi  k pahlavan  and b alavi  an error propagation aware algorithm for precise cooperative indoor localization  in military communications conference  milcom 06   pp  17  piscataway  nj  usa  october 2006   39  a varshavsky  e de lara  j hightower  a lamarca  and v otsason  gsm indoor localization  pervasive and mobile computing  vol  3  no  6  pp  698720  2007   40  r wang  f zhao  h luo  b lu  and t lu  fusion of wifi and bluetooth for indoor localization  in proceedings of the 1st international workshop on mobile location-based service  mlbs 11   pp  6366  beijing  china  september 2011   41  j haverinen and a kemppainen  global indoor selflocalization based on the ambient magnetic field  robotics and autonomous systems  vol  57  no  10  pp  10281035  2009   42  m azizyan  i constandache  and r r choudhury  surroundsense  mobile phone localization via ambience fingerprinting  in proceedings of the 15th annual acm international conference on mobile computing and networking  mobicom 09   pp  261 272  acm  beijing  china  september 2009   43  m b kjrgaard and c v munk  hyperbolic location fingerprinting  a calibration-free solution for handling differences in signal strength  concise contribution   in proceedings of the 6th annual ieee international conference on pervasive computing and communications  percom 08   pp  110116  hong kong  china  march 2008   44  r harle  a survey of indoor inertial positioning systems for pedestrians  ieee communications surveys & tutorials  vol  15  no  3  pp  12811293  2013   45  s beauregard and h haas  pedestrian dead reckoning  a basis for personal positioning  in proceedings of the 3rd workshop on positioning  navigation and communication  wpnc 06   pp  2735  hannover  germany  march 2006   46  s y cho  c g park  and h y yim  sensor fusion and error compensation algorithm for pedestrian navigation system  in proceedings of the conference on control  automation and system  iccas 03   pp  10011006  institute of chemistry  the chinese academy of sciences  gyeongju  republic of korea  october 2003  29  47  j w kim  h j jang  d hwang  and c park  a step  stride and heading determination for the pedestrian navigation system  journal of global positioning systems  vol  3  no  1-2  pp  273279  2004   48  w chen  r chen  y chen  h kuusniemi  and j wang  an effective pedestrian dead reckoning algorithm using a unified heading error model  in proceedings of the ieee/ion position  location and navigation symposium  plans 10   pp  340347  indian wells  calif  usa  may 2010   49  r huang  g v zaruba  and s das  device localization in ubiquitous computing environments  in human computer interaction  concepts  methodologies  tools  and applications  igi global press  2008   50  j g markoulidakis  c dessiniotis  and d nikolaidis  part two  kalman filtering options for error minimization in statistical terminal assisted mobile positioning  computer communications  vol  31  no  6  pp  11381147  2008   51  l jetto  s longhi  and g venturini  development and experimental validation of an adaptive extended kalman filter for the localization of mobile robots  ieee transactions on robotics and automation  vol  15  no  2  pp  219229  1999   52  j yim  c park  j joo  and s jeong  extended kalman filter for wireless lan based indoor positioning  decision support systems  vol  45  no  4  pp  960971  2008   53  k frank  b kracht  n catterall  and p robertson  development and evaluation of a combined wlan & inertial indoor pedestrian positioning system  in proceedings of the international technical meeting of the satellite division of the institute of navigation  ion gnss 09   pp  2225  savannah  ga  usa  september 2009   54  c barrios  h himberg  y motai  and a sadek  multiple model framework of adaptive extended kalman filtering for predicting vehicle location  in proceedings of the ieee intelligent transportation systems conference  itsc 06   pp  1053 1059  toronto  canada  september 2006   55  j l crassidis  sigma-point kalman filtering for integrated gps and inertial navigation  ieee transactions on aerospace and electronic systems  vol  42  no  2  pp  750756  2006   56  a s paul and e a wan  rssi-based indoor localization and tracking using sigma-point kalman smoothers  ieee journal on selected topics in signal processing  vol  3  no  5  pp  860873  2009   57  r van der merwe and e a wan  the square-root unscented kalman filter for state and parameter-estimation  in proceedings of the ieee interntional conference on acoustics  speech  and signal processing  icassp 01   vol  6  pp  34613464  salt lake city  utah  usa  may 2001   58  s godsill and t clapp  improvement strategies for monte carlo particle filters  springer  new york  ny  usa  2001   59  a doucet  n de freitas  and n gordon  sequential monte carlo mmethods in practice  statistics for engineering and information science  springer  berlin  germany  2001   60  a m johansen and a doucet  a note on auxiliary particle filters  statistics & probability letters  vol  78  no  12  pp  1498 1504  2008   61  a giremus  j.-y  tourneret  and p m djuric  an improved regularized particle filter for gps/ins integration  in proceedings of the ieee 6th workshop on signal processing advances in wireless communications  spawc 05   pp  10131017  new york  ny  usa  june 2005  30  62  f gustafsson  f gunnarsson  n bergman et al  particle filters for positioning  navigation  and tracking  ieee transactions on signal processing  vol  50  no  2  pp  425437  2002   63  y gao  q yang  g li et al  xins  the anatomy of an indoor positioning and navigation architecture  in proceedings of the 1st international workshop on mobile location-based service  mlbs 11   pp  4150  beijing  china  september 2011   64  a rai  k k chintalapudi  v n padmanabhan  and r sen  zee  zero-effort crowdsourcing for indoor localization  in proceedings of the 18th annual international conference on mobile computing and networking  mobicom 12   pp  293304  islanbul  turkey  august 2012   65  f li  c zhao  g ding  j gong  c liu  and f zhao  a reliable and accurate indoor localization method using phone inertial sensors  in proceedings of the 14th acm international conference on ubiquitous computing  ubicomp 12   pp  421 430  acm  pittsburgh  pa  usa  september 2012   66  y jin  w.-s soh  m motani  and w.-c wong  a robust indoor pedestrian tracking system with sparse infrastructure support  ieee transactions on mobile computing  vol  12  no  7  pp  1392 1403  2013   67  p.-h tseng  z ding  and k.-t feng  cooperative selfnavigation in a mixed los and nlos environment  ieee transactions on mobile computing  vol  13  no  2  pp  350363  2014   68  widyawan  m klepal  and s beauregard  a backtracking particle filter for fusing building plans with pdr displacement estimates  in proceedings of the 5th workshop on positioning  navigation and communication  wpnc 08   pp  207212  hannover  germany  march 2008   69  m i khan and j syrjarinne  investigating effective methods for integration of buildings map with low cost inertial sensors and wifi-based positioning  in proceedings of the international conference on indoor positioning and indoor navigation  ipin 13   pp  18  belfort  france  october 2013   70  l liao  d fox  j hightower  h kautz  and d schulz  voronoi tracking  location estimation using sparse and noisy sensor data  in proceedings of the ieee/rsj international conference on intelligent robots and systems  pp  723728  las vegas  nev  usa  october 2003   71  h nurminen  m koivisto  s ali-loytty  and r piche  motion model for positioning with graph based indoor map  in proceedings of the international conference on indoor positioning and indoor navigation  vol  27  p 30  busan  republic of korea  october 2014   72  x zhang  y jin  h tan  and w soh  cimloc  a crowdsourcing indoor digital map construction system for localization  in proceedings of the ieee ninth international conference on intelligent sensors  sensor networks and information processing  issnip 14   pp  16  singapore  april 2014   73  l r rabiner and b.-h juang  an introduction to hidden markov models  ieee assp magazine  vol  3  no  1  pp  416  1986   74  p kontkanen  p myllymaki  t roos  h tirri  k valtonen  and h wettig  probabilistic methods for location estimation in wireless networks  in emerging location aware broadband wireless ad hoc networks  pp  173188  springer  new york  ny  usa  2005   75  m wallbaum  indoor geolocation using wireless local area networks  shaker press  2006 mathematical problems in engineering  76  j liu  r chen  l pei  r guinness  and h kuusniemi  a hybrid smartphone indoor positioning solution for mobile lbs  sensors  vol  12  no  12  pp  1720817233  2012   77  j seitz  t vaupel  s meyer  j g boronat  and j thielecke  a hidden markov model for pedestrian navigation  in proceedings of the 7th workshop on positioning  navigation and communication  wpnc 10   pp  120127  dresden  germany  march 2010   78  m angermann  m frassl  m doniec  b j julian  and p robertson  characterization of the indoor magnetic field for applications in localization and mapping  in proceedings of the international conference on indoor positioning and indoor navigation  ipin 12   pp  1315  sydney  australia  november 2012   79  c zhang  j luo  and j wu  poster abstract  mawi  a hybrid magnetic and wi-fi system for scalable indoor localization  in proceedings of the 13th symposium on information processing in sensor networks  ipsn 14   pp  275276  berlin  germany  april 2014   80  e martin  multimode radio fingerprinting for localization  in proceedings of the ieee radio and wireless symposium  rws 11   pp  383386  phoenix  ariz  usa  january 2011   81  nanotron technologies  http  //www.nanotron.com/   82  j figueiras and s frattasi  mobile positioning and tracking  from conventional to cooperative techniques  john wiley & sons  new york  ny  usa  2011   83  k yu and y j guo  statistical nlos identification based on aoa  toa  and signal strength  ieee transactions on vehicular technology  vol  58  no  1  pp  274286  2009   84  a bahillo  s mazuelas  j prieto  p fernandez  r m lorenzo  and e j abril  hybrid rss-rtt localization scheme for wireless networks  in proceedings of the international conference on indoor positioning and indoor navigation  ipin 10   pp  1 7  zurich  switzerland  september 2010   85  m laaraiedh  l yu  s avrillon  and b uguen  comparison of hybrid localization schemes using rssi  toa  and tdoa  in proceedings of the 11th european wireless conference 2011 sustainable wireless technologies  european wireless 11   pp  1 5  vde  vienna  austria  april 2011   86  l cong and w zhuang  hybrid tdoa/aoa mobile user location for wideband cdma cellular systems  ieee transactions on wireless communications  vol  1  no  3  pp  439447  2002   87  c.-d wann  y.-j  yeh  and c.-s hsueh  hybrid tdoa/aoa indoor positioning and tracking using extended kalman filters  in proceedings of the ieee 63rd vehicular technology conference  vtc 06   pp  10581062  melbourne  australia  may 2006   88  s wang  b r jackson  and r inkol  hybrid rss/aoa emitter location estimation based on least squares and maximum likelihood criteria  in proceedings of the 26th queens biennial symposium on communications  qbsc 12   pp  2429  kingston  ri  usa  may 2012   89  y chan  f chan  w read  b jackson  and b lee  hybrid localization of an emitter by combining angle-of-arrival and received signal strength measurements  in proceedings of the 27th ieee canadian conference on electrical and computer engineering  ccece 14   pp  15  ieee  toronto  canada  may 2014   90  s venkatraman and j caffery jr  hybrid toa/aoa techniques for mobile location in non-line-of-sight environments  in proceedings of the ieee wireless communications and networking conference  wcnc 04   vol  1  pp  274278  atlanta  ga  usa  march 2004 mathematical problems in engineering  91  l taponecco  a a damico  and u mengali  joint toa and aoa estimation for uwb localization applications  ieee transactions on wireless communications  vol  10  no  7  pp  22072217  2011   92  g ding  z tan  l zhang  z zhang  and j zhang  hybrid toa/aoa cooperative localization in non-line-of-sight environments  in proceedings of the ieee 75th vehicular technology conference  vtc 12   pp  15  yokohama  japan  may 2012   93  y t chan and k c ho  simple and efficient estimator for hyperbolic location  ieee transactions on signal processing  vol  42  no  8  pp  19051915  1994   94  a de angelis  j o nilsson  i skog  p handel  and p carbone  indoor positioning by ultrawide band radio aided inertial navigation  metrology and measurement systems  vol  17  no  3  pp  447460  2010   95  p kemppi  t rautiainen  v ranki  f belloni  and j pajunen  hybrid positioning system combining angle-based localization  pedestrian dead reckoning and map filtering  in proceedings of the international conference on indoor positioning and indoor navigation  ipin 10   zurich  switzerland  september 2010   96  t gallagher  e wise  b li  a g dempster  c rizos  and e ramsey-stewart  indoor positioning system based on sensor fusion for the blind and visually impaired  in proceedings of the international conference on indoor positioning and indoor navigation  ipin 12   pp  19  ieee  sydney  australia  november 2012   97  m z win  a conti  s mazuelas et al  network localization and navigation via cooperation  ieee communications magazine  vol  49  no  5  pp  5662  2011   98  j.-o  nilsson  d zachariah  i skog  and p handel  cooperative localization by dual foot-mounted inertial sensors and interagent ranging  eurasip journal on advances in signal processing  vol  2013  article 164  2013   99  z yang  x feng  and q zhang  adometer  push the limit of pedestrian indoor localization through crowdsourcing  ieee transactions on mobile computing  vol  13  no  11  pp  24732483  2014   100  h liu  y gan  j yang et al  push the limit of wifi based localization for smartphones  in proceedings of the 18th annual international conference on mobile computing and networking  mobicom 12   pp  305316  acm  islanbul  turkey  august 2012   101  n a alsindi  k pahlavan  b alavi  and x li  a novel cooperative localization algorithm for indoor sensor networks  in proceedings of the 17th ieee international symposium on personal  indoor and mobile radio communications  pimrc 06   pp  16  helsinki  finland  september 2006   102  r raulefs  s zhang  c mensing  c ghali  and j hachem  constrained indoor distributed cooperative positioning  in proceedings of the 8th international workshop on multi-carrier systems and solutions  mcss 11   pp  15  helsinki  finland  may 2011   103  r m vaghefi and r m buehrer  improving positioning in lte through collaboration  in proceedings of the 11th workshop on positioning  navigation and communication  wpnc 14   pp  16  dresden  germany  march 2014   104  p stromback  j rantakokko  s.-l wirkander et al  footmounted inertial navigation and cooperative sensor fusion for indoor positioning  in proceedings of the international technical meeting of the institute of navigation  ion 10   pp  8998  san diego  calif  usa  january 2010  31  105  y.-t li  g chen  and m.-t sun  an indoor collaborative pedestrian dead reckoning system  in proceedings of the 42nd annual international conference on parallel processing  icpp 13   pp  923930  lyon  france  october 2013   106  m a quddus  w y ochieng  and r b noland  current mapmatching algorithms for transport applications  state-of-the art and future research directions  transportation research part c  emerging technologies  vol  15  no  5  pp  312328  2007   107  d bernstein and a kornhauser  an introduction to map matching for personal navigation assistants  in proceedings of the transportation research board 77th annual meeting  trb 98   p 16  washington  dc  usa  august 1998   108  a thiagarajan  l ravindranath  h balakrishnan  s madden  and l girod  accurate  low-energy trajectory mapping for mobile devices  in proceedings of the 8th usenix conference on networked systems design and implementation  nsdi 11   boston  mass  usa  march 2011   109  k.-c lan and w.-y  shih  on calibrating the sensor errors of a pdr-based indoor localization system  sensors  vol  13  no  4  pp  47814810  2013   110  j.-g park and s teller  motion compatibility for indoor localization  the computer science and artificial intelligence laboratory  csail   cambridge  mass  usa  2014   111  d gusenbauer  c isert  and j krosche  self-contained indoor positioning on off-the-shelf mobile devices  in proceedings of the international conference on indoor positioning and indoor navigation  ipin 10   pp  19  zurich  switzerland  september 2010   112  z xiao  h wen  a markham  and n trigoni  lightweight map matching for indoor localisation using conditional random fields  in proceedings of the 13th acm/ieee international conference on information processing in sensor networks  ipsn 14   pp  131142  berlin  germany  april 2014   113  h shin  y chon  and h cha  unsupervised construction of an indoor floor plan using a smartphone  ieee transactions on systems  man and cybernetics part c  applications and reviews  vol  42  no  6  pp  889898  2012   114  m alzantot and m youssef  crowdinside  automatic construction of indoor floorplans  in proceedings of the 20th international conference on advances in geographic information systems  sigspatial 12   pp  99108  acm  redondo beach  calif  usa  november 2012   115  d philipp  p baier  c dibak et al  mapgenie  grammarenhanced indoor map construction from crowd-sourced data  in proceedings of the ieee international conference on pervasive computing and communications  percom 14   pp  139147  ieee  budapest  hungary  march 2014   116  j kim  m vasardani  and s winter  spatial feature similarity matching for integrating spatial information extracted from textual descriptions  spatial information science  no  9  pp  137 155  2014   117  j leonard and h durrant-whyte  simultaneous map building and localization for an autonomous mobile robot  in ieee/rsj international workshop on intelligent robots and systems  iros 91   pp  14421447  osaka  japan  november 1991   118  t bailey and h durrant-whyte  simultaneous localization and mapping  slam   part ii  ieee robotics and automation magazine  vol  13  no  3  pp  108117  2006   119  o d incel  m kose  and c ersoy  a review and taxonomy of activity recognition on mobile phones  bionanoscience  vol  3  no  2  pp  145171  2013  32  120  m susi  v renaudin  and g lachapelle  motion mode recognition and step detection algorithms for mobile phone users  sensors  vol  13  no  2  pp  15391562  2013   121  j neira and j d tardos  data association in stochastic mapping using the joint compatibility test  ieee transactions on robotics and automation  vol  17  no  6  pp  890897  2001   122  c becker and f durr  on location models for ubiquitous computing  personal and ubiquitous computing  vol  9  no  1  pp  2031  2005   123  g stevenson  j ye  s dobson  and p nixon  loc8  a location model and extensible framework for programming with location  ieee pervasive computing  vol  9  no  1  pp  28 37  2010   124  x li  c claramunt  and c ray  a grid graph-based model for the analysis of 2d indoor spaces  computers  environment and urban systems  vol  34  no  6  pp  532540  2010   125  f lamarche and s donikian  crowd of virtual humans  a new approach for real time navigation in complex and structured environments  computer graphics forum  vol  23  no  3  pp  509518  2004   126  i afyouni  c ray  and c claramunt  knowledge representation and management in indoor mobile environments  ph.d thesis   naval academy research institute of france  2013   127  d fox  w burgard  and s thrun  markov localization for mobile robots in dynamic environments  journal of artificial intelligence research  vol  11  pp  391427  1999   128  j bohn and h vogt  robust probabilistic positioning based on high-level sensor-fusion and map knowledge  swiss federal institute of technology  institute for pervasive computing press  2003   129  s bhattacharya  p floreen  a forsblom et al  ma $ $ ivan intelligent mobile grocery assistant  in proceedings of the 8th international conference on intelligent environments  ie 12   pp  165172  ieee  guanajuato  mexico  june 2012   130  j krumm  l williams  and g smith  smart-movex on a graph-an inexpensive active badge tracker  in proceedings of the 4th international conference on ubiquitous computing  ubicomp 02   pp  299307  goteborg  sweden  june 2002   131  d l lee and q chen  a model-based wifi localization method  in proceedings of the 2nd international conference on scalable information systems  infoscale 07   p 40  acm  brussels  belgium  june 2007   132  c s jensen  h lu  and b yang  graph model based indoor tracking  in proceedings of the 10th international conference on mobile data management  systems  services and middleware  mdm 09   pp  122131  taipei  taiwan  may 2009   133  y nam  map-based indoor people localization using an inertial measurement unit  journal of information science and engineering  vol  27  no  4  pp  12331248  2011   134  indoorgml  http  //www.indoorgml.net/   135  j a herrera  p ploger  a hinkenjann  j maiero  m flores  and a ramos  pedestrian indoor positioning using smartphone multi-sensing  radio beacons  user positions probability map and indoorosm floor plan representation  in proceedings of the international conference on indoor positioning and indoor navigation  ipin 14   pp  110  busan  republic of korea  october 2014   136  a mariakakis  s sen  j lee  and k.-h kim  single access point based indoor localization  in proceedings of the 20th international conference on mobile systems  applications  and services  mobisys 14   pp  315328  bretton woods  nh  usa  june 2014 mathematical problems in engineering  137  s kumar  s gil  d katabi  and d rus  accurate indoor localization with zero start-up cost  in proceedings of the 20th annual international conference on mobile computing and networking  mobicom 14   pp  483494  maui  hawaii  usa  september 2014   138  t higuchi  h yamaguchi  and t higashino  contextsupported local crowd mapping via collaborative sensing with mobile phones  pervasive and mobile computing  vol  13  pp  2651  2013   139  c xu  b firner  r s moore et al  scpl  indoor devicefree multi-subject counting and localization using radio signal strength  in proceedings of the 12th international conference on information processing in sensor networks  ipsn 13   pp  7990  philadelphia  pa  usa  april 2013   140  m seifeldin  a saeed  a e kosba  a el-keyi  and m youssef  nuzzer  a large-scale device-free passive localization system for wireless environments  ieee transactions on mobile computing  vol  12  no  7  pp  13211334  2013   141  p baier  f durr  and k rothermel  opportunistic position update protocols for mobile devices  in proceedings of the acm international joint conference on pervasive and ubiquitous computing  ubicomp 13   pp  787796  acm  zurich  switzerland  september 2013   142  a uzun  m salem  and a kupper  semantic positioning an innovative approach for providing location-based services based on the web of data  in proceedings of the ieee 7th international conference on semantic computing  icsc 13   pp  268273  irvine  calif  usa  september 2013   143  y gwon and r jain  error characteristics and calibrationfree techniques for wireless lan-based location estimation  in proceedings of the 2nd international workshop on mobility management & wireless access protocols  mobiwac 04   pp  2 9  philadelphia  pa  usa  october 2004 advances in operations research hindawi publishing corporation http  //www.hindawi.com volume 2014 advances in decision sciences hindawi publishing corporation http  //www.hindawi.com volume 2014 journal of applied mathematics algebra hindawi publishing corporation http  //www.hindawi.com hindawi publishing corporation http  //www.hindawi.com volume 2014 journal of probability and statistics volume 2014 the scientific world journal hindawi publishing corporation http  //www.hindawi.com hindawi publishing corporation http  //www.hindawi.com volume 2014 international journal of differential equations hindawi publishing corporation http  //www.hindawi.com volume 2014 volume 2014 submit your manuscripts at http  //www.hindawi.com international journal of advances in combinatorics hindawi publishing corporation http  //www.hindawi.com mathematical physics hindawi publishing corporation http  //www.hindawi.com volume 2014 journal of complex analysis hindawi publishing corporation http  //www.hindawi.com volume 2014 international journal of mathematics and mathematical sciences mathematical problems in engineering journal of mathematics hindawi publishing corporation http  //www.hindawi.com volume 2014 hindawi publishing corporation http  //www.hindawi.com volume 2014 volume 2014 hindawi publishing corporation http  //www.hindawi.com volume 2014 discrete mathematics journal of volume 2014 hindawi publishing corporation http  //www.hindawi.com discrete dynamics in nature and society journal of function spaces hindawi publishing corporation http  //www.hindawi.com abstract and applied analysis volume 2014 hindawi publishing corporation http  //www.hindawi.com volume 2014 hindawi publishing corporation http  //www.hindawi.com volume 2014 international journal of journal of stochastic analysis optimization hindawi publishing corporation http  //www.hindawi.com hindawi publishing corporation http  //www.hindawi.com volume 2014 volume 2014 