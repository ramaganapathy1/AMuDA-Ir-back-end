luo et al  human-centric computing and information sciences 2013  3:2 http  //www.hcis-journal.com/content/3/1/2 research open access enhancing wi-fi fingerprinting for indoor positioning using human-centric collaborative feedback yan luo1  orland hoeber2 and yuanzhu chen2,3* *correspondence  yzchen @ mun.ca 2 department of computer science  memorial university of newfoundland  st.johns  nl  canada 3 department of computer science  the university of regina  regina  sk  canada full list of author information is available at the end of the article abstract position information is an important aspect of a mobile devices context  while gps is widely used to provide location information  it does not work well indoors  wi-fi network infrastructure is found in many public facilities and can be used for indoor positioning  in addition  the ubiquity of wi-fi-capable devices makes this approach especially cost-effective  in recent years  folksonomy-like systems such as wikipedia or delicious social bookmarking have achieved huge successes  user collaboration is the defining characteristic of such systems  for indoor positioning mechanisms  it is also possible to incorporate collaboration in order to improve system performance  especially for fingerprinting-based approaches  in this article  a robust and efficient model is devised for integrating human-centric collaborative feedback within a baseline wi-fi fingerprinting-based indoor positioning system  experiments show that the baseline system performance  i.e  positioning error and precision  is improved by collecting both positive and negative feedback from users  moreover  the feedback model is robust with respect to malicious feedback  quickly self-correcting based on subsequent helpful feedback from users  introduction after over a decade of research and development  location-aware services have gradually penetrated into real life  they assist human activities in a wide range of applications  from productivity and goal fulfillment to social networking and entertainment  traditionally  location-aware applications have been confined to outdoor environments  relatively less research has explored the potential applicability of similar services for indoor settings  however  in large indoor environments such as airports  libraries  or shopping centres  location-awareness can increase the quality of service provided by these facilities  large scale deployment of indoor location-awareness is much more difficult due to two technical challenges  first  gps can not be deployed for indoor use because gps signals can not reach indoor receivers  second and more importantly  due to complicated indoor environments such as building geometries  the movement of people  and the random effects of signal propagation  triangulation-based approaches are much less effective  1   in addition  interference and noise from other devices can also degrade the accuracy of positioning  on the other hand  such challenges provide researchers with great 2013 luo et al  ; licensee springer  this is an open access article distributed under the terms of the creative commons attribution license  http  //creativecommons.org/licenses/by/2.0   which permits unrestricted use  distribution  and reproduction in any medium  provided the original work is properly cited  luo et al  human-centric computing and information sciences 2013  3:2 http  //www.hcis-journal.com/content/3/1/2 opportunities for innovative indoor positioning techniques  some early indoor positioning technologies used infrared  laser  and/or ultrasonic range finders  yielding fairly good system performance in field tests  2   the disadvantages of such an approach are its size  complexity  and cost  which render it infeasible for mobile devices  a number of researchers have been working on using wi-fi infrastructure for indoor positioning  even though it was not specifically designed for this purpose  3   due to the infeasibility of indoor triangulation  most of these systems use a fingerprinting approach based on the received signal strength  rss  transmitted by nearby wi-fi access points  3   typically  such an approach consists of a training phase and a positioning phase  in the training phase  each survey position is characterized by location-related wi-fi rss properties called wi-fi rss fingerprints  4   during the positioning phase  the position likelihood is calculated based on the current wi-fi rss measurements  for wi-fi fingerprinting  fine-grained system training is normally required to achieve high accuracy and resolution  this results in significant costs in terms of initial configuration and ongoing maintenance in order to continuously adapt to environmental changes and wi-fi infrastructure alterations  such alterations are not uncommon due to system malfunctions  equipment upgrades  or simply turning on and off wi-fi access points controlled by individual users  a great deal of effort has been made by researchers to reduce such costs  a potentially effective way is to let users provide feedback to facilitate the construction and continual maintenance of the rss fingerprints database  in this article  we propose a wi-fi based indoor positioning system that includes an integrated human-centric collaborative feedback model  in the proposed prototype  we define an efficient and robust user feedback model  where the initial likelihood distribution calculated by the positioning system will be compensated before being presented to the user  further  the user can participate in how the compensation works in the future by providing feedback  the rest of this article is organized as follows  an overview of the related work is provided in section related work  in section baseline wi-fi fingerprinting indoor positioning system  we describe a baseline wi-fi fingerprinting framework  the details of the proposed user feedback model are explained and discussed in section human-centric collaborative feedback model  this user feedback model is tested and evaluated in comparison to the baseline method in section evaluation  this article concludes in section conclusions and future work with a summary of the primary contributions of this work and an overview of future work  related work the wi-fi-based positioning technology has a very promising application prospect mainly because of the ubiquitous and inexpensive nature of wi-fi infrastructure  also  wi-fi is widely used and integrated in various electronic devices  thus  the wi-fi based positioning systems can also reuse these mobile devices as tracking targets to locate users  which is a less intrusive way to provide location-aware services  wi-fi fingerprinting-based indoor positioning due to the infeasibility of signal propagation model-based distance estimation  more and more researchers have employed a wi-fi fingerprinting-based approach  which is more robust  accurate  and cost-effective in real indoor environments  however  its system page 2 of 23 luo et al  human-centric computing and information sciences 2013  3:2 http  //www.hcis-journal.com/content/3/1/2 performance is highly dependent upon the elaborate training process and ongoing maintenance efforts  also  in the positioning phase  random propagation effects of signal propagation introduced by complex indoor environments may result in large rss fluctuations or access point  ap  loss  5   i.e  aps which can not be heard   which could cause the fingerprints in the database to become inefficient and result in large positioning errors  these shortcomings not only imply a high system overhead and training cost  but also vulnerability to environmental alteration  however  if such a system is enhanced with a self-learning ability adapting it to the environmental changes  such inaccurate positioning outcomes can be compensated  for mobile devices carried by people  such a self-learning capability and positioning compensation could come from end users for free  users could provide feedback to the positioning service based on their knowledge of the surroundings  they may choose to accept  reject  or supply specific information  i.e  their known location  to modify the system results after being given the estimated position  human feedback to fingerprinting-based positioning process active campus  6  is an early system integrating user feedback  it allows users to update the training data incrementally for future use  when the system location is incorrect  users can click on the correct location and suggest new positions  similarly  redpin  7  uses a folksonomy-like approach  where many users train the system while using it  gallagher at el   8  focus on the adaptation of wi-fi infrastructure alteration  they investigate a new method to utilize user feedback as a way of monitoring changes in the wireless environment  users are prompted to send their rss measurements to a remote positioning server  the server can then update the wi-fi rss fingerprints in the database based on the observations from the users  park et al   9  propose a user promotion mechanism  they argue that in a human-centric positioning system  it is useful to only prompt users for their location when the system error is large  they propose a mechanism to convey the systems spatial confidence in its prediction based on a voronoi diagram  and the system only prompts users whenever its confidence falls below a threshold  therefore  the size of the voronoi cell naturally represents the spatial uncertainty associated with prediction of the bound space  once the size of the current voronoi cell is beyond a threshold  the system will prompt users to provide feedback  the above approaches refine the existing wi-fi rss fingerprint-based positioning system with the integration of human-centric feedback  however  a potential pitfall is that the model constructed during the training phase could also be negatively affected by unreliable or misleading user feedback  thus  it is crucial that the feedback from users should be given proper weight or credibility  rather than blind acceptance or rejection  hossain et al   10  propose a simple credibility rating  in their system  a users estimation is given a higher credibility weight if the suggested position has a small discrepancy with the system  in fact  according to the observation of our preliminary experiments  the system results are mostly close to users true position  however  they are occasionally very far away from the true position due to insufficient wi-fi rss data or large variance  in that case  if users feedback follows the systems estimation and is assigned a high weight  it in fact becomes an outlier feedback and could bring large interference to future positioning queries  such negative effects from outlier user feedback should be eliminated  a straightforward solution could be using clustering algorithms to filter outliers  9   page 3 of 23 luo et al  human-centric computing and information sciences 2013  3:2 http  //www.hcis-journal.com/content/3/1/2 in this article  we will discuss a more general and efficient framework using a wider variety of user feedback  such a framework is endowed with a high degree of system robustness when a large number of users provide correct feedback  even when incorrect feedback is provided  the system is able to quickly recover by incorporating subsequent corrective feedback  baseline wi-fi fingerprinting indoor positioning system we start by first introducing a baseline wi-fi fingerprinting system  the implementation of this baseline system is similar in many respects to the systems in the literature  11   however  it is also refined to be more robust and suitable for integrating and processing user feedback  training phase the system training is conducted for each survey point in a two-step process  the first step is to collect multiple wi-fi scans in order to stabilize the average of rss readings and calculate the variances  the variance is used to detect the environmental interference level  where a large variance tends to cause unreliable positioning results  the following step utilizes the information collected by these wi-fi scans to generate an rss fingerprint for each survey position  collect raw wi-fi rss data at each survey position  system administrators use a mobile device to scan for the beacon frames transmitted by nearby wi-fi aps  in each wi-fi scan  beacon frames from different aps are received and converted to a list of 3-tuples  which contains the mac address of an ap  the rss in dbm  and timestamp  note that a single scan may not be able to capture beacon frames from all nearby aps due to the different beacon frame broadcasting periods or severe signal fading  also  the collected rss values have a natural variation when indoors  which is unavoidable  to compensate the rss fluctuation and obtain complete ap information  a sufficiently large number of scans is needed to create an rss fingerprint  as a result  in a given period of sampling  the device logs a time series of rss vectors  these vectors are then used to construct the wi-fi rss fingerprints for each measured location in the training grid  generate system anchors the statistics are extracted from the raw wi-fi measurement data to generate an wi-fi rss fingerprint for each survey position  a wi-fi rss fingerprint is defined as a vector of 5-tuples  i.e  mac  timestamp  rss mean  count  and rss variance   describing a set of aps  the definition and explanation for each field are given as follows  given the i-th ap in a wi-fi rss fingerprint  each ap determines one dimension of such a vector  mac  the mac field contains its mac address  denoted as mi  timestamp  the time of creating the fingerprint is stored in the timestamp field  denoted as t rss mean  the rss mean ri is an average of the wi-fi rss over the sampling period  page 4 of 23 luo et al  human-centric computing and information sciences 2013  3:2 http  //www.hcis-journal.com/content/3/1/2 count  the value of count is the number of occurrences of the ap during the sampling period  denoted ci  which is a very important indicator for the reliability of this ap  for a fixed number of wi-fi scans  a large count value means that the ap can be heard for most of the time  indicating that the ap will have a more reliable estimation of its rss value  rss variance  rss variance contains the variance of the measured rss from the ap  denoted i  the fluctuation level of the current wi-fi environment at a certain survey position can be estimated by analyzing the wi-fi rss fingerprint  each ap has its own mean and variance  which can not provide a global description about the current wi-fi environment  in order to estimate the fluctuation level of the entire environment  we use the weighted average of rss variance for each ap  the occurrence or the value in the count field for each ap is utilized as the weight  the collective rss variance for this fingerprint is defined as  if i ci  fs =  s ifs ci where fs is its rss fingerprint  at the end of the training phase  each survey position is associated with an rss fingerprint containing aps that describe the specific location  for each survey position ps in the system  we define a system anchor as as  ps  fs  the system anchors are reference points to determine the positions of mobile devices  note that it is quite possible for the rss measurements to vary throughout the day  based on cyclical activities such as the number of people within the building  their use of electronic devices  etc  in order to carefully explore the benefits of the core contribution of this work  i.e  the inclusion of human-centric feedback within the positioning process   we found it necessary to simplify the problem domain and assumed that the rss measurements are stable over time  as a result  we conducted all testing and experimentation at a consistent time of day to avoid temporal-based variances in the rss measurements  a further discussion on how to extend this work to the more realistic situations of time-varying rss measurement is provided in section conclusions and future work  positioning determination phase in the positioning phase  live wi-fi measurements will be collected and used to query the fingerprint database  using only a few wi-fi scans during the positioning phase may generate a large error due to lack of informative rss data  for experimental purposes  the prototype implementation allows for a variable number of wi-fi scans to evaluate system performance  figure 1   suppose the total wi-fi scan number is s and the i-th scan will generate an rss vector ri  i  1  2  3      s   given n system anchors  when the first rss vector is formed  we use it to calculate the likelihood lj  j  1  2  3      n  of it matching the fingerprint for each system anchor  each subsequent scan should lead to a cumulative estimation result with a decreasing error  as such  the estimated result will become more and more reliable as more rss vectors are used  page 5 of 23 luo et al  human-centric computing and information sciences 2013  3:2 http  //www.hcis-journal.com/content/3/1/2 figure 1 selection the number of wi-fi scan  select the wi-fi scan numbers for generating fingerprints  position likelihood distribution in terms of our baseline system  we use sparse vectors containing all n aps and a gaussian kernel to calculate the likelihood for each system anchor  which is robust and efficient according to the results of our preliminary experiments  the gaussian kernel method was originally used in support vector machines  svm  to classify data  12   and has also been found to be very efficient for rss vectors likelihood calculation  11,13,14   given an rss live measurement  observation  vector generated at location p as rps  the resulting likelihood estimate between rps and fingerprint fi in system anchor asi is the sum of n equally weighted density functions l  rps  fi  = n  kg  rmk ; rfk   k=1 where rmk is the rss of k-th ap in the live measurement vector rps and rfk is the rss mean of k-th ap with the same mac address in fingerprint fi  note that when rmk or rfk is an impossible value  e.g  -100 dbm   we just ignore this dimension  kg denotes the gaussian kernel or radial basis function  gaussian rbf   whose value depends on the distance from the centre  it is given as    rmk rfk  2 1 exp  kg  rmk ; rfk  = 2 2 2 where is an adjustable parameter that determines the width of the gaussian kernel and the centre is rfk  page 6 of 23 luo et al  human-centric computing and information sciences 2013  3:2 http  //www.hcis-journal.com/content/3/1/2 in terms of wi-fi rss  whose value domain is  90dbm  30dbm   less than 0.05 or greater than 0.5 could lead to a weak discrimination ability of gaussian rbf  in the particular environment  we have to tune the value in order to archive adequate system performance  after the likelihood calculation  each system anchor has a likelihood for being the true position of the device  instead of just returning a single estimation  the system selects the top-k system anchors as candidates in order to provide redundant true position information  the main reason is that the true position may not always be in the system anchor with the highest likelihood  the next step is to choose a representative from these top-k candidates as the systems estimation of the position  position selection a nave approach would be to use the weighted mean of the top-k anchors as the estimation for the position  however  if one or more outliers exist  the weighted mean position could be pulled far away from the cluster formed by other system anchors  as a result  this mean position could be a meaningless point in the physical space  instead  we can use an approach to the vertex p-centres problem  15  to determine the representative of the top-k anchors  it is a computationally expensive problem for general k however  in our case  we only consider the case of p = 1  i.e  the 1-centre problem  since the value of k could be very small  less than five   we do not analyze the algorithm complexity at this point  in particular  the vertex 1-centre for our positioning system is the system anchor point that minimizes the maximum distances from itself to the other top  k 1  anchor points  these distances are weighted with the likelihood estimated as above  for two indices i  j = 1  2      k  we minimize the following over all values for i max j =i d  i  j   li where d  i  j  is the euclidean distance between anchors asi and asj and li is the likelihood of asi  by choosing the vertex 1-centre  the resulting anchor takes advantages of both its likelihood and the positioning information shared by other top-k anchors  human-centric collaborative feedback model before discussing the user feedback model in detail  it is useful to begin by identifying three types of user input that can be collected within a human-centric collaborative feedback system  positive feedback is generated when users reject the estimated position and suggest a location based on their knowledge  in such a case  the system can accept the updated information from the users  the result is that the system may create new anchors from the users suggestions  called user anchors  negative feedback indicates that the users do not believe the estimated position  and are unable to make any suggestion as to their current location  in this case  the system should reduce the positioning likelihood of the returned location in the future  null feedback occurs when users choose not to provide any feedback  the assumption here is that the estimated position is accurate  and that there is no need to make any modification to the positioning model  page 7 of 23 luo et al  human-centric computing and information sciences 2013  3:2 http  //www.hcis-journal.com/content/3/1/2 next  we will present the general idea of our user feedback model  assume that the model has n  system and user  anchors  and the likelihood of the i-th  i = 1  2      n  anchor is denoted as li  before ranking these anchors based on the likelihood vector l  our user feedback model compensates each li with two factors  i and i as   l = i l i if ai is a system anchor  and i i li if ai is a user anchor due to the temporal or permanent random interfering factors of complex indoor environments  the reliability of system anchors will be reducing  in order to solve this problem  we design the factor to gradually reduce the likelihood of system anchors as negative feedback is received  as mentioned before  the system estimation is provided by the vertex-1 centre of top-k anchors  however  if this estimation receives negative user feedback  this means that the user believes that they are not near this location which is an indication that the data stored for these top-k anchors may not be accurate  as a result  the model reduces their likelihood by updating the factors for these top-k anchors  if more and more users provide negative feedback on a system anchor  it may never be selected as one of the top-k anchors  the factor thus gives the system an ability to forget outdated or unreliable knowledge  on the other side  new knowledge  user anchors  will be added into the database via positive user feedback  however  when a user anchor is first created  its likelihood is reduced by the discounting effect of the small initial value  the rational is that the system can not assess the reliability or credibility of a newly created user anchor  which may be from a malicious user   however  as more and more similar user anchors are generated to confirm it  its factor will be increased  once some user anchors become sufficiently reliable  they may appear to be within the top-k anchors to affect the system estimation  also  the factor could affect user anchors should they receive negative feedback  the user anchor and factor enable the system to absorb new knowledge about the wi-fi environment  as such  future users can take advantage of the knowledge shared by previous users  also  they are encouraged to provide feedback to benefit subsequent users  as a result  the positioning model can be consistently updated via the user feedback model thus designed  later in this section  we will explain how to calculate the and factors in detail  positive feedback suppose likelihood calculation is finished  and each system anchor asi   i  1    n   has a likelihood value li  for positive user feedback  users try to tell the system their estimations by providing suggestion positions  note that these estimations could be close to the true position  accurate feedback  or still far away from it  inaccurate feedback   whenever the system receives a user-suggested location associated with its current rss measurement  denoted as user fingerprint  the system creates a temporary user anchor  au   if this anchor is sufficiently similar to an existing user anchor in the model  it is merged with it  and the factor is updated  otherwise  it becomes a new user anchor  with the associated factor set to a very small initial value  it indicates that the newly create user anchor is not as reliable as system anchors at the beginning  page 8 of 23 luo et al  human-centric computing and information sciences 2013  3:2 http  //www.hcis-journal.com/content/3/1/2 temporary user anchor since a users suggested position could be arbitrary  saving these suggestions separately would bloat the model significantly  therefore  we use discrete locations by dividing the study area into an m n grid  that is  any position within a grid cell is represented by the centre of the cell  this grid-based selection of the position is enabled directly in the user interface provided to the user  figure 2   note that the resolution of this grid could be different from the resolution as used in the training phase  we can set smaller grid space because the system training from users is cost-effective  this helps to efficiently reduce the grid space between system anchors  thus  the resolution of entire system could be refined  within each grid cell  its geometric centre is used to represent the positions of all temporary user anchor points falling into it  we thus define the user anchor au as  au =  pu  fu   where pu is the grid cell centre that contains the user suggested position and fu is the user fingerprint summarized from the current wi-fi rss measurement  anchor merge a newly generated positive feedback could be either converted to a new user anchor point or merged with an existing user anchor point based on their similarity  as mentioned figure 2 user interface  positive feedback  the user interface allows the user to select grid cells for positive feedback  confirming this choice with a double tap  page 9 of 23 luo et al  human-centric computing and information sciences 2013  3:2 http  //www.hcis-journal.com/content/3/1/2 before  we believe that positive feedback represented by a user anchor point should gradually become reliable if more and more similar user anchor points are generated to confirm it  before we discuss how to update the reliability of user anchors  we define the similarity between two user anchor points  given user anchor points aui and auj i  = j  their similarity is determined by two aspects  wi-fi rss fingerprint similarity  a natural measurement mechanism is the cosine similarity in the range of  0  1   thus  the wi-fi rss fingerprint similarity fu is given as   1 if cos  fui  fuj  > a  sfu = 0 otherwise where fui and fuj are wi-fi rss fingerprints of user anchor points aui and auj respectively  they are all sparse vectors of n dimensions ; a is the threshold for wi-fi rss fingerprint similarity  physical position similarity  if two user anchor points share the same geometric centre of a grid as their position  they are considered as similar in position  as a result  we claim that two user anchor points are similar if they satisfy both of the two similarity conditions above  a temporary user anchor aui is thus merged with the existing user anchor auj in the same cell if their fingerprints are sufficiently similar  if multiple anchors already exist in the same cell as aui  we only consider the most similar one  denoted auj  if the similarity between aui and auj is greater than a threshold  the temporary user anchor is regarded as the same as the existing one  and therefore is merged with it  the factor whenever a temporary user anchor is merged with an existing user anchor in the system  the associated factor is updated  for user anchor aui  we define i as i = 1  with x 0 and 0 < a 1  a + ex where the variable x has a cumulative effect and a is a parameter controlling the initial and maximum values of i  when a user anchor aui is first created  its original likelihood will be reduced by a small  as more positive feedback is provided in support of it  its factor gradually increases until it reaches an upper limit  thus  the magnification capability of the factor is a+1 a  the increment of x is defined as x = t ts + ef b with b > 0 the pace of the increase of x is controlled by a few aspects  an independent parameter b  which compensates the increasing velocity of x when there are many users  e.g  in a large shopping centre   we may not want to trust their individual estimation much  instead  we can reply on the convergence effects of large amount of users to evolve the mode  however  when there are only a few users  e.g  in a depot   we assign each individual feedback a much higher weight  page 10 of 23 luo et al  human-centric computing and information sciences 2013  3:2 http  //www.hcis-journal.com/content/3/1/2 the variance of the current rss fingerprint  f  the user feedback generated in the environment with small rss variance will have a greater influence on the evolution speed of the model  if t is the number of wi-fi scans used in the positioning query and ts is the number of wi-fi scans used during system training  their ratio tts also reflects the credibility of this positive feedback  as a result  the factor increases fastest with the first few instances of the user anchor  becoming stable once a sufficient number of feedback events are received  the rationale for this design is to allow the system to quickly adapt to new information provided by the users  but without this feedback overpowering the system  negative feedback suppose the system delivers a position from the top-k anchors according to their likelihood ranking  but the user believes this location to be incorrect and can not provide any further information regarding the actual location  figure 3   the negative user feedback to this estimated position can also provide valuable information to the system  typically  when a user rejects the position estimated by the system  the reason could be that the user is nowhere near any of the anchors known by the system  in this case  none of the top-k anchors would truly represent a good estimate  therefore  we should try to decrease their likelihoods simultaneously  figure 3 user interface  negative feedback  a red cross will be placed on the system estimation indicating a negative feedback  page 11 of 23 luo et al  human-centric computing and information sciences 2013  3:2 http  //www.hcis-journal.com/content/3/1/2 given an anchor ai  we use a negative user feedback factor i to reduce its likelihood according to the accumulation of negative feedback received  similar to the positive feedback model  the negative factor model also has fast adaptability  accordingly  we define i as i = ex  when an anchor is given a negative feedback  we give x in above formula the same increment x used in the positive user feedback  the value of is inversely related to x  such that will decrease from the initial value 1 to its limit zero as x increase from zero to infinity  as a result  if more and more users reject the same set of anchors  they will not be chosen as the top-k due to the small value of the factor  evaluation experimental settings the system evaluation consisted of two phases  the first phase was to analyze the performance of the baseline system without user feedback in field tests  the accuracy and precision of the baseline system was calculated  by analyzing these two performance metrics  we can determine whether or not our baseline system is suitable for comparison purposes  during the second phase  we explored how the proposed user feedback model improved the system performance  experiments and evaluations with this feedback model were conducted in an complex indoor office environment  which is the part of the 2nd floor of the engineering building at memorial university  the reason we chose this experimental field is that we can fully control our evaluation process under this environmental setting  the space was divided into a grid using a 33m cell size  33 positions were selected within the hallways for training the baseline system  denoted the training area   and an additional 20 positions were selected as untrained positions for testing purposes  denoted the non-training area   a diagram of the setting is provided in figure 4 system anchors were created in the training area only  note that the non-training area lacks valid system or user anchors  it can be treated as an area that is the result of environment alteration  a new wi-fi coverage area  or a region that was neglected in the training of the system  the prototype system was developed for iphone os 3.1.2 ; experiments were conducted using the apple iphone and ipod touch devices  the system training was conducted during semester break  april  2010   each rss fingerprint had been generated by extracting features from 20 wi-fi scans  which took approximately two minutes  the baseline system evaluation was conducted during the summer semester  may  july  2010  with much more interference from other people and their electronic devices  thus  the rss data provided by users are more capable of describing the wi-fi characteristics of the current environment  as mentioned earlier in section human-centric collaborative feedback model  the parameters in the feedback model are used to adjust the rate of change of the and factors  i.e  the sensitivity of our user feedback model   in production environments  the sensitivity of the user feedback model will depend on the number of users and the degree of trust of those users  for the purpose of evaluation  we increased the sensitivity of the page 12 of 23 luo et al  human-centric computing and information sciences 2013  3:2 http  //www.hcis-journal.com/content/3/1/2 page 13 of 23 stairwell # 3 en-2s03 en-2028 en-2029 en-2030 en-2032 en-2033 en-2039 en-2035 en-2034 en-2040 en-2037 en-2026 en-2027 en-2038 en-2025 stairwell # 4 en-2025a en-2031 en-2031a en-2031c en-2031b en-2024 en-2s04 en-2036 en-2022 en-2024a en-2018a en-2023 en-2018b en-2013 en-2009 en-2022a en-2021b en-2021 en-2018 en-2020 en-2019 en-2014 en-2016 en-2017 en-2015 en-2011 en-2012 en-2008 en-2010 en-2021a figure 4 experimental field  the experimental field includes both the training cells  green triangles  as well as measurements taken outside of the training area  red discs   user feedback model in order to speed up the rate at which the system is able to learn from user feedback  we set the value of parameter to be 1  which means that the magnification factor of parameter is 2 the value of parameter was set to be 0.6 as such  according to the design of our user feedback  these parameter setting will weight the first four users much larger than subsequent users  which grants the system a fast learning ability  baseline system evaluation since the time that a user is willing to spend waiting for a positioning result influences the service quality  we have conducted an experiment to investigate the relationship between time  i.e  the number of wi-fi scans  and system performance  we use the baseline system to determine the smallest number of wi-fi scans  measured at one scan per second  needed for the system to produce a reasonably accurate result  at the same time  the performance of our baseline system can be evaluated with respect to other similar systems described in the literature  in the training area  for each survey point  we have collected 20 scans of the wi-fi rss  using these incrementally to query the positioning system  the average positioning error after each scan is plotted as the bottom curve in figure 5 we can observe that for a small number of scans  the system has an error between 2 and 4m  as more scanned rss data are used  i.e  greater than four   the accuracy stabilizes at around 2m  the system precision  as another very important metric for system performance  is plotted in figure 6 we selected the positioning precision for 9 out of the 20 scans  illustrating three phases of wi-fi sampling  the early phase consists scans 1  2  and 3  red curves   in this phase  due to insufficient wi-fi rss data  the precision is low  the second phase includes scans 5  10  and 15  green curves   it is in the middle of the wi-fi sampling and has more wi-fi rss data than the first phase  the last phase is at the end luo et al  human-centric computing and information sciences 2013  3:2 http  //www.hcis-journal.com/content/3/1/2 page 14 of 23 training area  no user feedback non-training area  no user feedback 14 average positioning error  m  12 10 8 6 4 2 0 0 2 4 6 8 10 12 wi-fi scan number 14 16 18 20 figure 5 baseline system accuracy  without user feedback  using the baseline system  the positioning error becomes relatively stable using just four wi-fi scans  note that the system is significantly more accurate within the training area  percentage of confidence in training area  without feedback 1 percentage of confidence  precision  0.9 0.8 0.7 0.6 0.5 0.4 0.3 0 5 10 15 20 25 30 positioning error  m  scan 1 scan 2 scan 3 scan 5 scan 10 scan 15 scan 18 scan 19 scan 20 figure 6 baseline system precision  without user feedback  training area  the precision of first three scans  red curve  is much lower than later scans  green curves for scan 5,10  and 15 and blue curves for 18  19  and 20   however  the blue and green curves are very close to each other  indicating the precision after four scans is not improved significantly  luo et al  human-centric computing and information sciences 2013  3:2 http  //www.hcis-journal.com/content/3/1/2 page 15 of 23 of wi-fi sampling  scans 18  19  and 20   which includes all rss vectors  blue curves   from figure 6  we can see that the green and blue curves are very close to each other  which means that a scan number greater than four will not generate significant precision improvement  however  if the wi-fi scan number is small  i.e  less than four   the probability of generating outliers is considerably high  similarly  in the non-training area  we also collected 20 scans for each position  we plotted the positioning accuracy for the number of scans as the top curve in figure 5 and positioning precision in figure 7 in this case  the system performance is significantly lower than in the training area due to the lack of system anchors  however  in both the training area and non-training area  four scans provide a reasonable trade-off between performance and positioning time  therefore  we use this as the number of scans in the remainder of our experiments  according to the analysis of our baseline system  the average positioning error is between 2m and 4m  respectively  depending on the wi-fi sampling time  it is in fact only marginally worse than the 0.7m to 4m average positioning error yielded by the best-performing but intensively trained horus system  using 100 wi-fi scans and much smaller grid space of 1.52 m and 2.13 m   16   thus  we believe this baseline system is qualified to evaluate the value of the proposed human-centric collaborative feedback model  collaborative feedback model evaluation in order to evaluate the benefits of the collaborative feedback model  we have defined a number of different scenarios that represent specific types of behaviours of users  while we do not claim that any of these evaluations represents what would occur in real world percentage of confidence in non-training area  without feedback 1 percentage of confidence  precision  0.9 0.8 0.7 0.6 0.5 0.4 0.3 0.2 0.1 0 0 5 10 15 20 25 30 35 positioning error  m  scan 1 scan 2 scan 3 scan 5 scan 10 scan 15 scan 18 scan 19 scan 20 figure 7 baseline system precision  without user feedback  non-training area  similar precision trend can be found in non-training area  blue curves and green curves are similar but both apart from red curves  luo et al  human-centric computing and information sciences 2013  3:2 http  //www.hcis-journal.com/content/3/1/2 page 16 of 23 use  they allow us to examine how the system will react to different types of feedback  our future plans for real-world field trials are discussed in section conclusions and future work  knowledgable and helpful feedback next  we investigate how the user feedback model improves the system performance  in this scenario  whenever the system returns a position that does not match the true position of the user  feedback was provided  we modelled the user as being knowledgable and helpful ; whenever the position was inaccurate  the user suggested positive feedback 80 % of the time  and negative feedback 20 % of the time  we believe it is a reasonable choice for situations where users are highly motivated to provide accurate and positive feedback  in fact  there may be many other users who are providing null feedback  i.e  using the system and trusting the results   however  since such types of users do not affect the evolution of the model  they are not discussed here  within the training area  we define a round as a traversal of all grid cells  in a round  the user stops at each survey position to scan the rss for nearby aps  using four scans   if the result is correct  the user moves to the next position  otherwise  the user provides feedback before moving on  the average positioning accuracy after nine such rounds of visiting and testing each position is plotted in figure 8 in the course of providing this user feedback  the positioning error within the training area improved from approximately 2.5m to 1.5m after just four rounds  from there  little change was observed  note that the baseline system accuracy ranged from 4m to 2m without feedback  at this point  with the integration of human-centric collaborative feedback  the system performance is further improved even in the well trained area  non-training area 14 training area average positioning error  m  12 non-training area  without feedback 10 8 6 4 training area  without feedback 2 0 0 2 4 6 8 training round 10 12 figure 8 system accuracy  with knowledgeable and helpful user feedback  the system accuracy is significantly improved when integrating knowledgeable and helpful user feedback  14 luo et al  human-centric computing and information sciences 2013  3:2 http  //www.hcis-journal.com/content/3/1/2 page 17 of 23 the precision is also improved after four rounds of user-involved positioning within the training area  as we can see in the green and blue curves which are closer to the y axis than red curves shown in figure 9 furthermore  green and blue curves are close to each other  which indicates that the model reaches its optimal performance after approximately four rounds of knowledgeable and helpful feedback  within the non-training area  the experiment followed the same procedure as in the training area  producing the data plotted in figure 8 because there was no training data in these regions  the initial positioning error was rather large  however  after 13 rounds of collecting user feedback  the error decreased from 9m to 2m  the precision is also significantly increased as plotted in figure 10 as a result  the system performance in an area that had not been previously trained became comparable to the training area  the reliable user feedback contains information  user fingerprint  that best characterizes the current wi-fi rss features  such helpful information can help the system to improve the performance  at the beginning of the test within the non-training area  the model contained only system anchors  and therefore could only return the position of a system anchor  i.e  within the training area  to the user  these positions were often far from the true position of the user  as a result of the positive feedback  user anchors were added and the relative weight of these anchors were enhanced by the factor  similarly  with the negative feedback  the weight of the system anchors were reduced by the factor  as a result  the positioning accuracy increased as more user anchors become valid candidate positions  what this means for indoor positioning systems is that the system training and maintenance costs can be reduced significantly by relying on knowledgable and helpful end users percentage of confidence in training area  knowledgeable feedback 1 percentage of confidence  precision  0.9 0.8 0.7 0.6 0.5 0.4 0.3 0 5 10 15 20 25 positioning error  m  round 1 round 2 round 3 round 4 round 5 round 6 round 7 round 8 round 9 figure 9 system precision  with knowledgeable and helpful user feedback  training area  in training area  the precision is improved via integrating knowledgeable user feedback  the green curves and blue curves are close  which indicates that the model is optimally trained after four rounds  luo et al  human-centric computing and information sciences 2013  3:2 http  //www.hcis-journal.com/content/3/1/2 page 18 of 23 percentage of confidence in non-training area  knowledgeable feedback 1 percentage of confidence  precision  0.9 0.8 0.7 0.6 0.5 0.4 0.3 0.2 0.1 0 0 2 4 6 8 10 12 14 16 18 20 22 positioning error  m  round 1 round 2 round 3 round 4 round 6 round 8 round 10 round 11 round 12 round 13 figure 10 system precision  with knowledgeable and helpful user feedback  non-training area  in non-training area  the system precision is significantly increased as more and more knowledgeable user feedback is integrated  working on a partially trained system  eventually achieving the same level of accuracy as a fully trained system  also  the resolution of the positioning system is improved because many reliable user anchors fill the gap between system anchors  thus reducing the grid space or increasing the grid resolution  at this point  the optimal combination of different types of user feedback is not considered  to conduct experiments testing each possible combination is impractical within a limited time period  in fact  this problem can be explored if we could use a simulation testbed  we can collect a large amount of real wi-fi rss data to simulate the wi-fi scans  when the simulated positioning process is finished  virtual user positive or negative feedback can be generated to the evolve the model  as such  the system performance with an arbitrary combination of positive and negative feedback could be estimated  mixed feedback in a real environment  user feedback can be either helpful or malicious  at this point  we assume that the accuracy of user feedback follows the normal distribution  thus  the feedback from malicious users should exist as outliers  we could employ some supervised classification algorithms such as logistic regression or svm to classify the malicious users  however  the wi-fi rss fingerprinting based positioning is essentially an unsupervised or instances-based approach  similar to knn   for instance-based learning  we can cluster different user feedback based on their rss features and locations  which avoids labeling whether the user is benign or malicious  as described in the previous section  we take the grid-based clustering approach with predefined centres  the reliability of each cluster is compensated by our user feedback model  furthermore  the performance of instance-based approaches is in fact highly dependent on whether we will have a large luo et al  human-centric computing and information sciences 2013  3:2 http  //www.hcis-journal.com/content/3/1/2 page 19 of 23 dataset or the noise level in training dataset  thus  if the noise level is very high  e.g  all user feedback are from malicious users   the performance of the system will not be acceptable  in this experiment  we test the model to determine its ability to recover from incorrect feedback  in particular  we model the user feedback as completely malicious at the beginning and as completely informative thereafter  such a behaviour is not typical but it provides a worst case scenario study of the system  followed by its ability to recover from incorrect or malicious feedback  our focus here is on the training area only  as seen in the previous experiments  the non-training area can become nearly as good as the training area with sufficient user feedback  as such  we expect similar results within the non-training area as the training area with respect to mixed feedback  during the initial phase of this experiment  whenever the system returns a correct position estimation  the malicious user has a 50 % chance of either providing negative feedback of suggesting a random false position  when the system is incorrect  the malicious user provides null feedback  following a similar methodology as the previous experiments  such malicious feedback was provided for four rounds  another eight rounds of feedback from a knowledgeable and helpful user was then collected  the position errors for this experiment are plotted in figure 11 we observe that the system error starts out with around 4m and quickly increases to 14m as a result of the malicious feedback  at the same time  the system precision is also reduced to an unacceptable level  shown as the red curves in figure 12 with an error of 14m and extremely low precision  the system is considered to be fairly disturbed by the malicious users  at training area 14 average positioning error  m  12 10 8 6 4 2 malicious user knowledgable and helpful user 0 0 2 4 6 training round 8 10 12 figure 11 system accuracy  providing malicious user feedback  followed by knowledgeable and helpful user feedback  providing malicious user feedback  followed by knowledgeable and helpful user feedback illustrates the ability of the model to self-recover  luo et al  human-centric computing and information sciences 2013  3:2 http  //www.hcis-journal.com/content/3/1/2 page 20 of 23 percentage of confidence in training area  malicious feedback 1 percentage of confidence  precision  0.9 0.8 0.7 0.6 0.5 0.4 0.3 0.2 0.1 0 10 20 round 1 30 40 positioning error  m  round 2 round 3 50 60 70 round 4 figure 12 system precision  providing malicious user feedback  providing malicious user feedback also reduces the system precision significantly  this point  we turn the user into knowledgable and helpful to provide positive feedback whenever the system is incorrect  the user behaviour in this case is the same as in the previous subsection  the helpful feedback quickly corrects the significant positioning errors  recovering to the starting accuracy after five rounds of feedback  and below 3m after eight rounds  at the same time  the system precision is stabilized as indicated by the blue curves in figure 13 as a result  our system has recovered from the low accurate state by integrating helpful and knowledgeable feedback  in real life  helpful and malicious feedback are often mixed together to feed the model  as such  the phenomena described in this experiment might be rarely observed  however  it in fact provides the worst-case  if the model can eliminate the negative effect introduced by continuous malicious or unreliable user feedback  then it is reasonable to deduce that it is robust to malicious user feedback in more moderate or general cases  conclusions and future work in this article  the primary contribution is the presentation and evaluation of a user feedback model which receives and processes human-centric collaborative feedback  the proposed user feedback model adjusts the positioning results via placing a compensation mask over the likelihood vector  distribution  generated in the positioning phase  the history of both positive feedback and negative feedback will affect the compensation ability of such a mask  in general  positive feedback generates user anchors and enhances their reliability  on the other hand  negative feedback reduces the trustworthiness of an anchor  all user feedback will be assigned low compensation power when first created and can be enhanced with multiple similar feedback events  as such  this user feedback model luo et al  human-centric computing and information sciences 2013  3:2 http  //www.hcis-journal.com/content/3/1/2 page 21 of 23 percentage of confidence in training area  knowledgeable and helpful feedback 1 percentage of confidence  precision  0.9 0.8 0.7 0.6 0.5 0.4 0.3 0.2 0.1 0 0 5 10 15 20 25 30 35 40 45 50 positioning error  m  round 1 round 2 round 3 round 4 round 5 round 6 round 7 round 8 figure 13 system precision  providing knowledgeable and helpful user feedback  providing malicious user feedback  followed by knowledgeable and helpful user feedback also recovers the system precision to a normal level  should be able to gradually update the systems knowledge and guide the system to learn the changes in the wi-fi indoor environments  based on these principles  we have built a prototype and conducted experiments to evaluate it  experimental results show the ability of the model to improve upon the positioning accuracy and precision in both regions that have been trained  as well as in nearby regions that do not include sufficient anchors  the model is also shown to be robust with respect to malicious feedback  quickly recovering based on helpful user feedback  in general  storing arbitrary user feedback could require very large storage space and the computational cost of typical clustering algorithms  such as k-means  is high  however  the anchor merge mechanism proposed in our user feedback model merges all similar user anchors which avoids the need to store every user anchor  furthermore  the gridbased clustering in the user feedback model only needs to cluster each user anchor within the same grid-cell  which significantly reduces the calculation time  as a result  even with the addition of the user feedback mechanisms to the positioning system  the resulting approach remains efficient  such a feedback model can be further refined and enhanced in a number of interesting ways  the first refinement is to use the temporal aspect of user feedback  such that different times  morning  noon  and night  of a day or different dates  weekdays  weekends  and holidays  is used to generate different rss data patterns  for example  in a university cafeteria  due to the interference from human bodies and electronic devices  the rss measurement generated during lunch time could be very different from that in the early morning  as such  the user feedback generated during lunch time may mislead the positioning activities at other times of the day  in order to solve this problem  the model should take advantage of the timestamp within the rss fingerprint  limiting the candidate luo et al  human-centric computing and information sciences 2013  3:2 http  //www.hcis-journal.com/content/3/1/2 anchors to those that were created at about the same time of the day  this could increase the accuracy of the system in environments with time-related changes in human activities  more complex approaches could be developed that dynamically learn the features of when the rss measurements are changing  using this to partition the data to generate different models for different times of the day  also  we can introduce a forgetting mechanism which could remove user feedback from the system  it could be used to address situations where malicious feedback has been received but subsequent helpful feedback is not available  the second aspect for refinement of this approach is to perform cross platform validation  in real indoor environments  users could carry different types of mobile devices  due to the diversity of manufacture technologies in wireless network interface cards  the rss generated by different wi-fi chips could also be different  however  our entire implementation and experiments are conducted on apple iphone and ipod touch  which indicates its limitation in field validation  at this point  we argue that the system performance could be improved if the diversity of wi-fi chips in different mobile devices is considered  the simplest but efficient approach is to create individual fingerprints database for each type of mobile device  it might improve system performance with a large system overhead  more intelligently  an rss compensation mechanism can be integrated to automatically adjust rss patterns among different mobile devices  the evaluations of the proposed approach have allowed us to validate the ability of the system to learn useful information from the collaborative feedback provided by the users  however  the specific scenarios were somewhat contrived and do not represent realistic user behaviour  as such  field trials within a real-world positioning domain  e.g  new students using the system to find their way around a university campus  are currently in the planning phases  competing interests the authors declare that they have no competing interests  authors contributions all authors contributed equally to this work  yl designed and implemented the proposed prototype  and prepared the manuscript ; oh analyzed and described the theoretic human-centric feedback model  supervised its analysis and edited the manuscript ; yc defined the problem domain and refined the system  designed and developed the system evaluation process  supervised its analysis and edited the manuscript  all authors read and approved the final manuscript  acknowledgements this work was funded by scholarships provided by the school of graduate studies at memorial university to the first author  as well as nserc discovery grants held by the second and third authors  author details 1 department of computer science  the university of western ontario  london  on  canada  2 department of computer science  memorial university of newfoundland  st.johns  nl  canada  3 department of computer science  the university of regina  regina  sk  canada  received  8 august 2012 accepted  30 january 2013 published  6 march 2013 references 1 ladd am  bekris ke  rudys ap  wallach ds  kavraki le  2006  on the feasibility of using wireless ethernet for indoor localization  ieee trans wireless commun 5  8   555559 2 harter a  hopper a  steggles p  ward a  webster p  2002  the anatomy of a context-aware application  wirel netw 8  2   187197 3 bahl p  padmanabhan vn  2000  radar  an in-building rf-based user location and tracking system  in  proceedings of 19th ieee international conference on computer communications  pp 775784 4 kaemarungsi k  krishnamurthy p  2004  properties of indoor received signal strength for wlan location fingerprinting  in  proceedings of international conference on mobile and ubiquitous systems  networking and services  pp 1423 page 22 of 23 luo et al  human-centric computing and information sciences 2013  3:2 http  //www.hcis-journal.com/content/3/1/2 5  6  7  8  9  10  11  12  13  14  15  16 kaemarungsi k  krishnamurthy p  2004  modeling of indoor positioning systems based on location fingerprinting  in  proceedings of 23rd ieee international conference on computer communications  pp 10121022 bhasker es  brown sw  griswold wg  2004  employing user feedback for fast  accurate  low-naintenance geolocationing  in  proceedings of the second ieee annual conference on pervasive computing and communications  pp 111120 bolliger p  2008  redpin-adaptive  zero-configuration indoor localization through user collaboration  in  proceedings of the first acm international workshop on mobile entity localization and tracking in gps-less environments  pp 5560 gallagher t  li b  dempster ag  rizos c  2010  database updating through user feedback in fingerprint-based wi-fi location systems  in  proceedings of ubiquitous positioning indoor navigation and location based service  pp 18 park j  charrow b  curtis d  battat j  minkov e  hicks j  teller s  ledlie j  2010  growing an organic indoor location system  in  proceedings of the 8th international conference on mobile systems  applications  and services  pp 271284 hossain am  van hn  soh ws  2010  utilization of user feedback in indoor positioning system  pervasive and mob compu 6  4   467481 kushki a  plataniotis kn  venetsanopoulos an  2007  kernel-based positioning in wireless local area networks  ieee trans mob compu 6  6   689705 schlkopf b  smola aj  2002  learning with kernels  mit press  cambridge haeberlen a  flannery e  ladd am  rudys a  wallach ds  kavraki le  2004  practical robust localization over large-scale 802.11 wireless networks  in  proceedings of the 10th annual international conference on mobile computing and networking  pp 7084 vossiek m  wiebking l  gulden p  wiehardt j  hoffmann c  heide p  2003  wireless local positioning  ieee microw mag 4  4   7786 kariv o  hakimi sl  1979  an algorithmic approach to network location problems  i  the p-centers  siam j appl math 37  3   513538 youssef m  agrawala a  2005  the horus wlan location determination system  in  proceedings of the 3rd international conference on mobile systems  applications  and services  pp 205218 doi:10.1186/2192-1962-3-2 cite this article as  luo et al   enhancing wi-fi fingerprinting for indoor positioning using human-centric collaborative feedback  human-centric computing and information sciences 2013 3:2 submit your manuscript to a journal and benet from  7 convenient online submission 7 rigorous peer review 7 immediate publication on acceptance 7 open access  articles freely available online 7 high visibility within the eld 7 retaining the copyright to your article submit your next manuscript at 7 springeropen.com page 23 of 23 