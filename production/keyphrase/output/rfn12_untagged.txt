c tubitak turk j elec eng & comp sci  vol.18  no.2  2010   doi:10.3906/elk-0904-3 an rfid based indoor tracking method for navigating visually impaired people rusen oktem and elif aydin department of electrical & electronics engineering  atlm university  incek  06836  ankara-turkey e-mail  rusen @ atilim.edu.tr  eaydin @ atilim.edu.tr abstract this paper tackles the rfid based tracking problem in an obscured indoor environment  the proposed solution is an integral part of a navigation aid for guiding visually impaired people in a store  it uses rf signal strengths and is based on the bayes decision theory  an observation vector is formed by received radio signal strength indication values  transmitted from three transmitters at distinct frequencies in the uhf band  the indoor area is divided into square grids  where each grid is considered as a class  the problem of tracking is expressed as classifying the observed radio signal strengths to the most likely class  a classication rule is formulated by incorporating a priori assumptions appropriate for the studied model  the proposed approach is tested in a laboratory environment  the results prove that the proposed approach is promising in tracking especially when the tracked person is guided by a system  key words  tracking  location estimation  rf signals  bayes  rfid  classication  1 introduction several studies have been conducted to improve the navigation of visually impaired people in both indoor and outdoor environments  1-8   a major challenge of navigation devices lies behind the requirement for a reliable positioning method in order to be able to guide the user in the correct direction  location estimation algorithms are particularly exploited by services providing navigation aids  or by those tracking a person or an object in a certain environment  the technology used in location estimation and tracking depends on the type of the subject environment  indoor  outdoor  large scale  etc   and also on the application  for example  global positioning system  gps  or geographic information system  gis  based systems are often utilized for large scale outdoor environments  1,2   on the other hand  a pair of am radio signal transmitters and a receiver  producing beep sounds when triggered  is preferred for the sake of simplicity and low cost  when a person wants to know the location of a particular object in a small scale outdoor environment  3   for indoor environments  multiple ultrasound or infrared transmitters mounted on the walls or at the ceiling can be used  1,4   such a 185 turk j elec eng & comp sci  vol.18  no.2  2010 system enables estimation of the location of the receiver  by using received signal strength  however  line-ofsight requirement of ultrasound and infrared sensors limit their use in obscured environments  use of passive radio frequency identication  rfid  tags in a grid like structure is another alternative to track or estimate the location with respect to the nearest transmitter  5   the radio signals do not require line-of-sight  and radio signal transmitters are easy to integrate into wireless networks  hence  they have been particularly used for network based location estimation and tracking purposes  6-9   by the term network based we refer to monitoring the location of a subject through a network  several localization and tracking systems proposed in the literature utilize distance measurement functions  10,11   the distance measurement function measures the distance between a receiver and a transmitter  the time dierence of arrival  tdoa   the time of arrival  toa  and the received signal strength  rss  are among the functions used for distance estimations  takizawa et al   10  state that tdoa distance measurement requires two dierent wireless media such as sound and radio waves and toa distance measurement needs highly accurate time synchronization technology  on the other hand  rss exploits either theoretical or empirical calculations for mapping the signal strength measurements to distance  however  radio signals are subject to reections  diractions and scattering in obscured environments  these result in multipath eect and time variance of the observation  hence performance decrease in the estimation  statistical modeling approaches are incorporated for improving the performance in such cases  7-14   these approaches include maximum likelihood  6,7,13  and bayesian methods  8,9,12,14   generally  a radio signal propagation model is assumed rst  and then statistical approaches are used to estimate the model parameters  the model and the formulations may change according to the application  for example  in order to estimate the distance to access points  the parameters of log-distance path loss model is extracted using the bayesian theorem in  8   a hierarchical bayesian graphical model improves the performance  when wi-fi signals collected by multiple terminals are processed for tracking device and personnel in a three oor building  9   in this work  a medium scale obscured indoor environment is focused on  the aim is to monitor the location of a visually impaired person  by processing rss indication  rssi  levels sensed by an rfid tag carried by the visually impaired person  the tag collects signals from three rf transmitters broadcasting at distinct frequencies  the user is guided to follow a certain route by a tactile compass  the directions pointed out by the compass are exploited as a priori information by the location estimation algorithm  the subject environment and data collection system studied in this work are described in section 2 next  we introduce the path loss model and compare the measured rss values with empirically generated ones in section 3 the developed bayes decision based tracking algorithm and its performance are presented in sections 4 and 5  respectively  2 subject environment and data collection location estimation and tracking systems are often composed of two units  data collection and data processing  data collection hardware can be composed of active or passive sensors such as infrared  ultrasound  rf or wi-fi transceivers  the selection depends on the type and scale of the environment and whether line-of-sight is required or not  infrared and ultrasound sensors require line of sight which is not appropriate for large scale or obstacle lled environments  15   in this work  we use radio signal transmitters and a single active rfid tag  which do not require line-of-sight  an rfid tag is an object that can be carried by being attached to or 186 oktem  aydin  an rfid based indoor tracking method for   incorporated into a product  object  animal  or person for the purpose of identication using radio waves  rfid tags can be programmed to store and transmit data to be used for market or location sensing applications  there exist passive and active tags  where passive tags require no power source  and active tags do  16   landmarc  17  is an rfid based location-sensing system which exploits a number of active tags separately for reference and tracking purposes  its location reference tags are used to help location calibration  whereas tracking tags are attached to objects  the accuracy of the system is one to three meters  however  considering that four rfid readers are used for an indoor area in the scale of 36m 2  the expense of rfid readers will not justify deploying the system in a larger scale  moreover  the placement and number of reference tags should be carefully designed since they aect the system performance  in this work  we assume that an active rfid tag is attached to a compact portable hardware unit  and that unit is carried by a visually impaired person  the visually impaired person is navigated around in an indoor environment and is directed to follow a certain route  the environment considered in this work is a laboratory in the scale of  6.8  19.5  2.9  m the area includes obstacles  which cause scattering and reection of radio waves  obstacles are walls  windows  wooden tables with 73 cm height and steel shelves  180x60x192cm   etc  one side of the room is covered with windows and the room walls are made of concrete blocks while the room ceiling is made of concrete with 2cm plaster and oor of concrete with 4cm chipboard  measured data include recordings of rss indicator  rssi  levels from three uhf transmitters  rssi measurements are carried out with the use of an active rfid tag and reader  and 3 transmitter-beacons  each of the three transmitters is located at distant locations of the subject environment as in figure 1  on the walls  in a way to form a triangle  the coordinates of tx1  tx2 and tx3 are  5.75  0  2.35  m   1.2  10.5  2.9  m and  5.75  19.5  2.35  m  respectively  each transmitter transmits rf signals at uhf band  with distinct frequencies  433.056 mhz  433.344 mhz and 433.680 mhz  and with -10dbm  the tag is assumed to be carried by the person to be tracked  and it collects signal strengths from the three transmitters  the rssi sensed by the tag is transferred to a computer via rfid reader by use of proprietary data collection software  and is processed by the computer  data processing system   rssi values are directly proportional to the rss levels ; hence they possess a correspondence to the distance between the tag and the transmitter  transmitters obstacles figure 1 an example indoor environment and positioning of transmitters  special attention is required for adjusting the power levels of the transmitters  if the power level is too high  rssi readings at the neighboring locations may become indistinct  if the power level is too low  rssi readings from the most distant locations will be at noise level  as the scale of the subject environment exceeds the coverage of the transmitters  number of transmitters can be increased so that at least three transmitters have coverage at all locations  however  increase in number of transmitters may increase the duration of rssi readings and hence may limit the responsiveness of the system  a high performance system can be designed by 187 turk j elec eng & comp sci  vol.18  no.2  2010 increasing both the number of the transmitters and the readers for larger scale environments  3 path loss model for indoor environment rss is location dependent as it is aected by factors such as attenuation due to the distance from the transmitter and existing obstacles  buildings represent a complex environment of very large dimensions compared to wavelength  reection  diraction and scattering of radio waves by structures inside a building result in the transmitted signal to reach the receiver through more than one path  18   there are several approaches to indoor propagation prediction  in one approach  electromagnetic theory is applied using ray-tracing techniques  in this method  propagation predictions can be applied without performing propagation measurements rst  however  computation times on personal computers can be long  and then  the predictions can not be obtained interactively or with algorithms for estimating user locations  in the alternative approach  propagation models related to those for describing free-space propagation are empirically or statistically tted to the measurement data  the resulting models are generally straightforward to apply  and prediction results can be computed quickly  18   note that rss is a measure of the power received by the rfid tag from a transmitter and provides information as to location of the person carrying it  the received signal consists of direct  reected  scattered and diracted waves  according to friis formula  rss is expressed in the following form  pr = pt pl + gr + gt  1  where pr is the received signal power  db   pt is the transmitted signal power  db   pl  d  is the path loss  db   and gr and gt are receiving and transmitting antenna gains  respectively  for indoor environments  log-distance path loss model  among dierent path-loss models  in its simplest form often used for electromagnetic signals can be expressed as  pl  db  = pl  d0  + 10n log  d/d0    2  in  2   n is the path loss exponent depending on the building and surrounding medium  which indicates the rate of path loss with the increase of distance ; d0 is the reference distance  and d is the distance between the transmitter and the receiver  in our system  convenient empirical model equation is used  making the following assumptions  19  pl  db  = a + b log  d   3  where a and b are unknown values  some location estimation techniques in the literature aim to estimate the unknown parameters of  2  or similar log-distance path loss model  by use of statistical approaches  20,21   the radar system uses the nearest neighbor method to infer a users location  22   each signal strength sample is compared against the radio map and the coordinates of the best matches are averaged to give the location estimation  the accuracy of radar is about three meters with fty percent probability  in this work  we start with estimating a and b values in equation  3  to form the empirical path-loss expression  for this purpose  we used an extensive set of measurements collected at 192 dierent locations in the subject environment  figure 2 shows the measured rss levels  through a spectrum analyzer  and the plot obtained by substituting empirically driven parameters in  3   for a single transmitter  the solid line refers to the plot generated through  3   and the stars refer to the measured levels  the plots exhibit similar behavior for 188 oktem  aydin  an rfid based indoor tracking method for   the other two transmitters  figure 3 represents the distribution of errors between empirically generated and experimentally measured rss levels  the plots show that although the expected value of the error between the measured values and the empirically generated ones is close to zero  the standard deviation is unacceptably high  the average percentage of error is 32  59  and 45  respectively for the three transmitters  the deviations are due to the fact that radio waves are aected by reection  diraction and scattering  and the subject environment is designed with many obstructions  as the distance between the tag and the transmitter increases  the deviation gets higher  due to increased probability of obstacles in between  as a result  the accuracy of location estimation will be very low if merely the path loss model and the nearest neighbor methods are used  this calls for the development of a new approach  where a priori information can be incorporated  7 -35 6 -40 5 power  dbm  -45 -50 4 -55 3 -60 2 -65 -70 -75 1 0 200 400 600 800 1000 1200 1400 1600 1800 2000 distance  cm  figure 2 comparison of experimental and empirically generated signal strength values  4  0 -15 -10 -5 0 5 10 15 20 25 figure 3 histogram of error between the experimental and empirically generated signal strength values  location estimation with bayesian approach when the signal propagation environment diers signicantly from ideal conditions  rss measurements are unreliable  in order to overcome this problem  we try to incorporate statistical signal processing techniques  4.1 bayes decision theory the bayes theorem is essentially an expression of conditional probabilities  consider an experimental study where the outcome  observation  is a feature vector x corresponding to a pattern  assume that there exist n classes c1  c2    cn where the observed pattern belongs to either one of these classes  the problem is stated as nding the class ci  to which the observed pattern is most likely to belong  23   for this purpose  often a discriminant function g  x  is used as  classify x in ci if gi  x  > gj  x  j = i the discriminant function gi  x  is often dened as ; gi  x  = ln  p  x |ci  p  ci   = ln  p  x |ci   + ln  p  ci    4  189 turk j elec eng & comp sci  vol.18  no.2  2010 where p  x |ci  and p  ci  refer to conditional probability density function and probability of the ith class  respectively  equation 4 is known as the maximum aposteriori  map  decision rule since it chooses the hypothesis which has the highest posterior probability  4.2 problem formulation let us assume that the received signal strength identication levels from the three transmitters by the rfid tag constitute feature vectors x equation  4  shows that a probability model for the feature vectors of each class is required  for this purpose  the indoor environment shown in figure 4 is divided into 120cmx120cm  2x2  square grids  the degree of signal attenuation especially depends on the dominant signal path  line-of-sight path   the power of the line-of-sight path decays with distance squared  18   hence  in our application a signal level change occurs with less than 22 from the center of a grid to the center of a neighbor grid  tx3 table route1 table route2 table non accessible table table table non accessible table route3 table tx2 table non accessible entrance table table table non accessible table wall table non accessible table tx1 figure 4 part of the subject environment  y x  s represent transmitters  we assumed each grid as a class  for each class  we recorded 52 measurements from each transmitter  at the corners and at the center of the class  and when the person carrying the tag  and hence the tags embedded small-sized spiral dipole antenna is facing in dierent orientations  a helical antenna is attached to each transmitter  we investigated the histograms of these recordings for each class and decided to use the gaussian distribution assumption  as displayed in figure 5  the gaussian probability density function does not always perfectly match the rssi distributions  but will be a good enough assumption for our application  when the number of samples is sucient  190 oktem  aydin  an rfid based indoor tracking method for   50 50 0 20 30 40 0 20 50 30 40 50 40 50 20 0 20 30 40 0 30 50 35 40 45 50 40 50 20 0 20 30 40 0 15 50 20 40 10 20 0 15 20 25 30 35 20 0 30 40 35 25 30 35 40 45 40 50 40 20 0 50 20 30 0 40 20 30 40 figure 5 rssi distribution for some of the classes for dierent transmitters  where x axes refer to rssi levels and y axes refer to number of occurrences  then  the conditional probability distribution model for the feature vector x given class ci will be p  x |ci  =  1  2  3/2 |i | 1/2 1 t exp  x i  1 i  x i  2    5  where i and i refer to the conditional covariance matrix and conditional mean vector of the feature vector x given class ci  respectively  note that the signal strength transmitted by each transmitter is independent  hence  the covariance matrix becomes diagonal and the joint probability density function  5  can be expressed as ;   3  1 1 2 p  x |ci  =  6  exp 2  xl li  2li  2  1/2 li l=1 the statistics li2 and li are evaluated by computing sample variances and sample means for each class and each transmitter  by use of the recorded measurements  we assume that the person carrying the rfid tag starts navigating in the environment from a known location at time t = 0  this is the location where the navigation aid will be presented to the user and will be activated  the observations  feature vectors  are received at constant time intervals t  around 1 sec   at every t interval  the previous location of the person is assumed to be known  note that the rssi levels are collected by the tag and are transmitted to a remote pc through a wireless channel  the remote pc executes the bayes theory based tracking algorithm to estimate the current position of the user  and determines the direction  out of 8  north  south  east  west and the ones in between  191 turk j elec eng & comp sci  vol.18  no.2  2010 that the user should follow in his/her next step in order to reach his/her destination  that direction is signaled to the user via a tactile compass  of which knob is sensed by the thumb of the user  hence  we also assume that the user is most likely to follow this signaled direction than moving to an unpredictable direction  based on this assumption   4  is updated as ; gi  x  = ln  p  x |ci   + ln  p  cik    7  substituting  6  into  7   we obtain the decision function as gi  x  = 3  l=1   1 2 + ln  p  cik   ln exp 2  xl li  2li  2  1/2 li  1  8  where p  cik  refers to the transition probability  that is  probability that the user used to be in class ck  where k is the index of the class that the user is in  in the previous time of reading and displaced to class ci  where ci are the accessible classes near to ck   at the current time of reading  two dierent ways on how to assign p  cik  in our case is proposed in the next section  our proposal can also be used for more general cases where a user is being guided by a system via directions  x l is the observed rss at the current location for the lth transmitter  then  given the previous location of the rfid tag  the current location of it is estimated as the ci that achieves gi  x  gj  x   i  j a  i = j  9  where a refers to the set of available classes  a similar work which is based on bayesian approach and carries out indoor localization by using wireless ethernet is presented in  14   it aims localization in hallways of a building where locations in the hallways are spaced roughly 1.5m apart  aiming dierent application areas and using wireless ethernet  the work in  14  has a quite dierent hardware setup than our work  although the observation in their case consists of pairs of base station addresses and signal strengths that are similar to our work  the number of replies is dierent from the number of base stations  each base station may not reply at all or may reply up to four times at each reading   as a result   14  incorporates number of counts in their probability model and does not include a priori information in the form of a direction to a certain orientation as in our case  hence  we come up with a dierent state space model and a dierent decision function than the proposal of  14   yet  being based on similar principles we compare our results with that of  14  in the next section  5 experimental results the proposed method is tested in the indoor environment presented by figure 4 with the following a priori information and assumptions  the statistics  conditional mean and conditional variance  of each class are available  the users displacement at t time interval is limited  the locations of non accessible classes are known by the tracking system  192 oktem  aydin  an rfid based indoor tracking method for   the initial location of the user is known  this is reasonable since the portable hardware unit carried by the user will be presented at a certain location  that location can safely be considered as the initial location where the device will be turned on and the tracking algorithm will start to execute  the tracking system is executed on a computer  which receives rssi levels from the rfid reader  the statistics  mean and variance values  of each class is pre-computed from the pre-collected data  and are stored in the computer together with the map of the subject environment  a set of routes between dierent cells are dened  the tracking algorithm performance is tested on these routes for two dierent cases  9 routes are tested for the subject environment  three of the tested routes are presented in figure 4 route 1 and route 2 starts from one end and ends at the other end of the environment where route 3 starts at one end and ends in the midway of the environment  in the rst case  transition probabilities between the classes are assumed to be equal except for the current class  the probability of staying at the same class is assumed to be lower  half the probability of each other transition  than the probability of displacement  in the second case  it is assumed that the user is navigated to follow a certain route ; hence a bias favoring a certain class exists  considering that the tactile compass will be guiding the user   then  the transition probabilities between classes are arranged according to the following principles the probability of staying at the same class is a/2 the probability of transition from the previous class to the directed class is 2a the probability of transition from the previous class to all other accessible classes is a the sum of all transition probabilities add up to 1 note that there exists an underlying assumption that the user can not displace faster than a class between two readings  we recorded estimated and actual positions of the user along each route  then  we calculated the error between the estimated and actual locations  in  14   similar tests are carried out where the actual and estimated positions are recorded while walking up and down the hallways of the tested building  since the plot of error along the route can not be compared to the test results of others  we preferred to present cumulative probability plots for measured error between the actual and estimated positions  figure 6-7 present test results  cumulative probability plots  as compared to the listed test results of the algorithm presented in  14  for two hallways  note that the plots corresponding to the results of  14  are the same both in figure 6 and figure 7 figure 6 shows the performance of our proposed method without any bias compared to that of  14   figure 6 shows that without any bias  the user can be tracked from one end to the other end of the area  with at most 3.8m error  which is similar to the best listed case in  14  although the overall performance is slightly worse than the best of  14   when a bias favoring the directed class exists  figure 7   the tracking performance increases signicantly  at most 3m error   this performance increase illustrated in figure 7 shows that use of direction information as a bias contributes signicantly to the estimation problem  the experimental results show that statistical processing of the rss levels enables compensation of noisy measurements in a tracking application  especially when a bias favoring a certain direction of displacement exists  in order to comment on the robustness of the method with respect to environmental changes  there has been a period between the collection of data and conduction of experiments where small changes in the 193 turk j elec eng & comp sci  vol.18  no.2  2010 environment such as number of persons present in the environment  changed only by three or four   replacement of small furniture such as chair or boxes have occurred  yet  it should be noted that major changes such as replacement of big shelves or walls will require a recollection of data and recomputation of the statistics  .95 1 .90 .95 .85 cumulative probability cumulative probability 1 .80 .75 .70 .90 .85 .80 .75 .70 .65 .65 .60 .60 1 2 3 4 error  m  5 6 7 proposed method first hallway route example in  14  second hallway example in  14  figure 6 cumulative probability vs error with no bias  6  1 2 3 4 error  m  5 6 7 proposed method first hallway route example in  14  second hallway example in  14  figure 7 cumulative probability vs error with bias  conclusions an indoor tracking method for obscured environment is proposed  the method is developed as an integral part of a navigation aid for guiding visually impaired people  the method is based on the bayes decision rule  where an observed feature vector is classied to a class among the set of available ones  the classes are modeled as accessible square grids in an indoor environment  the feature vector is composed of signal strength indicator levels received from three transmitters working at distinct frequencies in the uhf band  the technique is tested by using an extensive set of recorded measurements  the performance of the tracking method is tested for dierent routes in the environment  the increase in tracking performance with the assumption of a bias guiding the user to a certain direction is recorded  acknowledgements this work is supported in the scope of project id 105e130 by the scientic and technological research council of turkey  tubitak   194 oktem  aydin  an rfid based indoor tracking method for   references  1  l ran  a helal  s e moore  drishti  an integrated indoor/outdoor blind navigation system and service  proc  2nd ieee annual conference on pervasive computing and communications  pp  23-30  2004   2  t strothotte  h petrie  v johnson  l reichet  mobic  an aid to increase the independent mobility of blind and elderly travellers  2nd tide congress  paris  la villette  26  28 april 1995   3  p blenkhorn  d.g  evans  a system for enabling blind people to identify landmarks  the sound buoy  ieee trans  on rehab  eng  vol  5  no  3  pp  276-278  1997   4  y sonnenblick  an indoor navigation system for blind individuals  technology and persons with disabilities conference  1998 url  http  //www.dinf.ne.jp/doc/english/us eu/conf/csun 98/csun98 008.htm   5  s willis  s helal  rfid information grid for blind navigation and waynding  9th ieee intl symposium on wearable computers  2005   6  t roos  p myllymaki  h tirri  a statistical modelling approach to location estimation  ieee trans on mobile computing  vol  11  no.1  pp  59-69  2002   7  k azuma  k matsumoto  t hattori  a proposal of location estimation with maximum likelihood function using joint pdf of received signals and prior measured signals  ieee 3rd vehicular technology conference  vol  2  pp  599-602  2006   8  w.w shen  z.x  fang  z.x  wang  two-step multi-user indoor location estimation based on bayesian approach 2nd international conference on mobile technology  applications and systems  2005   9  d madigan  e elnahrawy  r.p  martin  w ju  p krishnan  a.s krishnakumar  bayesian indoor positioning sytems  ieee infocom  march 2005   10  y takizawa  p davis  m kawai  h iwai  a yamaguchi  s obana  self-organizing location estimation method using received signal strength  ieice trans  com  vol  e89-b  no.10  pp  2687-2695  october 2006   11  n  priyantha  a miu  h balakrishnan  s teller  the cricket compass for context aware mobile applications  mobicom 2001  july 2001   12  s ito  n kawaguchi  bayesian based location estimation system using wireless lan  3rd ieee intl conf  on pervasive computing and communications workshops  pp  273-278  2005   13  a.a rodriquez  m lazaro  l tong  target location estimation in sensor networks using range information  ieee sensor array and multichannel signal processing workshop  pp  608-612  2004   14  a.m ladd  k e bekris  a.p  rudys  d.s  wallach  l.e  kavraki  on the feasibility of using wireless ethernet for indoor localization  ieee transactions on robotics and automation  vol  20  no  3  pp  555-559  june 2004   15  k muthukrishnan  m lijding  and p havinga  towards smart surroundings  enabling techniques and technologies for localization  1st international workshop on location and context awareness  pp  350-362  oberpfaffenhofen  germany  2005   16  n raza  v bradshaw  m hague  applications of rfid technology  iee colloquium on rfid technology  pp  1-5  1999  195 turk j elec eng & comp sci  vol.18  no.2  2010  17  l.m  ni  y  liu  y.c  lau  a.p  patil  landmarc  indoor location sensing using active rfid  special issue on pervasive computing and communications  vol.10  pp  701-710  kluwer academic publisher  2004   18  w.k tam  v.n  tran  propagation modeling for indoor wireless communication  electronics and comm  eng  journal  pp  221-228  october 1995   19  k.s  leong  m.l  ng  p.h  cole the reader collision problem in rfid systems  ieee intl symposium on microwave  antenna  propagation and emc technologies for wireless communications  pp  658-661  2005   20  m robinson  i psaromiligkos  received signal strength based location estimation of a wireless lan client  ieee communications society  pp  2350-2354  2005   21  k m-k chu  j k-y  ng  k.r.p.h leung  a new approach for locating mobile stations under the statistical directional propagation model  20 th intl conf  on advanced information networking and applications  vol  1  pp  932-940  18-20 april 2006   22  p bahl  v.n  padmanahban  radar  an in building rf-based user location and tracking system  ieee infocom  vol.2  pp.775-784  march 2000   23  s theodoridis  k koutroumbas  pattern recognition  third edition  academic press  2006  196 