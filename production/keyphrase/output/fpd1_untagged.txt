isprs int  j geo-inf  2013  2  854-868 ; doi:10.3390/ijgi2030854 open access isprs international journal of geo-information issn 2220-9964 www.mdpi.com/journal/ijgi/ article an improved neural network training algorithm for wi-fi fingerprinting positioning esmond mok 1  * and bernard k.s  cheung 1,2 1 2 department of land surveying and geo-informatics  the hong kong polytechnic university  hung hom  kowloon  hong kong  china cirrelt & department of mathematics and industrial engineering  ecole polytechnique de montreal  p.o  box 6079  station centre-ville  montral  pq h3c 3a7  canada ; e-mail  bernard.cheung @ cirrelt.ca * author to whom correspondence should be addressed ; e-mail  lsemok @ polyu.edu.hk ; tel   +852-276-659-53 ; fax  +852-233-029-94  received  2 july 2013 ; in revised form  14 august 2013 / accepted  14 august 2013 / published  3 september 2013 abstract  ubiquitous positioning provides continuous positional information in both indoor and outdoor environments for a wide spectrum of location based service  lbs  applications  with the rapid development of the low-cost and high speed data communication  wi-fi networks in many metropolitan cities  strength of signals propagated from the wi-fi access points  aps  namely received signal strength  rss  have been cleverly adopted for indoor positioning  in this paper  a wi-fi positioning algorithm based on neural network modeling of wi-fi signal patterns is proposed  this algorithm is based on the correlation between the initial parameter setting for neural network training and output of the mean square error to obtain better modeling of the nonlinear highly complex wi-fi signal power propagation surface  the test results show that this neural network based data processing algorithm can significantly improve the neural network training surface to achieve the highest possible accuracy of the wi-fi fingerprinting positioning method  keywords  indoor positioning ; neural network ; wi-fi fingerprinting isprs int  j geo-inf  2013  2 855 1 introduction ubiquitous positioning technologies include but are not limited to global satellite navigation systems  gnss  such as the american global positioning system  gps   cellular and wi-fi networks  radio frequency identification  rfid   ultra-wide band  uwb   zigbee  and their integrations  among these positioning technologies  wi-fi networks with the ieee 802.11 license free communication standard have been rapidly developed in many metropolitan cities  e.g  in australia  hong kong sar of china  and taiwan  the fundamental function of wi-fi networks is to provide a low-cost and effective platform for multimedia communications  in addition  the propagation of wi-fi signals  if properly modeled  can provide real-time positional information of mobile devices in both indoor and outdoor environments  different wi-fi positioning approaches include cell-identification  cell-id   trilateration and fingerprinting  detailed explanation of these approaches can be found in  for example  1,2   cell-identification is the simplest method for signal strength based positioning systems such as cellular mobile network and wi-fi positioning  however  only very crude positioning results can be obtained  at an unknown mobile devices position where signal strengths from m numbers of nearby access points  aps  can be detected  the aps position with the strongest detected rss would be used to approximate the position of the mobile device  for example  if rss2 from ap2 is the strongest among rssi from api  for i = 1  2   m  then  x2  y2  will be used to approximate the mobile devices position  with this approach  the accuracy would depend on the effective signal propagation distance  as well as density and distribution of the aps installed  this approach was further improved by for example  the weighted centroid localization  wcl  proposed by  3   for the trilateration approach  the mobile devices position  normally in two dimensions  is determined using a set of measured distances from the nearby known aps  least squares solution is normally applied when more than two distances are observed  it should be noted that the terrestrial land surveying techniques adopt measured distance as raw observations  while for the wi-fi based techniques  the raw data are rsss  therefore a rss-to-distance conversion method is to be applied  and the known aps positions will be treated as control points  the general rss-to-distance conversion approach is by curve fitting with for example  parabolic or logarithmic regression  based on free space propagation model  4   by further considering the complex real site conditions such as path loss of signal due to attenuation  reflection and refraction  as well as the geometrical effects on length resection  different rss-to-distance conversion algorithms such as the gaussian process regression  5  and the statistical path loss parameter estimation  6  were proposed  regarding the fingerprinting approach that is more suitable for indoor environments  it has the advantage that the aps coordinates are not required in the position determination process  however  it requires preliminary efforts of database development  the database  also called radio map  figure 1   contains a collection of calibration points at different locations in the area where wi-fi positioning is to be performed  the database development process is normally carried out if there are no significant factors that would seriously affect the rss patterns due to for example  relocation of large objects and removal or addition of fixed structures in the wi-fi positioning area  isprs int  j geo-inf  2013  2 856 figure 1 an example of radio map generated from a wi-fi signal strength database  in real-time positioning  the rsss collected at an unknown position are compared with radio maps pattern  the pattern comparison algorithms can be generally classified into deterministic and statistical approaches which include point matching  area based probability and bayesian network  7   recent research outputs on the statistical methods include but not limited to  for example  the expectationmaximization  em  algorithm  8   coverage area estimates  9   and floor determination algorithms for wi-fi positioning in multi-storey buildings proposed by  10,11   in this paper  our proposed neural network algorithm is compared with the point matching approach based on the minimum norm principle as described below  the minimum norm point matching method can be mathematically expressed as   1  where ssrm  i  j  is the rss value of the signal transmitted from access point  i  at radio map point  j   and ssmeas  i  is the measured rss of the signal transmitted from access point  i   the radio map point  j  having the minimum norm is considered to be the most probable position  since in the real-time positioning process the wi-fi sensor can be in any direction  a practical approach in the database development process is that  at each sampling point  the rss data is firstly collected in a reference 0  then 90  180  and 270directions  and the mean rss value of the data collected in these four directions is used in the computation  it is obvious from equation  1  that the positioning accuracy is dependent on the resolution of the calibration points  and the positioning results are always snapped to the discrete points position  hence  the higher resolution the calibration points  the more accurate the result  however  as shown in figure 1  the signal propagation from each available ap is a continuous non-linear surface  therefore  a model that can best describe the surface of all aps signal propagation will help to improve the positioning accuracy  due to the reflections of waves by obstacles and other interferences  the structure of the above functions could be rather complex  the traditional statistical methods based on some smoothing approximation may fail to capture the widely fluctuating characteristics of these wave patterns  isprs int  j geo-inf  2013  2 857 since their emergence  the neural network of different types and structures has been used effectively in a number of cognitive processes  they have been shown to be able to detect some very subtle changes in observable data patterns  the activation  or transfer  functions that link one layer of neurons to the next are sigmoid instead of ordinary algebraic functions which render it highly responsive to any abrupt changes in the input data  in fact  it was proved by  12  that the feed-forward neural networks with one input layer  one output layer and a single hidden layer with sigmoid activation functions are capable of approximating any borel measurable function  that includes those functions described by the above patterns  to any desired degree of accuracy  provided sufficiently many hidden neuron units are available  based on this finding   13  introduced a 3-layer recurrent neural network with an efficient learning algorithm able to perform accurate currency exchange rates forecasting  in the following  the neural network modeling for the fingerprinting approach and experimental tests to validate the proposed algorithm are discussed  2 neural network modeling from the above introduction of the fingerprinting positioning approach  it is possible to consider the co-ordinates   x  y  in 2-dimensional case  of a point as a function of the signal strengths from several access points  si   i = 1  2   m  where  x = f  s1  s2   sm  and y = g  s1  s2   sm   if a sample of uniform  or random  distribution of points with known positions and the signal strengths from those access points can be measured accurately  the minimum norm as shown in equation  1  or some well known statistical methods can sometimes give a fairly good approximation of the position of any other points in this region based on the measured signal strengths at this position  as explained in the previous section  the traditional statistical methods based on some smoothing approximation may fail to capture the widely fluctuating characteristics of these wave patterns produced by those access points  this explains the high errors in wi-fi positioning inside certain buildings  1   with the above reason  a simple 3 layer feed-forward neural network is considered to be an efficient learning algorithm for a more accurate position determination using wi-fi networks  and this neural network model is described below  let xi be the input of the average measured signal strength from access point i at the position p  where  i = 1  2   m the output from neuron j in the hidden layer is given by  2  where j is the threshold parameter  and j = 1  2   n  and the output coordinates  z1  z2  is given by  3  where  is the threshold parameter  combining equations  2  and  3   we have  isprs int  j geo-inf  2013  2 858 n m zk jk  ij xi j k  j 1 i  4  for k = 1  2 from equation  4   we see that given a set of average weighted signal strengths from a set of m access points  with weights s  the coordinates  z1  z2  correspond as the output from the network  consider 4 xi i  l ti  l  5  l 1 where i  l are parameters to be included in our learning process with 3 i 1 i  l 1  6  to give the best approximation  the configuration of our proposed neural network is shown in figure 2 it should be noted that the signal strength xi at a point p from access point i is initially taken to be the arithmetic mean of p  p = 3 or 4  signal levels measured at p appropriately chosen directions  our learning process involves the determination of parameters  jk    ij    j    k  and  i  l  so that the discrepancy output coordinates and the actual coordinates on a chosen set of points is minimal  more precisely ; it is the actual coordinates of a given point in our training set corresponding to the output  z1  z2  ; and the above parameters should be determined with the condition that the sum of squares of their difference is minimized  that is to minimize the expression z z z 2 1 1 2 z2 2 figure 2 a three-layer feed-forward neural network for wi-fi positioning   7  isprs int  j geo-inf  2013  2 859 here the summation is taken over the entire training set  we shall see that the success of our learning process depends on whether we can get the smallest possible value for the above sum of squares of their difference or  in other words  the best learning surface that describes the actual rss pattern generated by all the access points covering the whole region  the minimization algorithm was adapted and modified from  14  that has been shown to be very efficient for solving a number of very difficult problems in least squares minimization  since the objective function is nonlinear  a simple but effective heuristic optimization method introduced by  14  is used  it has been demonstrated to be efficient in a number of complex least squares minimization problems including the training of a recurrent neural network  the method contains three basic steps   i  full local exploration  ii  partial local movement and  iii  exploratory movements each step is described briefly as follows   i  full local exploration let x  k  be the kth approximation to the point where the minimum occurs and h be the step-length  the objective function at two sets of points about x  k  defined in equations  8  and  9  is evaluated  s1  x  k + 1  = x  k  hei s2  x  k + 1  = x  k  hei hej i = 1,2   n  j = 1,2   n  and j i  8   9  where ej =  0   1  0   0  is the unit vector whose jth coordinate is one while the remaining coordinates are zero  consider that the first set of points lies uniformly on a sphere of radius h  while the second set s2 lies on a sphere of radius h with the centre at x  k  obtained by taking the respective lengths of x  k+1  defined in equations  8  and  9   this means that the total number of function evaluations is 2n  n 1  + 2n = 2n2  it can be shown that the global minimum  if it exists  would most likely be entrapped lying inside this neighborhood  the search direction can be further refined as follows  if f  x  k + 1   f  x  k   for some choices of i and j  then the function values at an additional set of 2  n 1  points about x  k + 1  will be evaluated before performing partial local exploration in order to finely adjust search direction  that is  to set  x  k + 1  = x  k + 1  + het  or het  for some integer t values belonging to the set  1  2   n  that gives the best function value   10  isprs int  j geo-inf  2013  2 860  ii  partial local movement this procedure helps us to decide when we should take a more aggressive move to reach the optimum from far away or when to take a more cautiously slow approach  when the true optimum is close by  the basic procedure is given in the following  let b = x  k+1  x  k   we evaluate f at the following sets of points about x  k + 1   s1  xs = x  k + 1  + b  11  s2  xs = x  k + 1  + b ihei  12  for i = 1  2   n  and i = 1 or 1 according to the sign of the coordinates of b otherwise  set xs = x  k+1  b hei and ei along the direction of b is excluded  now  if f  xs  f  x  k+1   for some choice of i  then xs x  k+1  definitely gives a better direction of descent and we can make exploratory moves  as described in  iii  below  along this direction  otherwise  we have to reduce the step-length by d and start the full exploration again at x  k + 1   it should be noted that the order of iteration is linear with respect to n  iii  exploratory movement the classical exploratory movement in pattern search heuristics or the corresponding gradient method can never be taken to full advantage if the path of displacement can not be modified as the move proceeds  by properly adjusting the direction as the move proceeds from point to point  we can help guide our search much quicker to the true optimum  this could be done as follows  let m = xs x  k   and evaluate f at the following points  s1  x  k + 2  = xs + m  13  s2  x  k + 2  = xs + m + hei  14  and ei along the direction of b is excluded  notice that at most 2n + 1 function evaluations has to be performed   iv  effect of contraction ratio and initial step length a contraction ratio of d = 4 can be seen to be the most appropriate choice  for  in the lower dimensional cases  i.e  the number of variables or parameters is not too large   if the true minimum happens to lie outside the reduced cube around the search position  it can be reached in a few steps  however  if the minimum happens to lie inside the reduced cube  the size of search space is significant comparing with that using contraction ratio of d = 2 the contraction ratio d = 3  though simple  would increase computers truncation error that would affect the computational accuracy  in the case where d = 4  the contracted length is one fourth of the original step size  if the minimum point happens to be x  k  again  one can be assured that the actual minimum point lies within these contracted spheres  now  if the minimum value is at either one of the points on the contracted sphere s'1   i.e  x  k + 1  = x  k   h/4  ei for some i  or one of the points on the contracted sphere s'2   i.e  x  k + 1  = x  k   h/4  ei  h/4  ej for some i and j   again only one full exploration around this point with step length h/4 will be needed to determine that the actual minimum probably lies within the contracted spheres ; otherwise  one additional partial movement will lead the search outside this region  on the other hand  if the actual minimum point lies between the contracted outer sphere s'2 and the original outer sphere s2  it is easy to see that no more isprs int  j geo-inf  2013  2 861 than four combined local or exploratory moves are required to reach it  in all cases  the order of complexity of search is n2  similar to those with lower contraction ratios  it was found by  14,15  that  for experimenting with most of the benchmark test examples  the best contraction ratios were d = 4  followed by d = 5 there was no gain in further increasing the contraction ratio  except in some rare cases   v  termination criteria terminate the search  if the step size is reduced to be less than a prescribed tolerance level  care must be taken not to set the tolerance too low  otherwise  poorer results will be obtained even at the expense of longer computer time  in our learning process  we found from experimentation that the best tolerance is 1e7  the initial step-length affects the rate of convergence  in our test runs  the initial step-length of 0.25 gave satisfactory results in most of the benchmark test examples  except in the cases where the objective function fluctuates wildly in part of the search region  a shorter step-length or a rescaling of the objective function might help in giving a more satisfactory convergence  often  whether the initial step length is suitable or not  could be detected in the first few iterations  to obtain the best learning result  the optimization process has to be rerun one or two more times with a new restarting point each time and select the best solution  i.e  the one that gives the least sum of square error   these restarting points can be chosen at random  but at a good distance from the previous starting positions or by following the procedure described in  15   3 algorithm validation the above algorithm was validated using data collected inside a building of the hong kong polytechnic university  hkpolyu  campus  with the aps distribution shown in figure 3 figure 3 floor plan showing the distribution of access points in the test site  the 14 numbers of aps were labeled according to area number from a to n respectively  in our investigation  signal strength data from 3 and 4 numbers of aps were used for training by the neural network  as shown in figure 4  each area contains about 4 to 5 training points separated between 3 and 4 m depending on the shape and size of the area  data collected at other points  as an example shown in figure 5 were then used to verify the accuracy achievement with the trained signal strength propagation surface  all locations shown in figures 4 and 5 were able to receive ap signals from adjacent rooms as isprs int  j geo-inf  2013  2 862 well as from other rooms within about 30 m radius  however  in our validation process  only signals from the nearest aps were used  as the ieee 802.11 b/g standard wi-fi card was used for data collection  the signals received were at the same 2.4 ghz frequency  figure 4 an example of points selected for training by the neural network  figure 5 points with known position were used to verify the accuracy achievement of the neural network results  table 1 shows the processed results using different combinations of four aps  for example  g_d_e_f represents the test verified with the data collected in rooms g  d  e and f with the rss data transmitted from aps g  d  e and f  refer to figure 3   the table shows the success rate at different accuracy levels  the mean square error  mse  indicating the average minimization results in the neural network training process  and the total number of points used for verification  the mse is computed by z1 z1 2 z 2 z2 2 the formula  where n represents the total number of points used for training  n table 1 accuracy achievement based on signal reception of four access points  aps   4-ap combination g_d_e_f h_i_j_k l_k_j_m l_n_a_b l_c_j_b n_l_b_m c_g_d_h c_j_h_l d_f_g_e h_i_g_d 01 m 1.12 m 2.13 m 3.14 m > 4 m 04 m 3.5 % 0.9 % 7.7 % 9.8 % 1.8 % 18.1 % 14.0 % 1.3 % 1.1 % 2.9 % 14.1 % 7.8 % 24.0 % 24.5 % 8.3 % 28.7 % 23.3 % 8.8 % 7.7 % 10.8 % 28.2 % 12.1 % 32.7 % 26.5 % 14.7 % 20.2 % 22.1 % 8.8 % 24.2 % 13.7 % 15.3 % 15.5 % 14.4 % 13.7 % 20.2 % 9.6 % 10.5 % 15.0 % 22.0 % 19.6 % 38.8 % 63.8 % 21.2 % 25.5 % 55.0 % 23.4 % 30.2 % 66.3 % 45.1 % 52.9 % 61.2 % 36.2 % 78.8 % 74.5 % 45.0 % 76.6 % 69.8 % 33.8 % 54.9 % 47.1 % mean square error 5.5 26.7 10.8 2.6 23.2 2.7 8.7 5.1 13.6 12.3 note  initialization parameters used  ij = 0.25  ij = 0.25  jk = 0.5  j = 300  k = 1 total no  of points 85 116 104 102 109 94 86 80 91 102 isprs int  j geo-inf  2013  2 863 likewise  the processed results using different combinations of three aps are shown in table 2 it should be noted that the results shown in tables 1 and 2 are processed by only one set of generally accepted initialization parameters  it will be shown below that different assignments of signal strength input sequence and the initialization parameters will result in the change in the direction and the scale of the input vector  and hence will generate different trained surfaces for position estimation  and the mse can be used to effectively verify which input vector assignment will be most likely to provide the best positioning solution  table 2 accuracy achievement based on signal reception of three aps  3-ap combination 01 m 1.12 m 2.13 m 3.14 m > 4 m 04 m mean square error total no  of points g_e_f h_i_k k_j_m l_n_b c_j_b n_l_m g_d_h c_j_h d_g_e h_i_g h_i_j i_j_k h_j_k 17.6 % 9.5 % 6.7 % 5.9 % 15.6 % 2.1 % 22.1 % 8.8 % 5.5 % 2.0 % 1.7 % 5.2 % 10.3 % 24.7 % 40.5 % 20.2 % 12.7 % 40.4 % 14.9 % 37.2 % 11.3 % 17.6 % 6.9 % 9.5 % 14.7 % 19.0 % 11.8 % 28.4 % 26.0 % 20.6 % 26.6 % 17.0 % 24.4 % 30.0 % 28.6 % 7.8 % 18.1 % 26.7 % 25.0 % 20.0 % 19.8 % 24.0 % 17.6 % 5.5 % 19.1 % 3.5 % 22.5 % 17.6 % 14.7 % 21.6 % 18.1 % 19.0 % 25.9 % 1.7 % 23.1 % 43.1 % 11.9 % 46.8 % 12.8 % 27.5 % 30.8 % 68.6 % 49.1 % 35.3 % 26.7 % 74.1 % 98.3 % 76.9 % 56.9 % 88.1 % 53.2 % 87.2 % 72.5 % 69.2 % 31.4 % 50.9 % 64.7 % 73.3 % 4.0 4.8 3.7 7.7 5.3 8.2 4.3 9.8 12.7 14.3 13.4 8.9 6.1 85 116 104 102 109 94 86 80 91 102 116 116 116 note  initialization parameters used  ij = 0.25  ij = 0.25  jk = 0.5  j = 300  k = 1 it can be seen from tables 1 and 2 that different ap combinations would yield different accuracy achievement  it is understandable that the signal propagation paths are different  resulting in different signal interferences  moreover  by inspecting the 04 m success rate and the mse columns  an obvious trend can be found is that  the lower the mse  the higher the achievement percentage  in order to further investigate this trend  all processed results were used to plot the graph of percentage of accuracy against mse  it is clearly shown in figure 6 that  in addition to the obvious negative correlation between the two components  most results with the mse less than 5 would yield 80 % 100 % success rate  this initial analysis indicates that some of the results shown in tables 1 and 2  particularly those with high mse  were not determined based on the best fitted neural network trained surface  nevertheless  to verify the validity of the algorithm  the data of 3-ap combinations with mse less than 5 shown in table 2 were extracted compare with the minimum point matching method  with the neural networks training data used as calibration points stored in the radio maps database  since the radio maps data are largely distributed in a 3 m grid  the point matching method would have the advantage of snapping the test points to the neighboring grid points  therefore the a high success rate of 2 m or better  and very high 4 m or better accuracy achievements are expected  the point matching results can hence form a good comparison base as the highest possible solution for verifying the effectiveness of the neural network algorithm  their comparisons are summarized in table 3 isprs int  j geo-inf  2013  2 864 figure 6 relationship between mean square error and accuracy  table 3 comparison of accuracy achievement between the neural network and the minimum point matching methods  neural network 3-ap combination g_e_f h_i_k k_j_m g_d_h 02 m 2.14 m 42.3 % 50.0 % 26.9 % 59.3 % 31.8 % 48.2 % 50.0 % 27.9 % point matching mean square error 4.0 4.8 3.7 4.3 02 m 2.14 m 47.1 % 59.5 % 63.4 % 58.1 % 31.8 % 29.3 % 25.9 % 30.2 % total no  of points 85 116 104 86 it can be seen that the success rate of the two approaches are in general very similar except the k_j_m combination that  the 02 m accuracy for the point matching method is significantly better  it should be noted that only a set of constant initialization parameters was used in the neural network training process  this set of parameters may not produce the best trained surface for position determination  in fact  some of the solutions so obtained may just be local minima due to high complexity of our problem  thus the actual implementation of the 3 steps proposed in section 2 for generating the optimum rss surface for wi-fi positioning need to be further investigated and verified  observe that the 3-ap combination of i_j_k shown in table 2 has the mse of 8.9 and a low 04 m accuracy of 64.7 %  this combination is used to illustrate our investigation  the first investigation is the effect of the trained surface by varying the initial parameters  parameters ij = 0.25  j = 300 and k = 1 were considered to be acceptable settings  they were fixed in our investigation in order to improve the training efficiency  parameters ij and jk were varied between the following ranges and increments  ij = 0.10 to 0.50  step 0.05 jk = 0.1 to 0.9  step 0.1 table 4 shows the processed results of i_j_k using three different sets of initialization parameters  it can be seen that the second set of parameters yields the least mse of 4.2 among the three  and the 4 m or better accuracy has been increased from 31.0 % to 91.4 %  further compare the set 2 results with the point matching results  it can be seen in table 5 that the overall success rate  4 m or better  of the neural network method is better than the point matching method  isprs int  j geo-inf  2013  2 865 table 4 results of varied initialization parameters for the 3-ap i_j_k combination  initialization mean square total no  error of points 75.9 % 7.9 116 91.4 % 4.2 116 31.0 % 22.7 116 01 m 1.12 m 2.13 m 3.14 m > 4 m 04 m set 1 8.6 % 19.8 % 26.7 % 20.7 % 24.1 % set 2 12.9 % 34.5 % 37.1 % 6.9 % 8.6 % set 3 2.6 % 8.6 % 7.8 % 12.1 % 69.0 % parameters set 1  il = 0.25  ij = 0.1  jk = 0.9  j = 300  k = 1 ; set 2  il = 0.25  ij = 0.5  jk = 0.1  j = 300  k = 1 ; set 3  il = 0.25  ij = 0.5  jk = 0.9  j = 300  k = 1 table 5 comparison of the neural network and the point matching method using the lowest mse of the i_j_k combination  accuracy 02 m 2.14 m 04 m point matching 60.4 % 26.7 % 87.1 % neural network 44.8 % 46.5 % 91.3 % the second investigation is the variation of the input order of the signal strength from the three aps with a set of fixed parameter setting  a typical set of results is shown in table 6 it can be seen that the variation of the aps input order would significantly change the mse as well as the accuracy achievement   observe that the two input order sequences in the middle rows of the table reduce the mean square error by approximately 20 %  while increase the proportion of 04 m accuracy by at least 4.5 % relative to the remaining four settings   table 6 results of different order of three aps used for neural network training  sequence of combination i_j_k i_k_j j_i_k j_k_i k_i_j k_j_i 01 m 1.12 m 2.13 m 3.14 m > 4 m 04 m 8.5 % 8.1 % 11.4 % 11.3 % 9.0 % 9.9 % 19.1 % 20.2 % 24.6 % 24.7 % 20.9 % 22.0 % 24.0 % 24.4 % 26.6 % 25.8 % 24.6 % 24.6 % 18.1 % 17.1 % 15.8 % 16.7 % 19.2 % 17.4 % 30.4 % 30.2 % 21.6 % 21.4 % 26.3 % 26.1 % 69.6 % 69.8 % 78.4 % 78.6 % 73.7 % 73.9 % mean square error 8.7 8.2 6.4 6.4 8.1 7.8 the above tests and comparison studies have confirmed the effectiveness of our proposed algorithm  based on our experience  the 3-step heuristic optimization method can be effectively implemented by varying parameters ij  0.1 to 0.5  and jk  0.1 to 0.9   and changing the input order of the ap combination to obtain the best trained surface  4 conclusions from our investigations  wi-fi positioning can generally achieve 1 to 4 m of accuracy in an arbitrary wi-fi network area using the neural network approach  however  the training process and parameter selection of the neural network is the key for achieving the highest possible accuracy of wi-fi positioning results  our experimental results show that the proposed neural network improves the accuracy of isprs int  j geo-inf  2013  2 866 positioning significantly by improving the nonlinear  highly complex wi-fi signal propagation patterns  to avoid being trapped in a local minimum  training should be permitted to retry with different initial parameter settings and different order of ap data inputs  so that the best set of parameters  i.e  the one that gives the lowest objective value  can be found  this will improve the overall accuracy  we have shown that there is a negative relationship between the mean square error value attained in our training process and the percentage of accuracy in our positioning  this means that based on the plot in figure 6  one can repeat the training process as described above in order to achieve the highest possible accuracy  the following summarizes the advantages of our proposed algorithm  1  2  3  4 this algorithm is based on the wi-fi fingerprinting approach that  wi-fi aps coordinates are not required in the position determination process  it is suitable for establishing a wi-fi based positioning system in areas such as inside shopping malls where aps positions are difficult or not possible to be precisely determined  this approach is entirely general and flexible  whenever there are some changes in the existing wi-fi network  e.g  some addition  or deletion or reposition of access points   all we have to do is to retrain our neural network properly  there is no limit to how close our neural network approximation is to the actual radio data pattern  or hyper-surface   as long as we have sufficiently large number of neurons in the hidden layer of our simple three layer feed-forward neural network  however  it should be noted that  a too large number of neurons in the middle layer may render the learning process less tractable and higher truncation error  this is because the more complex structure of the function to be minimized may offset some of its improved accuracy  since the percentage of better than four meter accuracy is found graphically to be inversely proportional to the mean square error in our training process  one can improve it to any desirable proportion by further minimizing  it has been illustrated that one can get closer to the actual minimum square error by retraining the neural network with different initial parameter settings  our optimization algorithm is simple and effective  and can be further improved or replaced by another even more powerful one with basically no change in our model structure  in our investigation  only the minimum norm point matching method is compared with our proposed algorithm  as addressed in the introduction section  many other effective wi-fi positioning algorithms have been proposed recently  it would be worthwhile to further investigate the strengths of each approach under different geometrical  access point availability and distribution  and influence conditions  for developing a reliable ubiquitous positioning system with the best achievable accuracy  to also support global satellite navigation systems  gnss  in case satellite positioning fails in highly obstructed outdoor environments  acknowledgements this research is fully supported by ugc research grant bq-936 intelligent geolocation algorithms for location-based services  the authors would like to thank jeffrey yiu for his assistance in the field tests and data processing of the investigations presented in this paper  isprs int  j geo-inf  2013  2 867 conflict of interest the authors declare no conflict of interest  references 1  2  3  4  5  6  7  8  9  10  11  12  13  14 mok  e ; yuen  k.y  a study on the use of wi-fi positioning technology for wayfinding in large shopping centers  asian geogr  2013  30  5564 mok  e ; retscher  g location determination using wifi fingerprinting versus wifi trilateration  j location based serv  2007  1  145159 wang  j ; urriza  p ; han  y ; cabric  d weighted centroid algorithm for estimating primary user location  theoretical analysis and distributed implementation  trans  wirel  commun  2011  10  34033413 theodore  s.r  wireless communications  principles and practice  2nd ed  ; prentice-hall  inc  upper saddle river  nj  usa  2002 ; p 693 cho  y ; ji  m ; lee  y ; kim  j ; park  s improved wi-fi ap positioning estimation using regression based approach  in proceedings of the 3rd proceedings of international conference on indoor positioning and indoor navigation  ipin   sydney  australia  1315 november 2012 nurminen  h ; talvitie  j ; ali-loytty  s ; muller  p ; lohan  e ; piche  r ; renfors  m statistical path loss parameter estimation and positioning using rss measurements in indoor wireless networks  in proceedings of the 3rd proceedings of international conference on indoor positioning and indoor navigation  ipin   sydney  australia  1315 november 2012 elnahrawy  e ; li  x ; martin  r.p  the limits of localization using signal strength  a comparative study  in proceedings of 2004 first annual ieee communications society conference on sensor and ad hoc communications and networks  ieee secon 2004   santa clara  ca  usa  47 october 2004 ; pp  406414 addesso  p ; bruno  l ; restaino  r adaptive localization techniques in wifi environments  in proceedings of 5th ieee international symposium on wireless pervasive computing  modena  italy  57 may 2010 ; pp  289294 koski  l ; perl  t ; pich  r indoor positioning using wlan coverage area estimates  in proceedings of the 1st international conference on indoor positioning and indoor navigation  ipin   eth zurich  zurich  switzerland  1517 september 2010 liu  h.h  ; yang  y.n  wifi-based indoor positioning for multi-floor environment  in proceedings of the ieee tencon 2011  bali  indonesia  2124 november 2011 ; pp  597601 shi  j ; shin  y a low-complexity floor determination method based on wifi for multi-floor buildings  in proceedings of the 9th advanced international conference on telecommunications  rome  italy  2328 june 2013 hornik  k ; stinchcombe  h ; white  h multilayer feedforward networks are universal approximators  neural netw  1989  2  359366 li  l.k  ; cheung  b.k.-s learning and forecasting foreign exchange rates using recurrent neural network dynamics ; les cahiers du geradg-2000-02 ; gerad  montreal  qc  canada cheung  b.k.-s ; ng  a.c.l  an efficient and reliable algorithm for nonsmooth nonlinear optimization  neural parallel sci  comput  1995  3  115128 isprs int  j geo-inf  2013  2 868 15 cheung  b.k.-s ; ng  a.c.l  an efficient search method for nonsmooth nonlinear optimization problems with mostly simple constraints  neural parallel sci  comput  1997  5  335346  2013 by the authors ; licensee mdpi  basel  switzerland  this article is an open access article distributed under the terms and conditions of the creative commons attribution license  http  //creativecommons.org/licenses/by/3.0/   