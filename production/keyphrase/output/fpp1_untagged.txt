ieee transactions on robotics and automation  vol  20  no  3  june 2004 on the feasibility of using wireless ethernet for indoor localization andrew m ladd  kostas e bekris  algis p rudys  dan s wallach  and lydia e kavraki abstractieee 802.11b wireless ethernet is becoming the standard for indoor wireless communication  this paper proposes the use of measured signal strength of ethernet packets as a sensor for a localization system  we demonstrate that off-the-shelf hardware can accurately be used for location sensing and real-time tracking by applying a bayesian localization framework  index termsbayesian inference  sensor fusion  robot localization  wireless ethernet  i introduction the ieee 802.11b wireless ethernet standard is becoming increasingly popular and has been deployed in many indoor environments  19   many mobile robots already make use of wireless networking for communication  wireless ethernet devices measure signal strength as part of their normal operation  we propose the use of off-the-shelf wireless ethernet adapters on a mobile robot as a tool for global pose estimation  this paper is a feasibility study on the advantages and the difficulties of using this sensor for robot localization  we believe that there is a great potential for wireless ethernet to be applied as an additional input to a sensor-fusion technique for robot localization  determining the pose of the robot from physical sensors is a key problem in robotics  since it plays a pivotal role in various successful mobile robot systems  4   outdoor localization can be achieved using global positioning systems  gps   18   using gps for indoor localization  however  presents some significant challenges  20   for the problem of indoor localization  a variety of other sensors have been used  such as vision  infrared  ir  and laser range finders  mobile robots already employing wireless ethernet for communication purposes could be retrofitted in software to make use of their adapter as a location sensor  such a sensor might be very useful for a low-cost robot or team of robots wishing to execute global localization  navigation  and exploration tasks  this is of particular interest for some multirobot configurations ; while communicating  the robots could measure signal strengths to each other and engage in collaborative localization  the chief difficulty in localization with wireless ethernet is predicting signal strength  radio frequency  rf  signal strength measured indoors is nonlinear with distance  in addition  it has non-gaussian noise  resulting from multipath effects and environmental effects  such manuscript received november 11  2002 ; revised june 16  2003 this paper was recommended for publication by associate editor j leonard and editor s hutchinson upon evaluation of the reviewers comments  the work of a ladd was supported in part by fcar and the national science foundation under grant nsf-iri-970228  the work of k bekris was supported in part by the national science foundation under grant nsf-iri-970228  the work of a rudys and d wallach was supported in part by the national science foundation under grant nsf-ccr-9985332  in part by a texas atp grant  and in part by a gift from schlumberger  the work of l kavraki was supported in part by the national science foundation under grant nsf-iri-970228 and grant nsf-itr-0205671  and in part by a sloan fellowship  this paper was presented in part at mobicom  atlanta  ga  2002  and in part at iros  lausanne  switzerland  2002 the authors are with the department of computer science  rice university  houston  tx 77005 usa  e-mail  aladd @ cs.rice.edu ; bekris @ cs.rice.edu ; arudys @ cs.rice.edu ; dwallach @ cs.rice.edu ; kavraki @ cs.rice.edu   digital object identifier 10.1109/tra.2004.824948 555 as building geometry  network traffic  presence of people  and atmospheric conditions  this paper describes a set of experiments with a laptop carried by a human operator  whereby localization with ieee 802.11b wireless ethernet is shown to be feasible  the focus of this work was to determine the usability of wireless ethernet as a sensor  this was motivated by an application in wireless computing  that of locating an intruder using a laptop  16    15   however  it is also a minimalist approach which isolates the sensor we are testing  and generates results applicable to mobile robotics  to compute position  we apply a scheme in the spirit of other bayesian techniques that have been successfully employed in the context of robotics  23   we show experiments demonstrating that off-the-shelf wireless hardware can accurately be used for location sensing and tracking with about one-meter precision in a wireless-enabled office building  1  related work  the simplest technique used for mobile robot localization has been dead reckoning  with dead reckoning  errors are added to the absolute pose estimate and accumulated  triangulation techniques were also used  in this case  landmarks are extracted from the sensor input and then they are used to triangulate the robots position  this works when the sensors are reliable  but leaves several problems unaddressed  6   kalman filters were also applied for localization  17    22   where various sensor data are fused to obtain a new position estimate  this method is provably optimal when noise distributions are gaussian  but typically fails when this assumption breaks down  the most powerful algorithms to date are based on bayesian inference  in particular  markov models  8    13   and monte carlo localization  7    24   most often  the workspace is represented by an occupancy grid  alternately  the environment can be modeled with a topological map  e.g  as a generalized voronoi graph  2  ; localization in this paradigm is based on identifying nodes in the graph from geometric environmental information  3    14   our research uses the bayesian approach  we sample the space  we measure the signal strength at regularly spaced locations  and calculate the probability distribution  localization is a problem that has been also explored in the wireless community for a wireless device like a laptop computer  usually carried by a human operator  many systems have been implemented that use specialized hardware  25    21   the radar system  1   however  uses only the 802.11b wireless networking for localization and applies nearest-neighbor heuristics and triangulation techniques  the authors report accuracy of 3 m with about 50 % probability  while our work has similar design goals to radar  we have taken a very different approach  2  rf signal propagation in wireless ethernet  the ieee 802.11b standard uses rfs in the 2.4-ghz band  which is license free around the world  accurate prediction of signal strength from location is a complex and difficult task  since the signal propagates by unpredictable means  5    19   in the 2.4-ghz frequency band  microwave ovens  bluetooth devices  2.4-ghz cordless phones  and welding equipment can be sources of interference  signals of this frequency are absorbed by water  and consequently  people will also absorb signal since human bodies are almost 70 % water  due to reflection  refraction  scattering  dependence on atmospheric parameters  and absorption of radio waves by structures inside a building  the transmitted signal most often reaches the receiver by more than one path  resulting in a phenomenon known as multipath fading  11   signal multipath effects cause the observed signal strength to vary in unpredictable ways as the receiver position varies  but signal profiles tend to remain approximately the same over short distances  11   many efforts have been made to model radio-signal distribution in an indoor environment  9    19   although it has been suggested that the 1042-296x/04 $ 20.00 2004 ieee 556 ieee transactions on robotics and automation  vol  20  no  3  june 2004 fig  1 two examples of signal-strength distributions  measured over time at a constant location  signal propagates according to a log-normal function  9    10   different experiments have arrived at different distributions  and a general model remains unavailable  our experiments verified this ; we concluded that log-normal fits were only feasible when line-of-sight between transmitter and receiver existed  in our experiments  the noise distributions of signal strength measured at a fixed location varied greatly  in fig  1  we show two typical examples of the signal  the two distributions correspond to measurements taken over time from the same position  although there is a dominant mode in both of them  we observe that the distributions are asymmetric and multimodal  i.e  non-gaussian   ii  methodology 1  hardware  our experiments were conducted by a human operator carrying a hp omnibook 6000 laptop with a pcmcia linksys wireless ethernet card  this particular card uses the intersil prism2 chip set  we modified the standard linux kernel driver to use the base station probe facility of 802.11b  12  to request packets from the base station to obtain the necessary signal-strength measurements  the normal usage of this facility is for determining which base station has the strongest signal and should be chosen as the home station for the card  the card firmware logs and reports eight-bit signal strengths and hardware addresses  mac addresses  for each response packet received  each probe returns between zero and four responses from each base station within range of the card  probes can be made safely at frame rate of between three and six times per second  which will vary with network traffic and location  we remark that this signal is quite thin when compared with other sensors  such as sonar or a laser range finder  we estimate that in our setup  there are roughly five meaningful bits of information from each packet  and these bits are noisy  2  our model  the localizer that we implemented operates in the general framework of bayesian inference localization  8    13    23   we chose a state space and observation space  position is represented as a probability distribution over the states  the inference calculation consists of conditioning on the observations and then selecting a representative point from the resulting distribution  we chose points in four hallways of the building where our experiments took place  spaced roughly 1.5 m apart from each other  at two orientations  a point for our experiments was represented as a tuple  x ; y ;    to summarize  our state space consisted of a set of n points s = fs1 =  x1 ; y1 ; 1  ;    ; sn =  xn ; yn ; n  g our observation space consisted of the observations that occurred in a single measurement from our base station scanner  a packet consists of k pairs of base station mac address and signal strength  the number of replies k is different from the number of base stations  which in our experiments is 14 this is due to the fact that some base stations may not reply at all  or some of them may reply up to four times  we are assuming that the number of times a base station is replying to a probe is independent from the signal strength of the reply  as a result  a single measurement consists of a count k of the number of base station replies  a summary of the frequency counts  the number of times each of the n base stations was seen in this measurement   and then the k pairs  we denote this as a vector o = < k ; f1 ;    ; fn ;  b1 ; 1  ;    ;  bk ; k  >  where k is the count  n is the total number of base stations  fi is the frequency count for the ith base station  bj is the base station index of the j th measurement  and j is the signal strength at that point  at each point si  we take a sample of the observable  for each base station  we build two histograms at that point  the first is a distribution of the frequency counts over the sampled observations  the second is a distribution of signal strengths  based on this sample  we can calculate two kinds of conditional probability  pr  fj = a j si   the probability that the frequency counts for the j th base station is equal to a when we are at state si  and pr  j j bj ; si   the probability that the base station bj has signal strength j at state si  for o = < k ; f1 ;    ; fn ;  b1 ; 1  ;    ;  bk ; k  >  for each 1  i  n and under the assumption that the signal strength is independent from the number of replies  we compute pr  ojsi  = n j =1 pr  fj j si  k 1 j =1 pr  j j bj ; si   by explicitly integrating a probability distribution of positions based on a received measurement and selecting a representative point  we obtain a position estimate  after trying several possible schemes  we decided to solve a global localization problem for each measurement rather than keep a running estimate  because each measurement usually contains enough information to get a good guess of our position  initially  we assign equal probability to all possible states in the building of being the actual position  iterating over all states  we compute which position is most likely to have resulted in the measured signal by selecting the point of maximum probability  assuming that the point exceeds a certain threshold probability  the resulting stream can be further processed to improve precision  see sensor fusion below   3  training process  our system was trained by taking samples every 1.5 m in the world by three different operators  each operator had to hold a laptop  and to stand still for several seconds at each sample point to collect data  we assume that sampled data was operator independent  that is to say  that we believed that measured distributions would be relatively unaffected by who took the data  the amount of data taken at each point is varied adaptively according to a simple heuristic  which measures the rate of convergence to a stable distribution  once the sampled distribution at each visible base station had ieee transactions on robotics and automation  vol  20  no  3  june 2004 557 fig  2 map of duncan hall  there are five base stations marked on this map as enumerated small circles  larger circles in the picture are the pillars   two of them are located at hallway 1 and hallway 2 overall 14 different base stations were used  they were located on two different floors  converged beyond a threshold  we halt the process  this allowed us to train the system faster  spending more effort only in positions where it is necessary to achieve an accurate measurement of the signal-strength distribution  in our case  usual sampling times ranged from 10 s to 1 min per position  4  sensor fusion with a hidden markov model  we implemented a filter that works on top of the bayesian inference procedure  it takes the output of the inference engine as a stream of timed observations and tries to stabilize the distribution by noting that a person carrying a laptop typically does not move very quickly  this sort of calculation could be achieved with a much higher degree of precision using odometry from a mobile robot  we model a moving operator trying to track her position as a hidden markov model  hmm   we use a more finely discretized state space than the bayesian inference engine and try to interpolate our position out of the stream of measurements coming from this filter  we observed that  by averaging our training measurements taken at a 1.5 m spacing  and using the average measurement for the points in between  we were able to localize the computer for points where we had not taken any training samples  for our purposes  an hmm is a set of states s = fs1 ;    ; sn g  a set of observations o = fo1 ;    ; om g  a conditional probability   s 2 o !  0 ; 1   and a transition probability matrix a as in the bayesian inference engine  each state is a point  x ; y ;    the transition probability matrix semantics describe how the system being modeled evolves with time  in this case  it describes how a person travels through the state space  if  is a probability distribution over s  then 0 = a is the probability distribution after some discrete time step  the idea is that the random state change occurs  hidden from the observer  the observation function  has semantics identical to observation in the bayesian inference of position    s ; o  = pr  ojs   the probability of observing o while at s as each observation arrives   is used to update the probability of being in a given state in s  and then a is used to transition states   is chosen to be a model of the behavior of the inference engine  and a is chosen to heuristically model human motion  iii  results in our experiments  we can measure and track position robustly  in over 70 % of our localization attempts  we return either the closest trained position or an adjacent trained position  i.e  we achieved 1.5-m accuracy  although this may seem as a large error for indoor localization  it must be noted that errors are not accumulated as in the case of odometry  and that this sensor comes almost for free  since we achieved this level of accuracy in a complex indoor environment by employing commodity 802.11b ethernet equipment  the map of the building we operated in can be found in fig  2 it had fairly complicated geometry and the base stations were laid out more than a year before we began our work  we did not make any changes to the original base station locations in our building  figs  3 and 4 show tracking experiments that took place in hallways 1 and 3 of our building  respectively  the operator walked down the hallway  indicating the exact time that certain milestones were passed  giving us an accurate measure of the operators true position to compare against the localization results  in the figures  we report both the bayesian inference static localization results and the hmm fused results  in fig  3  a significant improvement is obtained and  overall  the results are excellent  in fig  4  the signal was much noisier  due to a relatively poor base station placement  note that in both cases  errors of 1.5 m are still roughly within one standard deviation  iv  summary bayesian techniques applied to signal-strength measurements from 802.11b wireless ethernet allow for real-time and accurate localization  our work provides a strong indication that both human and robot agents can use their existing wireless network interfaces  which currently serve only as communication devices  as a low-cost localization sensor  the infrastructure for such networks already exists in many real-world environments  and consequently  our scheme can be implemented as a software-only solution  the experiments were conducted by human operators which introduced error due to signal absorption and lack of odometry  nevertheless  the results are valid for localization carried with different hardware or with a mobile robot  in fact  similar experiments carried out with a 558 ieee transactions on robotics and automation  vol  20  no  3  june 2004 fig  3 measured error for walking up and down hallway 1  shown on the right graph  is within 1 m with probability 0.64  an improvement of 45 % over static localization  this improvement is illustrated in the actual tracking performance  shown in the left graph  fig  4  3 while sensor fusion provided some improvement  it was not significant  due to pathological behavior of static localization in certain regions  like hallway robot would likely be significantly more precise  as we avoid absorption errors induced by the operator and have odometry as an additional sensor  furthermore  there was no effort to improve the quality of the localization procedure by placing the base stations so as to better cover the area where the experiments took place  in an indoor environment  the multipath-fading phenomenon  interference  absorption  reflection  and refraction can not be avoided  however  our results suggest that signal-strength measurement from the 802.11b wireless ethernet devices are useful cues for localization  there are many interesting open problems related to the use of wireless ethernet as a localization sensor  such as the behavior of the signal in dynamic environments  most of our experiments were taken during the night  during daytime  new problems in localization arise both from the absorption of signal by human bodies and from the heavier network traffic  furthermore  the framework we have proposed is not restricted to corridor localization where the laptop operator or the robot is forced to walk almost on a straight line  experiments in large open rooms and on multiple floors can provide further insights on the functionality of wireless ethernet as a sensor for localization  last  but not least  is the issue of base station location  poor initial placement of base stations can severely decrease the efficiency of localization attempts  techniques that can provide suggestions for the number and the placement of base stations in order to efficiently cover an environment can significantly improve the performance of localization methods  acknowledgment the authors would like to thank g marceau for his valuable suggestions  m abdel-gawad and s schell for helping to take measurements  s crosby for his comments  and d johnson for his advice and comments  thanks also to the anonymous mobicom02 and iros02 reviewers  references  1  p bahl and v padmanabhan  user location and tracking in an in-building radio network  microsoft res  tech  rep msr-tr-99-12  1999   2  h choset and k nagatani  topological simultaneous localization and mapping  slam   toward exact localization without explicit localization  ieee trans  robot  automat  vol  17  pp  125137  apr  2001 ieee transactions on robotics and automation  vol  20  no  3  june 2004  3  h choset  s walker  k eiamsa-ard  and j burdick  sensor-based exploration  incremental construction of the hierarchical generalized voronoi graph  int  j robot  res  vol  19  pp  126148  feb 2002   4  i cox  blanchean experiment in guidance and navigation of an autonomous robot vehicle  ieee trans  robot  automat  vol  7  pp  193204  apr  1991   5  t cutler  wireless ethernet and how to use it  in the online industrial ethernet book  hampshire  u.k  ggh marketing commun  1999  pt  5   6  g dudek and m jenkins  computational principles of mobile robotics  cambridge  u.k  cambridge univ  press  2000   7  d fox  w burgard  f dellaert  and s thrun  monte carlo localization  efficient position estimation for mobile robots  in proc  16th nat  conf  artificial intelligence  orlando  fl  1999  pp  343349   8  d fox  w burgard  and s thrun  markov localization for mobile robots in dynamic environments  j artif  intell  res  vol  11  pp  391427  nov 1999   9  p harley  short-distance attenuation measurements at 900 mhz and 1.8 ghz using low antenna heights for microcells  ieee j select  areas commun  vol  7  pp  511  jan 1989   10  h hashemi  impulse response modeling of indoor radio propagation channels  ieee j select  areas commun  vol  11  pp  967978  sept 1993  the indoor radio propagation channel  proc  ieee  vol  81  pp   11  943968  july 1993   12  wireless lan medium access control  mac  and physical layer  phy  specifications  ansi/ieee standard 802.11  1999   13  k konolige and k chou  markov localization using correlation  in proc  17th int  joint conf  artificial intelligence  seattle  wa  aug 1999  pp  11541159   14  b kuipers and y t byan  a robot exploration and mapping strategy based on a semantic hierarcy of spatial representations  j robot  automat  syst  vol  8  pp  4763  1991   15  a m ladd  k e bekris  g marceau  a rudys  d s wallach  and l e kavraki  using wireless ethernet for localization  in proc  ieee/rjs int  conf  intelligent robots and systems  vol  1  lausanne  switzerland  sept.-oct 2002  pp  402408   16  a m ladd  k e bekris  a rudys  g marceau  l e kavraki  and d s wallach  robotics-based location sensing using wireless ethernet  in proc  8th acm int  conf  mobile computing and netwrking  atlanta  ga  sept 2002  pp  227238   17  j j leonard and h durrant-whyte  mobile robot localization by tracking geometric beacons  ieee trans  robot  automat  vol  7  pp  376382  june 1991   18  t logsdon  understanding the navstar  gps  cis and ivhs  2nd ed  new york  van nostrand/reinhold  1995   19  a neskovic  n nescovic  and g paunovic   2000  3rd quarter  modern approaches in modeling of mobile radio systems propagation environment  ieee commun  surveys  online   available  http  //www.comsoc.org/livepubs/surveys/index.html  20  e olsen  c.-w park  and j how  3d formation flight using differential carrier-phase gps sensors  in proc  ion-gps conf  sept 1998  pp  19371946   21  n priyantha  a chakraborty  and h balakrishman  the cricket location support system  in proc  6th ann  acm/ieee int  conf  mobile computing and networking  boston  ma  aug 2000  pp  3243   22  r smith and p cheeseman  on the representation of spatial uncertainty  j robot  res  vol  5  no  4  pp  5668  1987   23  s thrun  probabilistic algorithms in robotics  ai mag  vol  21  no  4  pp  93109  2000   24  s thrun  d fox  w burgard  and f dellaert  robust monte carlo localization for mobile robots  artif  intell  vol  101  pp  99141  2000   25  a ward  a jones  and a hopper  a new location technique for the active office  ieee pers  commun  mag  vol  4  pp  4247  oct 1997  559 integrated sensing and filter design for a single-link flexible manipulator g l wang and y f li abstractthis paper addresses the problem of using different sensors in filter design that can simultaneously satisfy multiple specifications  a novel approach is taken in the design paradigm that integrates the sensing strategy with the filter design  which improves the filtering performance  an application to the estimation of the endpoint vibration rate of a single-link flexible manipulator is presented with experimental verifications  index termsestimation  filter design  flexible manipulators  performance specifications  sensing  i introduction in filter designs  fundamental limitations exist due to the dynamic effects of system structures  quantifying these limitations is a research topic that has attracted considerable attention  1   it has been recognized that the sensing strategy and sensing system employed can affect the achievable filtering performance significantly  classically  the sensing system is predetermined before filter design is conducted  in the past  research in filter design has mainly been concerned with the optimization schemes to include the error variance  2   -norm minimization  4   with the optimization-based  3  and filter-design method  it is difficult to address a wider range of multiple specifications  owning to the performance constraints  in this paper  we explore a simple yet efficient way of making use of different sensor resources in filter design  in particular  we propose a design methodology to achieve multiple simultaneous specification  mss  filtering via an integrated sensing and filtering-design approach  this is achieved by a two-step procedure  the first is to find a finite number of individual specification  is  filters  this step divides the mss requirements into several is design objectives  that is  each is filter focuses on one or a few specification objectives  the second is the synthesis design stage  where an mss filter can be found by simply combining the available is filters in a convex combination  the relevant idea of using mss for control purposes was studied in  5  and  6   a new aspect considered here lies in the exploitation of the benefits of potential sensor resources for achieving the mss filtering  more precisely  the sensing-system selection is incorporated into the complete filter design cycle  see fig  1   so as to facilitate the mss filter design  this is especially useful when rich sensor resources are available  this paper is organized into two main parts  first  we describe our methodology in the context of bounded-error estimator  bee   7   second  we present the application of our methodology to a single-link flexible manipulator  the measurement of the flexible modal state can not be directly achieved via hardware sensors  estimating it using h1 manuscript received november 18  2002 this paper was recommended for publication by associate editor c melchiorri and editor a de luca upon evaluation of the reviewers comments  this work was supported by grants from the research grants council of hong kong under project cityu 1049/00e  this paper was presented in part at the american control conference  denver  co  june 2003 g l wang was with the department of manufacturing engineering and engineering management  city university of hong kong  kowloon  hong kong  he is now with sun yat-sen university  guangzhou  china  y f li is with the department of manufacturing engineering and engineering management  city university of hong kong  kowloon  hong kong  e-mail  meyfli @ cityu.edu.hk   digital object identifier 10.1109/tra.2004.824646 1042-296x/04 $ 20.00 2004 ieee 