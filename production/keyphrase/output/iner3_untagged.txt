mobility increases localizability  a survey on wireless indoor localization using inertial sensors zheng yang and chenshu wu  tsinghua university zimu zhou and xinglin zhang  hong kong university of science and technology xu wang and yunhao liu  tsinghua university wireless indoor positioning has been extensively studied for the past 2 decades and continuously attracted growing research efforts in mobile computing context  as the integration of multiple inertial sensors  e.g  accelerometer  gyroscope  and magnetometer  to nowadays smartphones in recent years  human-centric mobility sensing is emerging and coming into vogue  mobility information  as a new dimension in addition to wireless signals  can benefit localization in a number of ways  since location and mobility are by nature related in the physical world  in this article  we survey this new trend of mobility enhancing smartphonebased indoor localization  specifically  we first study how to measure human mobility  what types of sensors we can use and what types of mobility information we can acquire  next  we discuss how mobility assists localization with respect to enhancing location accuracy  decreasing deployment cost  and enriching location context  moreover  considering the quality and cost of smartphone built-in sensors  handling measurement errors is essential and accordingly investigated  combining existing work and our own working experiences  we emphasize the principles and conduct comparative study of the mainstream technologies  finally  we conclude this survey by addressing future research directions and opportunities in this new and largely open area  categories and subject descriptors  c.2.m  computer-communication networks   miscellaneous general terms  design  algorithms additional key words and phrases  mobility  smartphones  wireless indoor localization acm reference format  zheng yang  chenshu wu  zimu zhou  xinglin zhang  xu wang  and yunhao liu  2015 mobility increases localizability  a survey on wireless indoor localization using inertial sensors  acm comput  surv  47  3  article 54  april 2015   34 pages  doi  http  //dx.doi.org/10.1145/2676430 1 introduction modern smartphones have been equipped with a number of sensors  which make smartphones not only a communication tool  but also a sensing device  after several years of this trend since iphones birth  in addition to point-to-point phone calls  smartphones are rapidly becoming an important interface that bridges the physical and digital worlds  this work is supported in part by the nsfc under grant 61171067  the nsfc major program under grant 61190110  and the nsfc distinguished young scholars program under grant 61125202 authors addresses  z yang  c wu  x wang  and y liu  school of software and tnlist  tsinghua university  beijing  china ; z zhou and x zhang  department of computer science and engineering  hong kong university of science and technology  hong kong ; email   hmilyyz  wucs32  zhouzimu.hk  zhxlinse  darenwang11  yunhaoliu  @ gmail.com  permission to make digital or hard copies of part or all of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies show this notice on the first page or initial screen of a display along with the full citation  copyrights for components of this work owned by others than acm must be honored  abstracting with credit is permitted  to copy otherwise  to republish  to post on servers  to redistribute to lists  or to use any component of this work in other works requires prior specific permission and/or a fee  permissions may be requested from publications dept  acm  inc  2 penn plaza  suite 701  new york  ny 10121-0701 usa  fax +1  212  869-0481  or permissions @ acm.org  c 2015 acm 0360-0300/2015/04-art54 $ 15.00  doi  http  //dx.doi.org/10.1145/2676430 acm computing surveys  vol  47  no  3  article 54  publication date  april 2015  54 54:2 z yang et al  taking the case of an iphone  it includes various types of sensors  including microphone  camera  proximity sensor  gps  accelerometer  gyroscope  compass  etc    through which sound  image  video  location  and mobility information can be measured by phones  thus  human-centric environmental sensing is brought forward  based on smartphones  we are able to know and record user movements  standing  sitting  walking  running   park et al  2012 ; brajdic and harle 2013 ; wu et al  2013b   user environments  indoor/outdoor  office/home  on board   rachuri et al  2010 ; zhou et al  2012b ; yang et al  2014   and user activities  driving  cycling  sleeping  having a meeting or class   yang et al  2011 ; zhou et al  2012a ; you et al  2013   the richness of sensors reinvents the smartphone as a magic box  in which many novel mobile applications are given birth and developed  one simple but interesting application is to help users judge the taste of a watermelon without cutting it  the way is that users first press a phone closely against a watermelon and then knock the watermelon from outside  the application then provides a suggestion according to the sound of knocking  which is automatically recorded by microphones  a more complicated application is to monitor the quality of all-night sleeping  when a user goes to bed  he puts a phone on the bed as well  with the built-in sensors detecting the body and limb movements  the phone offers a sum-up report of sleeping based on some professional medical knowledge when the user gets up in the morning  the inertial sensors play a key role in this application  in retrospect  before the prevalence of smartphones  whereas laptops  pdas  and ordinary phones are all truly mobile devices  they have seldom been involved in humancentric sensing for lack of sensors  although smartphone-based sensors can facilitate a wide range of services  this article focuses on positioning ; that is  how mobility  measured by inertial sensors  increases localizability of nowadays indoor localization systems  accurate  reliable  and ubiquitous indoor localization systems are the key enabler for a wide range of personal  commercial  medical  and public services and applications  different from outdoor positioning where gps almost dominates the market  indoor localization embraces a technology flourish  many techniques and systems are designed and come into service  providing various levels of accuracy  cost  and applicability  for example  optical positioning mainly targets at submillimeter application domains  yet involves privacy concerns and intensive computing complexity  mautz and tilch 2011   ultrasonic signals generally offer an accuracy of centimeters  priyantha et al  2000 ; ubisense 2013  at the cost of extra ultrasound infrastructure  with the astonishing growth of wireless devices and networks  wireless indoor localization has attracted extensive research efforts in the past 2 decades  bahl and padmanabhan 2000 ; youssef and agrawala 2005 ; ni et al  2003 ; azizyan et al  2009 ; sen et al  2012 ; lim et al  2006 ; constandache et al  2010b ; liu et al  2012 ; yoon et al  2013 ; sen et al  2013 ; liu et al  2013   the diversity of application requirements results in the concurrent progress of different wireless-based positioning techniques  among all techniques  wifi-based positioning is one of the most popular  mainly due to the worldwide availability of wifi technology  the rationale behind wifi positioning is straightforward  a mobile device  at somewhere covered by a wifi signal  records the hearable wifi access points  aps  and their corresponding signal strength as the radio signal characteristics  a.k.a  signal fingerprint  for this specific position  such a fingerprint  as a location query  is further sent to a location service provider who has a wifi fingerprint database of a great amount of fingerprints collected at every position within an area of interest  the location service provider then retrieves the database for the most similar fingerprint with respect to the location query  and returns its corresponding recorded location as the location estimation  the uniqueness of wifi aps  in terms of the mac addresses  and acm computing surveys  vol  47  no  3  article 54  publication date  april 2015 mobility increases localizability 54:3 the signal attenuation across space account for the principle of wifi positioning  from the systematic aspect  the process of localization is composed of two stages  training and operating  yang et al  2012   during the training phase  traditional methods involve a site survey process  a.k.a  calibration   in which professional engineers record the signal characteristics  known as fingerprints  at every location of an interested area  the collected fingerprints and their corresponding locations are then associated with each other to build up a fingerprint database  when a new user tries to locate himself during the operating phase  he queries his location by uploading his signal fingerprint to the server  the server retrieves the database by comparing fingerprints  and returns the location with the best matched fingerprint to the user  wifi positioning is booming recently  in late 2011  google map 6.0 announced new services of indoor positioning and navigation  mcclendon 2011   other followers include microsofts bing maps  baidus interior maps  nokias here  formerly ovi maps   etc  in addition  skyhook wireless  skyhook 2013  manages a global location database with more than a billion wifi access points and millions of venues and serves a variety of customers from individual application developers to industry giants including apple  google  and sony  despite its success  wifi positioning faces several challenges on its fast track of development  location error  the indoor attenuation of wireless signals is extraordinarily unpredictable because of complex environmental factors  leading to decreased performance of widely used signal models  for instance  multipath fading brings about strenuous fluctuation on signal amplitudes in small scale of only several centimeters  sen et al  2013 ; wu et al  2012   besides  environmental dynamics  such as human movements  door opening and closing  and furniture rearrangement  can also change the signal strength distribution across an area  fet et al  2013   to make things worse  some researchers observe experimentally that two far-away locations in an open indoor space may have similar signal fingerprints  which  according to the scheme of wifi positioning  may induce incorrect location estimation  liu et al  2012 ; sun et al  2013a   deployment cost  the procedure of site survey is time-consuming  labor-intensive  and vulnerable to environmental dynamics  chintalapudi et al  2010 ; yang et al  2012   however  it is inevitable for fingerprinting-based approaches  since the fingerprint database relies on locationally labeled fingerprints from on-site records  chintalapudi et al  2010 ; yang et al  2012 ; wang et al  2012   even the indoor mapping services of google map 6.0 was available only at selected airports and shopping malls in several districts  e.g  the us and japan  at its release  mcclendon 2011   its applicability to broader areas is strangled by the limited quantity and granularity of fingerprint data of building interiors  the worldwide usage of indoor positioning calls for low deployment cost  absence of location context  locations  in indoor environments  are strongly related to human activities  which motivates people to discover the semantic context of locations  location context refers to the name  usage  function  and activity of a specific location that users can understand and feel intuitively  schmidt et al  1999 ; kim et al  2009 ; azizyan et al  2009 ; ye et al  2011   in many cases  the context of a location is equally valuable to or even more valuable than location itself  for example  comparing with the absolute x-y coordinates  it is more meaningful for users inside buildings to know room numbers or room usages such as office rooms  meeting rooms  or corridors  furthermore  a route in a floor plan toward the nearest printer is more convenient than the printers location coordinates  nevertheless  wifi positioning is powerless on distinguishing rooms  identifying room usage  generating indoor maps  acm computing surveys  vol  47  no  3  article 54  publication date  april 2015  54:4 z yang et al  and characterizing user activities  so far  the acquisition of location contexts mostly relies on human inputs  recently  an increasing number of researchers realize that mobility information  as a new dimension in addition to wireless signals  can be employed to deal with the three previously mentioned challenges and consequently upgrade indoor positioning to a higher level  constandache et al  2010b ; wang et al  2012 ; yang et al  2012 ; rai et al  2012 ; sun et al  2013a ; wu et al  2013a   it is easy to understand that being aware of mobility could benefit localization  since location and mobility are by nature related in the physical world  the current location of a moving object depends on both its past location and its movements  in this article  we survey this new trend of mobility enhancing smartphone-based indoor localization  specifically  we first study how to measure human mobility  what types of sensors we can use and what types of mobility information we can acquire  next  we discuss how mobility assists localization with respect to enhancing location accuracy  decreasing deployment cost  and enriching location context  the enhancement of location accuracy can be seen as a direct result of the add-on of mobility  while the latter two require more complicated mechanisms  moreover  considering the quality and cost of smartphone built-in sensors  handling measurement errors is essential and accordingly investigated  combining existing work and our own working experiences  we emphasize the principles and conduct a comparative study of the mainstream technologies  finally  we conclude this survey by addressing future research directions and opportunities in this new and largely open area  2 what types of sensors among various sensors  inertial measurement units  imus  are one of the most widely adopted to measure mobility  an imu is an electronic device that measures velocity  orientation  and gravitational forces  and often constitutes accelerometers and gyroscopes  and magnetometers  wikipedia 2014a   imus are primarily designed for inertial navigation systems of aircraft  spacecraft  watercraft  and guided missiles  wikipedia 2014a  by means of dead reckoning  which refers to the process of calculating ones current position by using a previously determined position  or fix  and advancing that position based upon known or estimated speeds over elapsed time and course  wikipedia 2014b   modern smartphones also possess various types of inertial sensors  making them an integrated platform for communication  sensing  and computing  constrained by cost  size  and power consumption of sensors  however  smartphone imus have their own unique characteristics  in this section  we review the principles  current development  and future trends of typical inertial sensors on smartphones  2.1 smartphone imu  principles modern smartphones are equipped with various inertial sensors  they compose a simple but workable unit of inertial sensing and are  therefore  considered an imu of smartphones  smartphone imus typically include three major types of sensors  accelerometer  gyroscope  and magnetometer  2.1.1 accelerometers  an accelerometer is an infrastructure to measure acceleration  which works as a damped mass on a spring  wikipedia 2014c  leveraging newtons laws of motion  modern accelerometers are usually micro electro-mechanical systems  mems   and in fact the simplest mems devices possible  wikipedia 2014c   the si unit of acceleration is meters per second squared  m/s2   or popularly in terms of g-force  g   in practice  it also requires local gravity to calculate the actual acceleration value with respect to the earth  the value of local gravity can be obtained by device calibration at rest or gravity modeling given the current position  wikipedia 2014c   acm computing surveys  vol  47  no  3  article 54  publication date  april 2015 mobility increases localizability 54:5 2.1.2 gyroscopes  a gyroscope is an instrument to measure or maintain orientation in principle of angular momentum  wikipedia 2014d   it is mechanically a spinning wheel or disc in which the axle is free to assume any orientation  wikipedia 2014d   besides applications in general navigation  gyroscopes are often exploited in conjunction with accelerometers to derive robust direction information  e.g  x  y  z-axis acceleration with the extent and rate of rotation in roll  pitch  and yaw  wikipedia 2014d    2.1.3 magnetometers  a magnetometer  or magnetic field sensor   is a device that measures the strength and the direction of magnetic fields  wikipedia 2014e   the types of magnetometers vary  magnetoresistive sensors and hall effect devices are the most popular  yet there is also a huge dispute  both technically and commercially  on the use of the two for consumer devices  2.2 smartphone imu  typical performance table i lists the parameters of imus of several fashionable consumer electronic devices ranging from smartphones to tablets  imu has demonstrated its wide popularity in the smartphone market  in addition to the latest consumer devices listed in table i  almost every smartphone today has a motion sensor embedded inside  in terms of performance  imus are qualified to a large number of services  such as linking movements of the users wrist  arm  and hand to applications ; navigation with and between pages ; the movements of characters in a game  etc  however  researchers and application developers complain that the accuracy of smarpthone imus is insufficient for dead reckoning and other location-based services  in fact  compared with the generally believed accurate imus used in micro unmanned aerial vehicle  muav  and other industrial applications  the smartphone imus possess the same or similar core sensing component  but differ in sensor screening  installation error calibration  cross axis error calibration  zero point correction  temperature drift compensation  etc  for instance  adis adis16405 and adis16400 are based on the same adis low cost sensing elements  but the former is more expensive than the latter  the only two major differences are the bias temperature coefficient and the sensitivity temperature coefficient  adis16405 is carefully calibrated in various temperatures ranging from 40 to 85 c  resulting in an increased cost on testing  the reduced factory-calibration efforts contribute to the low cost of smartphone imus  as gyroscopes have experienced a dramatic drop in cost  the cost of imus is basically acceptable by mainstream smartphones  yet  researchers have to avoid the direct use of dead reckoning with low cost sensors  and resort to pedestrian motion modeling for accurate mobility measurements  section 3   2.3 smartphone imu  future potentials with advances in sensor design and manufacturing  increasingly powerful sensors of various types are now available in smartphones at low costs  depending on which novel applications are rising in response  accelerometers today can pick up the sound of key strikes on an alphanumeric keyboard with such precision that a computer program can determine what keys are being struck ; magnetometers can detect the 50/60hz magnetic field emanating from a power cord ; barometers can notice the atmospheric change between floors of a building  another future trend of imu is to combine multisensor modules and deploy dedicated sensor fusion algorithms  thus advancing the quadruple convergence of high accuracy  small size  efficient energy  and low cost  motion sensors in consumer and mobile applications will be dominated by combo sensors  with their revenue hitting $ 1.4 billion by 2016  or 71 % of the overall market  while that of discrete instruments tends to shrink gradually  dixon 2012   in fact  the six-axis combo sensor has dominated as acm computing surveys  vol  47  no  3  article 54  publication date  april 2015  3 3 3 3 6 3 3 3 n/a 3 6 n/a 3 3 3 3 3 iphone5s l3g4200d iphone4 l3g4200d iphone 3g n/a samsung galaxy sii l3g4200d google nexus 5 mpu-6500 motorola droid n/a iphone5s ak8963 ipad2 ak8975 samsung galaxy sii ak8975 google nexus 5 ak8963 motorola droid ak8973 sensor type axis iphone5s bma220 iphone4 lis331dlh iphone 3g lis331dl samsung galaxy sii lis3dh google nexus 5 mpu-6500 motorola droid bma150 host smartphone 3*3*0.75 4*4*0.75 4*4*0.75 3*3*0.75 4*4*0.7 4*4*1.1 4*4*1.1 n/a 4*4*1.1 3*3*0.9 n/a 2*2*0.98 3*3*1 3*3*1 3*3*1 3*3*0.9 3*3*0.9 package size  mm3  measurement range accelerometer 2/4/8/16g 2/4/8g 2/8g 2/4/8/16g 2/4/8/16g 2/4/8g gyroscopes 250/500/2000 250/500/2000 n/a 250/500/2000 250/500/1000/2000 n/a magnetometers n/a n/a n/a n/a n/a table i smartphone imus st st n/a st invensense n/a akm akm akm akm akm 3085 3085 3085 3085 3085 0.150.6t/lsb 0.3t/lsb 0.3t/lsb 0.6t/lsb 1.6t/lsb 8.7570mdps/digit 8.7570mdps/digit n/a 8.7570mdps/digit 7.6061mdps/digit n/a 4085 4085 n/a 4085 4085 n/a manufacturer bosch st st st invensense bosch temperature range  c  2/4/8/16 lsb/g 4085 250/500/1000 lsb/g 4085 14/56 lsb/g 4085 83/250/500/1000 lsb/g 4085 211 /212 /213 /214 lsb/g 4085 64/128/256 lsb/g 4085 sensitivity 2013 2011 2011 2013 n/a 2013 2010 2008 2011 2013 n/a 2013 2010 2008 2011 2013 n/a year 54:6 z yang et al  acm computing surveys  vol  47  no  3  article 54  publication date  april 2015 mobility increases localizability 54:7 fig  1 an illustration of human mobility information derivable from phone sensors  a ready substitute for the three-axis design  for instance  the recent mpu-6500 chip integrates a three-axis accelerometer  a three-axis gyroscope  and an on-board digital motion processor  invensense 2013   and manufacturers have joined the combo sensor race and other pioneer examples include sts inemo  invensenses mpu-9150  bosch sensortecs bno055  kionixs kmx61g  maxim integrateds max21100  freescales frdm-fxs-multi-b  miramemss dc210  mcube  etc  combo sensor imus enable in-chip data fusion for accurate motion tracking  early industry efforts using rudimentary sample codes available from some sensor manufacturers have been unsatisfactory and some codes of sensor usage are proved to be vulnerable even in the android specification  today  major sensor suppliers have realized that algorithms and software are essential elements of their product offerings  independent middleware developers have created sensor libraries that not only provide accurate headings by keeping the sensors in proper calibration  but also mitigate against the distorting effects of internal magnetic interferences  current sensors present metrological measurements of their physical environment but  without proper perspectives and interpretation  those sensor readings are often underutilized  even extracted mobility information can be further refined to infer high level knowledge such as locations  activities  and behaviors of users  spawning many applications of context-aware computing in which mobility  as well as user locations  is considered as key context  abowd et al  2002 ; yang et al  2014   this expands the role of mobile devices beyond a sensor of physical environments  to an actuator that adapts its behaviors accordingly  3 what types of mobility information the rich inertial sensing modalities on smartphones report numerous instantaneous motion measurements  such as acceleration  angular velocity  and absolute direction  via built-in accelerometer  gyroscope  and compass  respectively  to assist indoor localization and navigation  these low level physical displacement and directional measurements are integrated over time and augmented with location context into more complex human mobility information  such as walking steps  trajectories  locomotion modalities  e.g  walking and running   virtual landmarks  e.g  stairs and lifts   etc  figure 1 illustrates a typical scenario of indoor inertial sensing as well as types of mobility information derivable from phone sensors  however  assembling human mobility information from phone sensory data is an endeavor fraught with obstacles  we briefly summarize them into three aspects  noisy sensor measurements  it is inevitable to induce noise in raw sensory measurements  when integrating these physical measurements over time  even small errors acm computing surveys  vol  47  no  3  article 54  publication date  april 2015  54:8 z yang et al  fig  2 acceleration magnitudes during a sample walking demonstrating the repetitive patterns of walking  may drift dramatically  for instance  errors accumulate quadratically when deriving displacement by twice integrating acceleration  unconstrained phone placement  since most inertial sensors measure motion information  these measurements are sensitive to sensor placements  harle 2013   for instance  acceleration traces exhibit more distinctive patterns with a foot-mounted accelerometer  angermann and robertson 2012  than with a phone accelerometer put in a bag due to random bouncing of phones  complex human locomotion  human body can be in various poses  with at least 244 degrees of freedom  zatsiorsky 1998   individuals of different heights  weights  ages  health states  etc  can exhibit different motion gaits  furthermore  people may sometimes behave unpredictably  therefore  it is challenging to extract consistent and robust locomotion patterns and accurate mobility information leveraging only phone sensors  since most indoor localization and navigation systems target at pedestrians  we mainly focus on step and stride  i.e  two steps  related human mobility information  which is fundamental and specific to pedestrians  in this section  we elaborate the principles to derive displacement and direction information of step vectors  as well as integrated and behavioral human mobility information  3.1 displacement information step detection and counting is a basic module in most inertial-based pedestrian localization and navigation systems  the physical underpinning is to search for cycles in acceleration traces to capture the repetitive movements during walking  figure 2 depicts the raw acceleration traces during a sample walking  which exhibits notable repetitive cycles  the subsequent sections summarize algorithms for step detection and counting using phone accelerometers  followed by a brief discussion on the individualspecific stride length  3.1.1 step detection and counting  when inputting an acceleration trace  step detection algorithms slice and label the trace into steps exploiting the repetitive patterns of walking  and the labels are then summed into step counts  we roughly group these algorithms as follows  temporal analysis  the cyclic property of walking is directly reflected in the acceleration trace in the time domain  since heel strikes tend to introduce sharp changes  numerous schemes propose to detect magnitude peaks  randell et al  2003 ; wu et al  2013a   local variance peaks  jimenez et al  2009 ; yang et al  2012   local minima acm computing surveys  vol  47  no  3  article 54  publication date  april 2015 mobility increases localizability 54:9 table ii  recent smartphone-based step counting summary citation zhu et al   2013  yang et al   2012  wang et al   2012   sen et al   2013  wu et al   2013b  rai et al   2012  rong et al   2007   brajdic and harle  2013  barralon et al   2006   brajdic and harle  2013  mannini and sabatini  2011  techniques decide levels upon historical statistics detect level crossings threshold on local variance detect two consecutive local minima check a significant local maxima detect step starts and ends by threshold identify steps via finite state machine normalized autocorrelation template matching via dtw zero cwt coefficients outside walking frequency inverse transform and count mean crossings two-state hmm clustering cost error rate low n/a low 2 % low 2 % low about 2 % medium medium 0.6 % < 2 % medium about 1.3 % high about 1.3 %  wang et al  2012 ; sen et al  2013   zero-crossings  goyal et al  2011   or levelcrossings  zhu et al  2013   levels defined by historical mean and variance  from the low-pass filtered acceleration trace  autocorrelation is a more robust means to magnify periodicity in the time domain regardless of the absolute amplitude of acceleration  rai et al  2012   steps can also be recognized by matching with a stride template either linearly  e.g  by cross-correlation  marschollek et al  2008   or nonlinearly  e.g  by dynamic time warping  rong et al  2007    yet at a higher cost  spectral analysis  when the acceleration trace contains at least two walking cycles  it is possible to identify the repetitive walking patterns in the frequency domain  the rationale is that walking movements would generate dominant frequencies around 2hz  a unique spectral characteristic compared with other human activities  shortterm fourier transform  stft   brajdic and harle 2013  and wavelet transforms  barralon et al  2006 ; hua wang et al  2012  have been employed to extract dominant frequencies  and steps are counted as the sum of the transform coefficients of the walking frequency  feature clustering  besides the previous pattern analysis approaches  research also resorts to machine learning techniques to classify walking steps via features from acceleration traces  various features have been explored  including statistics  siirtola and roning 2012   entropy  bao and intille 2004   as well as temporal correlation  ravi et al  2005  and fourier transform coefficients  kobayashi et al  2011   albeit its high computational cost  feature clustering-based schemes are more general and are often applied to classify multiple human activities beyond walking  table ii summarizes some recent smartphone-based step counting schemes in terms of techniques  cost  and performance  we refer interested readers to harle  2013  for a review on step counting strategies via non-smartphone imus  e.g  foot mounted  and noninertial sensors  e.g  ultrasonic   temporal analysis-based schemes are the most intuitive in concept  and facilitate physical explanation on the extracted feature metrics  the primary drawback is that the cyclic walking patterns are mixed with other noises in the time domain  spectral analysis-based approaches offer an orthogonal domain to distinguish frequencies of walking and other noises  yet are less intuitive  for example  it is difficult to distinguish fine-grained walking patterns such as heel-up and heel-down directly from the signal spectrum  in addition  the accuracy of spectral analysis improves with the amount of signal periods contained in the input signal  acm computing surveys  vol  47  no  3  article 54  publication date  april 2015  54:10 z yang et al  hence spectral analysis often requires more signal samples than temporal analysis  feature clustering is agnostic to the underlying physical meanings  yet can provide higher accuracy given sufficient training efforts  as shown in table ii  one recent work exploiting a modified autocorrelation scheme in the time domain  rai et al  2012  reports high detection accuracy  since autocorrelation techniques increase signal-to-noise ratio with the increase of input signal length  and the temporal approach facilitates other auxiliary error correction schemes as the signal features have clear physical interpretations  although step counting accuracy of above 99 % is often reported under laboratory conditions  harle 2013   unified performance comparison is difficult  a recent study  brajdic and harle 2013  conducted a realistic evaluation of three categories of step counting algorithms with 27 people and 130 traces  they recommend standard deviation thresholding and windowed peak detection for its simplicity  with a reasonable error rate of 3 % evaluated with six phone placements and six user behaviors  however  it remains unsettled whether these algorithms would be robust to varying walking speeds  rough surfaces  etc  3.1.2 stride length estimation  knowing stride length is necessary when converting steps into distance traversed  pedestrians may exhibit different stride lengths due to variety in height  walking speed  and style  according to weinberg  2002   step length may vary up to 40 % at the same walking speed  and 50 % with various speeds of the same person  assuming constant stride length is efficient when frequent landmark calibration is available  wang et al  2012  or when only a short walking distance is required  sen et al  2013   nevertheless  with the emerging trend of crowdsourcingbased indoor localization and navigation  wu et al  2013a ; rai et al  2012 ; yang et al  2012 ; shen et al  2013 ; purohit et al  2013 ; jiang et al  2013   walking traces of diverse users are expected to be calibrated and integrated  therefore  it would boost the quality of the crowdsourced mobility information by considering individual-specific stride length  some pioneer efforts in stride length estimation are summarized as follows  offline calibration  an intuitive way to estimate user-specific stride length is to divide a known walking distance by measured step counts  however  since the walking patterns may not distribute uniformly  this method may induce bias on dominant walking patterns  cho et al  2010   online estimation  some recent systems also propose to simultaneously estimate stride length and user locations via an augmented particle filter  rai et al  2012   the rationale is to iteratively select the optimal stride length that fits user traces and map constraints  stride length modeling  originated from human kinematics  other studies correlate stride length with step frequency  margaria and margaria 1976 ; ladetto 2000 ; gusenbauer et al  2010   the key observation is that stride length tends to be shorter when walking slowly rather than fast  bertram and ruina 2001   a simple linear relationship suffices  cho et al  2010   yet the model parameters  which are trained offline  are specific to walking conditions  such as wearing sport shoes or high heels  shen et al  2013   accurate stride length improves displacement estimation  yet the accuracy increase is often marginal since heading drift typically dominates the errors  harle 2013   alternatively  when combining wireless and inertial-based localization schemes  some novel explorations have partially eliminated the need to estimate user-specific stride length via virtual landmark assisted normalization  shen et al  2013  or error-tolerant transforms  yang et al  2012   acm computing surveys  vol  47  no  3  article 54  publication date  april 2015 mobility increases localizability 54:11 3.2 direction information the direction of steps during walking is usually obtained by phone gyroscope and compass  magnetometer   the former outputs angular velocities in 3d  which are integrated over time into direction change  turning   while the latter directly measures the absolute orientation  heading  of the phone with respect to the magnetic north  although compasses alone prove to be feasible for outdoor dead reckoning  constandache et al  2010b ; wang et al  2013   the two modalities often work synergistically in the literature of indoor localization and navigation  li et al  2012b ; wang et al  2012 ; rai et al  2012   due to the unique challenges indoors and their complementary error characteristics  the metal and conducting material indoors can significantly disturb compass readings and lead to short-term heading estimation errors of up to 100  afzal et al  2001   gyroscopes remain unaffected by magnetic fields  yet suffer from bias caused by initial direction  wang et al  2012   and the estimated orientation drifts substantially with time  sen et al  2013   in this subsection  we first review turning estimation via gyroscope  and then summarize how to combine compass with additional sensory modalities to enhance heading estimation  3.2.1 turning  the layout of many indoor environments consists of perpendicular corridors and corners  where pedestrians tend to walk in straight lines and take turns  turning information benefits indoor localization systems in a range of aspects  for instance  being aware of left or right turns resolves side ambiguity in wireless angle of arrival estimation using linear antenna arrays  sen et al  2013   turning information also facilitates stride length estimation  rai et al  2012  and serves as landmarks to assist drift calibration in pedestrian dead reckoning  wang et al  2012 ; park et al  2013   a turn is detected when the relative orientation measured by gyroscopes experiences an abrupt change  to differentiate changes corresponding to turns from those caused by noise  only heading changes exceeding a predefined threshold are determined as turns  in addition  heading changes within only a short time interval are also discarded  park et al   2013  reports precision of about 85 % and recall of 100 % for turn detection considering phone placement diversity  messing  calling  swing  and in pockets   device type  three types of phones   and user difference  eight volunteers   according to park et al   2013   phone placement that introduces back and forth movements deteriorates the performance of turn detection most  3.2.2 heading  the main hurdle for accurate heading estimation via phone compass is twofold  magnetic offset  metal and conducting material nearby can disturb the perceived north of a phone compass  thus leading to offset in heading estimation  magnetic offset is location specific  and thus unpredictable beforehand  rai et al  2012   placement offset  the compass measures the orientation of the phone  while the phones heading may not be aligned with the moving direction of the user  thus placement offset refers to the difference between the phones orientation and the moving direction of the user  figure 3 illustrates the magnetic and placement offset when estimating heading of user motion via phone compass indoors  table iii summarizes some representative proposals to enhance heading estimation  while some efforts attempt to filter magnetic offset on consecutive compass readings acm computing surveys  vol  47  no  3  article 54  publication date  april 2015  54:12 z yang et al  fig  3 an illustration of magnetic offset and placement offset when estimating heading via phone compass  table iii  representative heading estimation approaches citation sensors techniques errors youssef et al   2010  wang et al   2012  cp time domain averaging n/a cp+g li et al   2012b  cp+g+a gyroscope verification magnetic landmark calibration identify inference points particle filter rai et al   2012  cp+g+a within 20 for 90 % cases 23 for 95 % cases n/a estimate offset range via spectral analysis augmented particle filter roy et al  cp+g+a human walking pattern < 6  2014  analysis localize  quantify  and isolate magnetic interference sun et al  cp+ca+a detect visual patterns on 1 on  2013b  ceilings and integrate with average compass readings cp  compass  g  gyroscope  a  accelerometer  ca  camera  limitation effective only for temporary magnetic interference initial heading estimation errors dependence on landmarks initial heading estimation errors converge time extra spectral processing converge time require several steps of walk high computation overhead fail if unable to take photos  youssef et al  2010   others fuse multiple sensors to improve estimation accuracy  wang et al  2012 ; li et al  2012b ; rai et al  2012 ; shen et al  2013 ; sun et al  2013b   the rationale is to exploit additional sensors  e.g  gyroscopes  to evaluate the compass readings  wang et al  2012 ; li et al  2012b   and rectify heading estimation iteratively during walking  e.g  particle filter   li et al  2012b ; rai et al  2012   according to the additional sensory modalities utilized  we categorize these schemes as follows  inertial verification  since multiple inertial sensors are integrated on a single smartphone  they tend to perceive similar movements during walking  for example  compass value is probably valid if the readings of the phone compass and gyroscope experience a correlated trend  wang et al  2012   which assists in discarding compass values containing severe magnetic offset  acceleration traces  on the other hand  can be utilized to identify the time when the phone placement is the same to that when the phone is first put into a pocket  which helps to accurately infer the moving direction of the user  given the initial phone placement offset  li et al  2012b   visual reference  since modern buildings are mostly rectangular  steadman 2006   the straight ceiling edges offer an orthogonal reference to determine heading information  in sun et al   2013b   the ceiling edges are extracted from images taken by phone camera using computer vision techniques  the orientation of the detected edges relative to the phone is also computed  together with the absolute orientation of the rectangular building  and thus the ceiling edges   they achieve average heading precision of 1 with arbitrary phone holding poses  although its heading estimation accuracy improves by dozens than inertial schemes  the computational acm computing surveys  vol  47  no  3  article 54  publication date  april 2015 mobility increases localizability 54:13 overhead  energy consumption  as well as the perquisite to take photos  impede its viability  in summary  while a compass directly provides the absolute directions of phones  magnetic offset and placement offset considerably deviate compass readings from the actual moving direction  recent advances fuse extra sensors with compasses to provide robust heading estimation  yet accuracy still remains a bottleneck for inertialbased indoor localization and navigation systems  one recent work  roy et al  2014  reduces heading estimation error to less than 6 by in-depth video-based human walking pattern analysis and magnetic interference localization and isolation  which is approaching the accuracy of visual reference-based methods  the primary hurdle for this bottleneck is that inertial-based heading estimation schemes exploit sensors to perceive the relatively unconstrained human behaviors  making precise walking direction a micromotion that requires subtle identification  roy et al  2014   in contrast  visual reference-based approaches  sun et al  2013b  leverage static landmarks such as ceiling edges  yet improve estimation accuracy at the cost of computation and energy consumption  3.3 integrated information previous subsections mainly elaborate the principles and methods to derive short-term displacement and direction information  e.g  steps and turns  from sensory data  in this subsection  we demonstrate how the instantaneous displacement and direction information is integrated into more complex human mobility information  3.3.1 trajectory  a pedestrian trajectory consists of a sequence of step vectors  while inertial-based indoor localization and navigation systems require accurate trajectories to track pedestrians  some recent work  wu et al  2013a ; yang et al  2012  also exploit comparatively coarse-grained trajectory information to assist wireless localization  in wu et al   2013a   trajectories are utilized to infer whether the wireless fingerprints from different locations are reachable with each other  yang et al   2012  utilize stressfree walking distances  rather than rigid trajectories  to transform the localization problem from two-dimension floor plan space to a high-dimension wireless fingerprint space  accurate trajectory estimation still lies in the core of various indoor localization and navigation systems  besides traditional challenges in calibrating trajectories of a single user  the emerging trend of crowdsourcing-based localization also poses new challenges in clustering trajectories from diverse users  rai et al  2012 ; shen et al  2013   3.3.2 locomotion modality  awareness of locomotion modalities  e.g  walking or running  and usage behaviors  e.g  text messaging or making a phone call  assists to construct more elaborated motion models  e.g  adjust stride length estimation or step counting according to varying speeds and phone placements   thus holding potential for improving localization and navigation algorithms  identifying these behaviors belongs to a subset of the enormous research on activity recognition  ravi et al  2005   some recent work has already explored utilizing phone accelerometers to distinguish different motion modalities  walking or running   iso and yamazaki 2006 ; miluzzo et al  2008   transportation modes  bus or metro   hemminki et al  2013   and phone poses  in hand or at ear   park et al  2012   though promising  it is inevitable to involve relatively complex machine learning techniques to differentiate locomotion modalities and phone placements  which incurs considerable computation and energy overhead  it still lacks comparative studies on the trade-off between the overhead of distinguishing fine-grained locomotion modalities and the performance gain on indoor localization  acm computing surveys  vol  47  no  3  article 54  publication date  april 2015  54:14 z yang et al  fig  4 typical architecture of wifi fingerprint-based localization systems  3.3.3 context landmarks  the mobility information measured by sensors  when combined with location context  can provide unique virtual landmarks  which facilitates recalibration and thus improves localization accuracy  the key observation is that certain building structures would demonstrate distinctive sensor signatures  for instance  the acceleration readings on an elevator experience a sharp surge and drop at the start and the stop of the elevator  wang et al   2012  investigate such unique acceleration patterns of stairs  elevators  escalators  walking  and standing  and achieve an overall false positive of 0.2 % and false negative of 1.1 %  respectively  if the locations of these structures are known as prior  they would serve as landmarks to rectify dead reckoning drifts  in case of multiple users  mobility information  e.g  trajectories  of different users can be associated via encounters  these opportunistic encounters  e.g  alice happened to meet bob  can also act as virtual landmarks to calibrate dead reckoning drifts  constandache et al  2010a   e.g  we can adjust the trajectory of alice to make her current location consistent with bobs location  since bob just walked out of an elevator whose location is known as prior   such social encounters also help to refine the plausible locations of users  jun et al  2013   e.g  if alice met bob  then we may safely restrain the potential locations of alice to the intersection between the potential locations of alice and those of bob   these novel context landmarks stem from user mobility  and are complementary to static landmarks  or fingerprints  such as ambient sound  light  and color  azizyan et al  2009   while some pioneer work has explored incorporating the two  e.g  inertial patterns + wifi rssi  wang et al  2012   directions + wifi trend  shen et al  2013    its full potential still remains an open issue  4 how mobility assists localization wifi fingerprinting prevails among various wireless indoor localization techniques due to its wide availability  the general framework can be divided into two phases  training and operating  the former involves a site survey process  a.k.a  calibration   in which received signal strengths  rsss  from multiple aps at every location of interest are measured and recorded as wifi fingerprints  accordingly  a fingerprint database  a.k.a  radio map  is built  where each location is labeled with its corresponding fingerprints  in the operating stage  to locate a user sends a query with his current fingerprint ; the localization server retrieves the fingerprint database and returns the location of the best-matched fingerprints as the users location estimation  a typical architecture of fingerprint-based localization is portrayed in figure 4 ever since its birth  wifi acm computing surveys  vol  47  no  3  article 54  publication date  april 2015 mobility increases localizability 54:15 fingerprinting is considered static  human mobility information extends conventional wireless indoor localization to an orthogonal dimension  in what follows  we will discuss in detail how mobility enhances wireless localization in terms of accuracy  cost  and location context  4.1 mobility enhances localization accuracy despite extensive efforts from both academics and industries in the past decade  localization accuracy remains a primary challenge  especially in mobile environments  while proof-of-concept innovations report high accuracy under controlled settings  youssef and agrawala 2005 ; lim et al  2006   they can experience sharp performance degradation in practice  with median error consistently above 5m  turner et al  2011  and unacceptable tail errors of 12m to even 40m  liu et al  2012   the root cause of such large errors in wifi fingerprinting lies in fingerprint ambiguity  sun et al  2013a ; liu et al  2012   more specifically  a fundamental hypothesis of fingerprint-based localization is that wireless signal features  e.g  rss values  vary at different locations  each location exhibits exclusive and distinctive signal characteristics  which are analogous to biometric fingerprints and are thus referred to as wifi fingerprints of the locations  the ever-increasing number of aps deployed indoors offers high-dimensional wifi fingerprints and the potential for more accurate localization performance  one common preprocessing procedure  for example  is to compare the sets of detectable aps to distinguish wifi fingerprints from distant locations  however  this approach is often coarse-grained  since locations within room ranges can share the same detectable ap set due to the relatively large coverage of wifi signals  in addition  since not all aps are equally sensitive to location changes  their ability of discerning locations varies  therefore  some pioneer efforts  chen et al  2006 ; fang and lin 2012  have explored selecting a subset or transform of more distinctive aps for higher localization accuracy and energy efficiency   note that although ap selection schemes indeed can improve the accuracy of wifi fingerprinting-based indoor localization systems  such schemes are less relevant to the theme of harnessing mobility to enhance wireless localization  we thus omit the details and refer interested readers to chen et al   2006  and fang and lin  2012  for more details   since distant locations may share similar fingerprints  they may become indistinguishable  to make matters worse  such ambiguity is intractable as it is scarcely possible to eliminate the uncertainty and instability of signal propagation in the air  given that the multipath effects are inevitable indoors  toward higher accuracy  recent pioneer work exploits physical layer information  sen et al  2012  or incorporate acoustic ranging  liu et al  2012  2013   among others  however  these methods either rely on information unavailable on commodity smartphones  or resort to unrealistic cooperation among a dense crowd of peers  thus degrading the ubiquity or increasing the costs  a promising alternative  is to leverage human mobility information acquired from built-in inertial sensors  table iv lists some recent works on improving wireless localization accuracy leveraging mobility  we demonstrate how they combat fingerprint ambiguity as follows  4.1.1 extending fingerprint diversity  user motions captured by inertial sensors add to the diversity of fingerprints generated from rss observations  specifically  user mobility indicates the physical relationships between pairs of adjacent locations and extends the dimension of constraints for location estimation  which helps to distinguish multiple locations with similar rss fingerprints  applying such thoughts  sun et al   2013  proposed moloc  a system that notably reduces the large errors caused by fingerprint ambiguity  moloc employs an acm computing surveys  vol  47  no  3  article 54  publication date  april 2015  54:16 z yang et al  table iv  recent works on improving aaccuracy by leveraging mobility reported accuracy citation space mean max room sensor type moloc  sun et al  2013a  indoor < 1m 7m n/a c+a acmi  yoon et al  2013  indoor 6m n/a 89 % n/a glocal  wu et al  2013b  outdoor 4m 25m n/a a+g wheelloc  wang et al  2013  outdoor 40m 60m n/a a+m hilsenbeck et al   2014  indoor 1.52m 12m n/a c+a li et al   2012b  indoor 2m 8m n/a c+a+g naguib et al   2013  indoor 1m 5m n/a c+a+g zampella et al   2013  indoor 1m < 5m n/a a+g ubicarse  kumar et al  2014  indoor 39cm < 3m n/a g ccompass ; aaccelerometer ; ggyroscope ; mmagnetometer  mobility info direction/displacement trajectory trajectory distance/turns trajectory trajectory trajectory trajectory orientation accelerometer and digital compass to determine relative location reachability and accordingly construct a motion database  which is then attached to the traditional fingerprint database  when a user sends a location query with his/her current fingerprints  moloc calculates the most similar candidates  according to the joint probability returned by the rss fingerprints together with the motion database  moloc is an early attempt to integrate user mobility into localization and proves promising for practical applications  at the cost of an extra motion database  4.1.2 continuous path matching  trajectories of mobile users can also mitigate fingerprint ambiguity  displacement and/or direction information obtained by dead reckoning impose relative geometrical constraints between consecutive location queries along a trajectory  with these restrictions  fingerprint matching in localization algorithms shifts from point matching to line fitting by embedding the entire trajectory into the radio map  thus contributing to more accurate location estimates  glocal  wu et al  2013b  is an early attempt to embrace trajectories to enhance outdoor gps localization  noting the trajectories maintained by dead reckoning hold precise structures  i.e  trajectory shapes   glocal proposes to align the discretely erroneous gps readings to the accurate locally monitored traces by coordinate transformation between the global and local coordinate systems  the integration of the local yet accurate trajectory with the global but erroneous gps samples significantly decreases the gps biases by 30 % on average  although prototyped for outdoor gps applications  glocal can easily be extended to indoor scenarios  by replacing gps readings with initial fingerprint-matching results  a similar idea is adopted in acmi  yoon et al  2013   which employs fm broadcast signals for localization  acmi performs path matching to improve localization accuracy  which clusters multiple indoor spots along a mobile users trajectory  the key insight is that  even though the rss estimation at each individual location may be ambiguous  the rss changing pattern over a broader area may be unique with a higher probability  to reduce computational complexity of path matching  a walk detector is designed to monitor the topology of indoor spots  which regulates the distance between two successive spots to relate only neighboring spots that satisfy the distance constraints  experimental results demonstrate that localization errors decrease from 10m18m to 6m  along with the room identification accuracy from 59 % to 89 %  a graph-based data fusion technique based on the well-known particle filter is proposed in hilsenbeck et al   2014  to process measurements from multiple sources of sensor information as well as the knowledge of indoor maps  experiments on a dataset that spans about 20km in distance walked within four hours demonstrate excellent accuracy of 1.52m 50 % of the time and 4.53m 90 % of the time  naguib et al   2013  also combined information of wifi signals inertial sensor data and indoor maps to achieve acm computing surveys  vol  47  no  3  article 54  publication date  april 2015 mobility increases localizability 54:17 reliable and accurate location estimation with reported median accuracy of less than 1m  li et al   2012b  devised algorithms for reliable steps and heading direction detection  and accuracy step length estimation and personalization and reports mean accuracy of 1.5m for the phone-in-hand case and 2m for the phone-in-pocket case while integrating these modules with an indoor floor map  the availability of mobility information  even with mere orientation  has enabled accurate wifi-based sar  synthesis aperture radar  on commodity mobile devices  achieving tens of centimeters localization accuracy  kumar et al  2014   besides wifi-based positioning  inertial sensor data is also combined with other radio signals like rfid and uwb  zampella et al  2013   using similar data fusing techniques  in a nutshell  we conclude that embracing inertial sensed mobility information in indoor localization appears to be an irresistible trend and inertial sensing will be an indispensable component in future practical positioning systems for smartphones  despite dramatic accuracy improvement  it is not all chocolates and flowers to leverage user mobility in the form of trajectory matching  the main drawback is that it may incur higher energy consumption as well as longer time delay  which to some extent limits the efficiency in energy-sensitive and real-time applications  4.2 mobility decreases deployment cost a primary bottleneck of fingerprint-based localization is the process of site survey  a.k.a  calibration or war-driving  due to its expensive manpower and time overhead  with the assistance of mobility  this site survey procedure can be liberated from specialists to ordinary users  from dedicated hardware to commodity devices  and most critically  from conscious labor efforts to unconscious user participation  in essence  mobility benefits localization by two aspects of power   1  the potential to associate previously independent fingerprints or locations and  2  the ability to monitor user moving trajectories  the former makes it possible to construct the reachability relationship between fingerprints in the fingerprint space  which can then be mapped to the physical space to obtain the targeted radio map  the latter lays the foundation of progressive radio map construction from localized trajectories  inspired by these new opportunities  many researchers scramble to put forward a number of site-survey-free solutions to decrease the deployment costs of wireless localization  we roughly summarize them into three categories  fingerprint space transformation  trajectory embedding with floor plan  and with landmarks  4.2.1 fingerprint space transformation  in previous literature  wireless fingerprints of different locations were considered independent from each other  such independence serves as an implicit hypothesis for location distinction via fingerprinting  patwari and kasera 2007   although these fingerprints may be independent in the wireless signal space  they can still be associated under certain semantics  early attempts consider the relationship between end locations such as connectivity or reachability between adjacent locations  usually in the form of transition probability matrix and thus typically modeled by the hidden markov model  hmm   liu et al  2010 ; zheng et al  2008   nevertheless  most of them simply assume the availability of the transition matrix  yet seldom provide details on the feasibility or how to acquire the transition probabilities  breakthrough emerges with the availability of smartphone-based inertial sensing  where various human mobility information  including step counts  orientation  trajectory  etc  can now be obtained in an automatic  harmonious way without extra hardware deployment or even user attention  lifs  yang et al  2012  pioneers constructing a connected fingerprint space using inertial sensor hints  which is further transformed to the physical floor plan to bridge the fingerprints with the corresponding acm computing surveys  vol  47  no  3  article 54  publication date  april 2015  54:18 z yang et al  fig  5 fingerprint and physical space generated by lifs  regarding the high-dimension fingerprint space  the walking distances among fingerprints  measured by footsteps  are preserved  yang et al  2012   locations  will  wu et al  2013a  adopts a similar idea  yet at the resolution of room level fingerprints  since will can be treated as a special case of lifs  we briefly discuss the principles of lifs in the following  to construct the fingerprint space  lifs automatically collects continuous acceleration readings and the accompanying rss observations  from ordinary smartphone users during their routine work and living in the buildings  footsteps are then detected and counted as in section 3.1.1 and used as the interfingerprints distance measurements  feeding the interfingerprint distances to the mmultidimensional scaling  mds  algorithm  a high-dimension space named fingerprint space  yang et al  2012  is generated  where the mutual distances between points  which represent fingerprints  are preserved  figure 5   the fingerprint space is then mapped to the floor plan to associate the fingerprints with their corresponding locations  the mapping is achieved by exploring the spatial similarity between the fingerprint space and a transformed floor plan  called stress-free floor plan  yang et al  2012   the stress-free floor plan is a space that transforms a normal floor plan into a high-dimension space by mds  such that the geometrical distances between the points in the new space reflect their walking distances instead of the straight distances  the rationale behind such transformation is that  due to the presence of obstacles such as walls  the walking distance between two locations does not necessarily equal the geographical distance between them  both indicating the walking distance constraints of the same building  the stress-free floor plan and fingerprint space are highly similar in spatial topology  which finally enables fingerprints labeled with real locations  two key insights motivate the design of lifs   1  with user mobility  originally separated fingerprints can be geographically connected by mobile trajectories  resulting in the so-called fingerprint space   2  although the data of any individual user may be inappreciable  fusing a large amount of sensor hints from numerous participators can make a big difference  focusing on fingerprint database construction  lifs achieves remarkable performance with the 95th percentile mapping error being lower than 4m and the average error of 1.33m  the radio map generated by lifs is sufficient for use in numerous fingerprint-based localization schemes  including classical ones like radar  bahl and padmanabhan 2000  and horus  youssef and agrawala 2005  and more recent ones like liu et al   2012   among all approaches we surveyed that aim to reduce deployment cost  lifs is probably the most backward compatible to classical rss fingerprint-based localization systems and thus can be easily integrated and serve for many existing and emerging localization techniques  acm computing surveys  vol  47  no  3  article 54  publication date  april 2015 mobility increases localizability 54:19 4.2.2 trajectory embedding with floor plan  considering indoor space  as a user continues to walk and navigate through hallways and and turning around corners  his/her trajectory grows distinguished especially in shape and thus the similarities for his/her trajectory shrink progressively  some researchers exploit this insight and propose novel techniques for constructing a fingerprint database and estimating user location  among these efforts  zee  rai et al  2012  is a most representative system  which simultaneously estimates user locomotion and location  zee enables crowdsourced radio map construction by inferring a users location from his moving trajectory  without any prior about his initial location  zee estimates a users current location as follows  it initializes the users location as a uniformly distributed probability over all locations within the entire floor  accounting for the structure imposed by the floor plan  zee continuously updates the probability distribution when the user moves on by eliminating all impossible paths that would require the user to violate the physical walls or other obstacles  if the user walks for sufficient length and  particularly  takes enough turns  the location probability is promising to converge to the correct location since there may be probably only one path that can be accommodated to the shape of the trajectory measured from user motion  this procedure is similar to embed a trajectory with specific shape into a 2d floor plan considering the physical constraints imposed by the floor plan  to do this  an augmented particle filter is proposed to track the probability distribution of a user location during his walk  in particular  to simultaneously estimate location  stride length  and heading offset  zee maintains a four-dimensional joint probability distribution function in a particle filter  and learns all these values as the user walks  note that only mobility information is employed but no wifi measurements are required during this trajectory embedding process  to eventually generate a fingerprint database  however  zee still expects users to record wifi measurements during their moving paths  which will then be annotated with the locations estimated from trajectory embedding  fusing abundant localized walking trajectories from numerous users  zee is finally capable of building a radio map for wifi fingerprint-based localization  4.2.3 trajectory pinning with landmarks  given that inertial sensors can capture and maintain user trajectories in an automatic and noninvasive way  it is possible to infer user location using only these trajectories as inputs  as long as an initial start point is known  the idea  typically known as dead reckoning  is not fundamentally different from ancient transportation and modern robotic navigation systems  however  it is nontrivial to implement this idea for mobile applications due to error drifts caused by noisy phone sensors and complicated human behaviors  in consequence  in addition to notable efforts in reckoning user trajectories as accurately as possible  as in section 3   researchers also strive to take advantage of reference landmarks both in outdoor and indoor environments  compacc  constandache et al  2010b  is an early exploration of infrastructureindependent localization for outdoor scenarios  it leverages an electronic compass and accelerometer to measure the walking displacement and orientation of a mobile user  based on which a trajectory is produced and further matched against walkable path segments imposed by a digital map tile  note a trajectory is a directional trail while the digital map tile is a local area map downloaded based on the rough location of the phone  with infrequent gps samples  the phone can recalibrate its location and uses it as a reference for subsequent estimations  by doing this  the accumulative errors arising from the inaccurate sensor readings can be successively resisted  translating a similar idea into indoor services encounters remarkable difficulties because of the unavailability of gps  and researchers have investigated indoor context acm computing surveys  vol  47  no  3  article 54  publication date  april 2015  54:20 z yang et al  fig  6 trajectories are utilized in different ways  landmarks as a substitution  these context landmarks vary from dedicated installed reference anchors  to automatically discovered spots  i.e  spots with certain distinctive signatures   as a seminal endeavor  unloc  wang et al  2012  comprehensively explores and exploits environment landmarks for location estimation  in unloc  inertial sensing of human behavior and ambient sensing of environment contexts are simultaneously conducted to discover underlying landmarks  which are further utilized as reference points  analogous to gps samples in outdoor scenarios  to recalibrate the dead-reckoned locations  unloc looks into a floor plan and identifies seed landmarks from essential structures in the building  the rationale is that users will be forced to behave in predictable ways at certain places such as elevators  stairs  building entrances  and escalators  for instance  building entrances are characterized by a visible drop in the gps confidence when the user moves from outdoors to indoors ; elevators exhibit a distinct accelerometer signature  emerging from the start and stop of the elevator  translating these predictable behaviors into sensor signatures  unloc manages to identify intrinsic landmarks from smartphone sensor readings  since the landmarks are spots with known locations in the floor plan  they can be used to calibrate a users location when he passes through one landmark  on this basis  unloc can localize a user at any time by incorporating the established dead reckoning on smartphones  without building a fingerprint database or injecting extra reference anchors  in addition to seed landmarks  unloc also explores more organic yet unknown landmarks by ambient sensing  these landmarks are postulated to be spots that exhibit distinct ambient signatures across one or more sensing dimensions  which can be magnetism  acceleration  or wifi domain  taking magnetic hints as an example  metals in a specific location may produce unique and reproducible fluctuations on the magnetometer near that location  rendering a possible landmark  since accurate locations of such landmarks can not be known a priori  unloc employs unsupervised clustering algorithms to identify individual landmarks from a large amount of sensor data gathered from all phone users  given a set of seed landmarks available  the incrementally recognized landmarks can then be associated with relative locations via dead reckoning  which in turn will benefit dead reckoning itself  by providing denser reference points for calibration   in summary  inertial sensing and ambient sensing hold complementary advantages  the precise trajectory structure preserved by inertial sensing lays the important foundations to connect individual landmarks  while it is the accurate location references from landmarks recognized by ambient sensing that put relative trajectories into a floor plan  although both explore user trajectories  zee and unloc exploits them in quite different ways  as illustrated in figure 6 finally  we present an overall comparison of lifs  zee  and unloc in terms of localization accuracy  deployment cost  bootstrap latency  the extent of user participation  and the dependence of floor plan and sensors in figure 7 acm computing surveys  vol  47  no  3  article 54  publication date  april 2015 accuracy a cc accuracy a cc cur accuracy a cc cura r floor plan n floor plan or p lan n 54:21 floor plan n mobility increases localizability fig  7 comparison of recent systems that decrease the deployment costs of wifi-based localization  4.3 mobility enriches location contexts location  although generally appearing in the form of numerical coordinates  should never be monotonous digits  luxuriant contexts are always accompanied with physical locations  such as location labels  region functionality  surrounding circumstances  social information  etc  in brief  location  as the most essential element of our physical space  is abundant in its denotation yet rather simple in its basic connotation  among various location context information  floor plan is the most essential one that provides users with a clear and useful view of the indoor space  as for all the localization approaches mentioned previously  floor plan is either a necessary input or a basic requirement for providing positioning services  unfortunately  it is never easy to acquire the rich accompanying contexts of locations  even powerful companies such as google also have to incur hefty costs of manpower  financial resources  and time to obtainhowever  rather limitedlocation contexts in the indoor map service project  requirements of specialized engineers and dedicated equipment  and the massive amount of buildings  increase both the difficulties and expenses of generating semantically meaningful indoor maps  inertial sensor hints  which act as an efficient interface to obtain user mobility through smartphones  make it possible to construct an indoor floor plan automatically and dynamically  a floor plan is a graph that provides the region layout and space partition of a building  in other words  a floor plan is one way of presenting the indoor space connections and obstructions  hence  human mobility  which is constrained to the indoor space reachability  can in turn reveal the structure of building layouts and thus it is possible to sketch the floor plan  generally  the task of portraying a floor plan is twofold   1  space regionalization  partition the entire space into pieces of areas  which are usually separated by walls or other obstacles   2  functionality recognition  label each partitioned area with a specific category of indoor space function  such as rooms  halls  stairs  corridors  etc  4.3.1 space regionalization  to partition the entire space  trajectories collected from different users are fused and joined together to form the basic topology of the floor plan  one trajectory is spliced with another by exploring the common landmarks they have both passed through  for instance  if two trajectories both start from the same building entrance  they can be joined at the start point  figure 8 illustrates an example of the incremental generation of the floor plan skeleton  where trajectories are gradually added and fitted  when embracing sufficient trajectories that cover the entire space  a drafted floor plan shows up  walkie-markie  shen et al  2013  is a recent  successful system that implements the idea to produce a hallway map  without a floor plan available a priori  walkie-markie could not search the seed landmarks for location estimation even at the very initial acm computing surveys  vol  47  no  3  article 54  publication date  april 2015  54:22 z yang et al  fig  8 a trace map evolves as traces are merged into it  circles represent extracted reference points  which correspond to rooms in reality   and stars represent user trajectories  stage  instead  walkie-markie explores the novel wifi-marks as landmarks for location reference and calibration  wifi-marks are defined as locations where the rss trend of a certain ap changes  which prove to be excellent landmarks due to their stability and robustness  in addition to using the wifi-defined landmarks to constrain drifting in dead reckoning  walkie-markie further exploits them to align and join different user trajectories  and eventually produces a hallway map  while the hallway map can be treated as the side product of walkie-markie  crowdinside  alzantot and youssef 2012  and jiang et al   2013  completely target at indoor floor plan generation  in crowdinside  the procedure is detailed as follows   1  trajectory segmentation  segments are straight parts of the trajectory that are separated by either turns or pauses  which are supposed to be inside the same area  room/corridor    2  segment classification  the module is performed to distinguish segments in the corridors from those inside rooms  a decision tree-based classifier  using average time spent per step  segment length  and trace density as inputs  is carried out for classification   3  segment clustering  a density-based clustering algorithm  dbscan  is put on all segments that are classified as rooms to find the number  boundaries  and center locations of the unknown rooms   4  shaping  finally  to estimate the shapes of a room  or the corridors   the shape is calculated based on the corresponding point set  that is  points that are associated with the room  similarly  in jiang et al   2013   an automatic floor plan construction system based on room wifi fingerprints and user motion information  the floor plan is constructed via three steps   1  room adjacency graph construction to identify the adjacency of rooms and construct a room adjacency graph ;  2  hallway layout learning to estimate room sizes and order rooms along each hallway  using crowd-based motion sensing acm computing surveys  vol  47  no  3  article 54  publication date  april 2015 mobility increases localizability 54:23 fig  9 distinctive accelerometer signature of using the elevator  on smartphones  and  3  force directed dilation to adjust room sizes and optimize the overall floor plan accuracy  4.3.2 functionality recognition  once the space is partitioned and identified as individual regions  that is  rooms  halls  or corridors  a higher level of semantic can be attached to each region to extend the contexts of the generated floor plan  these semantics include region functionality and room types  shop brands in a mall or room doorplate information  user counts in a specific room  social events  etc  particularly  user mobility is closely related to region functionality and room types since user and crowd behaviors are constrained by specific patterns at certain regions  which is also the underpinning insight for the feasibility of mining global landmarks for localization as what unloc has done  considering modern office buildings  four types of functional areas are involved  rooms  user behaviors in office rooms also exhibit particular patterns  users in rooms stay stationary most of the time  even when users move inside the room  their trajectories are inclined to be short and contain more turns  moreover  detecting colocation of people can also further differentiate semantic functions  such as meeting room  classroom  or normal office room  corridors  despite a few users may stop for a while in corridors  most of the users are always walking  consequently  users do not spend a long time in the corridor  in addition  user trajectories generated in the corridor are dense  mostly straight and long  and with fewer turns  elevators  elevators are distinctive landmarks in a building because radio frequency  rf  signals are blocked and the acceleration patterns are unique in the elevators  the acceleration variance sequence of elevator-taking is defined as follows  a normal walking period  a short dwell time for waiting  walking into the elevator  a weight-loss  or overweight  period  standing statically inside  followed by another overweight  or weight-loss   and walking out of the elevator  figure 9 shows examples of such elevator motion traces  stairs  at first sight  it is difficult to differentiate between stairs and corridors  nevertheless  acceleration patterns provide clues to tell the two apart  for stairs  the variance of acceleration is much larger  which usually varies from 4m/s2 to 10m/s2 as observed from real user traces  as can be seen  unloc and crowdinside both explore these basic properties of different functional regions in terms of mobility to identify certain spots for landmarks  or anchors in crowdinside   crowdinside further exploits the mobile trajectories to differentiate between rooms and corridors  regarding those higher level location contexts  extensive sensing information  beyond mobility  must be incorporated and advanced acm computing surveys  vol  47  no  3  article 54  publication date  april 2015  54:24 z yang et al  pattern recognition or machine learning techniques should be employed  in brief  we review and envision the solutions to perceive rich contexts for locations  incorporate ambient sensing with various types of sensors built on the phone  including inertial sensors as well as other ones like camera and microphone  to investigate richer sensing hints  which can be used to fingerprint some locations  surroundsense combines such ambient sensing scheme together with inertial sensing to fingerprint logical locations across multiple dimensions and achieves an average accuracy of 87 % when all sensing modalities are employed  map service products such as google maps and baidu maps have employed high-resolution cameras to scan and construct live indoor station view  which is analogous to the street view for outdoor maps and thus creates expensive costs  integration with social networks and user visiting patterns  with growing interests in location-based social networks such as foursquare  facebook places  whrrl  and location-based mobile games like google ingress  users who explore places  write reviews  and share their locations would generate plenty of semantic labels  fusing and mining these user-generated location tags  it is possible to annotate indoor locations with rich contexts automatically and precisely  chon et al  2012 ; lian and xie 2011 ; ye et al  2011   location contexts are as significant as the location itself  by making location coordinates meaningful  understandable  and eventually attractive as places with distinctive semantics  visual views  specific people  and/or events of interests  etc  while user mobility sheds light on extending the location contexts with low costs in an automatic way  it  as an open issue  still requires adequate research attention and explorations  5 how to handle measurement errors in the context of smartphone-based indoor localization with inertial sensors  diverse user-phone states constitute the main obstacles that prevent accurate measurement estimates  for example  unconstrained smartphone placements on users may lower step detection accuracy with a generic detection model  while stride length deviations among users make displacement estimation challenging  therefore  we review existing works that strive to alleviate these measurement errors from two aspects in this section  generate estimates by user modeling and statistics ; and combine constraints from external sources  5.1 internal introspection as discussed in section 3  basic measurements include step detection  stride length estimation  and heading estimation  pioneer works have been conducted on making step detection and stride length estimation more robust for users  yet few works have considered the influence of user models for heading estimation  therefore  we focus on methods of handling measurement errors in detecting steps and estimating stride length  furthermore  as a high level of measurement  user trajectories possess the potential to alleviate errors and will be discussed  step detection  most step detection methods can achieve high accuracy of measurements by analyzing temporal or spectral features of sensor data  section 3.1.1   these methods are suitable for fixed sensor placement  e.g  waist-mounted and footmounted   however  the interaction between users and smartphones are more complex  measurement error source points to the diverse smartphone placements as signal patterns change with placements  the study conducted in brajdic and harle  2013  compared various step detection algorithms for different smartphone placements and showed that weakness exists for each method  a direction of handling such errors is to model each placement and apply the detection method accordingly  the placements acm computing surveys  vol  47  no  3  article 54  publication date  april 2015 mobility increases localizability 54:25 can be categorized according to the usual manners of users  ayub et al  2012 ; susi et al  2013 ; renaudin et al  2012   static  the users location does not change during the detection phase  for example  the user may step in the spot when answering the phone  quasistable  the user is walking  while the phone is relatively fixed to the user  for instance  the user may be texting  playing phone games  or the phone is placed in the trousers  swinging  the user holds her phone in the normally swinging hand while walking  irregular  all irregular motions not belonging to the previous cases  for instance  the user is searching in her handbag for the phone  with the placement modes defined  a simple pattern recognition scheme  ayub et al  2012  or machine learning method  susi et al  2013  can be adopted to detect placements automatically  thereafter  suitable step detection schemes can be selected for specific placement modes  stride length estimation  the difficulty of stride length estimation originates from the diversity of users  such as gender  height  walking speed  etc   different models have been proposed to depict important factors to estimate stride length  a gaussian model is adopted in constandache et al   2010a   where the mean of the stride length needs to be measured by users manually  and the deviation of the length is set empirically  the stride length  s  and frequency  f  with body fixed sensors are shown to be linearly related  margaria and margaria 1976   which enables a linear model for stride length estimation  cho et al  2010   s = a f + b  where a and b are user-dependent parameters  a more complex model adds a random walk parameter w to estimate step length  s = a f + b + w  where w describes the step length asymmetry of both legs  ladetto 2000  and is modeled using a gaussian distribution with deviation proportional to the step frequency  gusenbauer et al  2010   biomechanical studies show that the users step length and height are directly proportional in general  rose and gamble 2006   therefore  a linear model explicitly incorporating users step frequency f and height h is proposed  s = h  a f + b  + c  where a  b  and c are parameters  renaudin et al  2012   these models all depend on user calibration and thus are more accurate than general estimation methods  though the calibration phase may be of high cost  while phone placement modes have been shown to influence step detection accuracy  how they impact stride length estimation needs further investigation  ayub et al  2012   trajectory estimation  user trajectories constitute high level abstraction of sensor readings and user mobilities  by collecting and merging multiple user trajectories  it is possible to reveal the spatial characteristics of indoor environment and hence facilitate localization  yang et al  2012 ; rai et al  2012   navigation  purohit et al  2013   and floor plan construction  shen et al  2013 ; jiang et al  2013   different from the outdoor trajectories  which are mostly gps and time stamp series  indoor user trajectories are more challenging due to the complex user-phone interaction and diverse sensor readings  therefore  outdoor trajectory estimation and error control methods  zheng and zhou 2011  can not be directly adopted  the redundancy of user trajectories brings a new opportunity of measurement error control  note that error control discussed previously mainly resort to finer user modeling  however  sensor malfunctioning and abnormal user behavior renders these methods invalid  numerous user trajectories enable statistical models  especially robust statistical tools  to filter out abnormal data that may jeopardize the trajectory merging results  zhang et al  2014   specifically  given a physical route  each user walking along the route may collect a trajectory  the goal is to estimate the distance between two sample locations along acm computing surveys  vol  47  no  3  article 54  publication date  april 2015  54:26 z yang et al  table v typical landmarks as mobility references for error control citation constandache et al   2010a  wang et al   2012  shen et al   2013  li et al   2012a  alzantot and youssef  2012  landmark beacon node deployed manually elevator  escalator  stair pathway tipping point beacon node deployed manually entrance  elevator  escalator  stair constandache et al   2010a  encountered user wang et al   2012  organic landmark type primary primary primary primary primary signature audio tone accelerometer pattern rss trend tdoa of radio and audio signal gps signal  inertial sensor pattern secondary audio tone secondary sensor feature cluster the route  a common method is to use the step counts of a user  which is transformed from the accelerometer readings of a smartphone  to reflect the distance  yet different users have different strides  and users may collect outlier data due to multiple reasons  e.g  a user may cheat the smartphone sensor by abnormal movement   therefore  it is necessary to make use of the redundancy of user data to obtain an accurate estimate  a family of robust statistical estimators are effective in alleviating the influence of outlier data when acquiring an estimate between sample points  furthermore  a multidimensional estimator  termed minimum covariance determinant  is adopted in zhang et al   2014  to estimate the distances among sample points along a physical route  interestingly  a unique id is associated with each user  which is revealed to be normal or abnormal by the estimation result  the abnormal users hence can be excluded when estimating trajectories in other routes  this is very essential in the area where few users step into  as even robust statistical tools may fail in this scenario for example  if a route has received three trajectories  among which two trajectories are abnormal and one is normal  it is obvious that no statistical estimator can make an accurate estimation  however  if we have the id of these three users and have tracked their performance in other areas where user redundancy exists  we can still obtain a satisfiable estimate by eliminating the two outlier users  robust statistical methods are promising as more and more mobile trajectory-based applications are based on crowdsourcing  wang et al  2012 ; yang et al  2012 ; shen et al  2013   yet in large open environments where user movements are difficult to characterize  it is still hard to obtain accurate estimates  further efforts are needed to resolve this issue  5.2 external facilitation other than handling errors by solely inspecting the sensor data  the measurements can be further improved by user mobility references  that is  landmarks and floor plans  5.2.1 landmarks  the landmarks can be detected from the unique patterns reflected through smartphone sensor readings  for example  an elevator imposes a distinct pattern on the smartphones accelerometer ; while a corridor-corner may only receive a unique set of wifi access points  wang et al  2012   these landmarks  or more accurately  unique signal patterns of landmarks  exist in various places of a typical indoor environment  making them valuable to assist rectifying a smartphone users positions under motion  the rationale of using landmarks lies in that  the locations of these landmarks serve as restarting locations for pedestrians  hence dividing a users long trajectories into multiple short trajectories and significantly reducing the accumulative measurement errors from inertial sensors  li et al  2012a ; alzantot and youssef 2012 ; shen et al  2013   table v gives a brief summarization of these landmarks  as the landmarks themselves are reflected from received patterns of sensors  they are possibly erroneous  however  the uniqueness and large distances from other acm computing surveys  vol  47  no  3  article 54  publication date  april 2015 mobility increases localizability 54:27 table vi  types of particle filter designs for smartphone-based pedestrian localization citation thiagarajan et al   2011  rai et al   2012  sensor a+g+w particle model  position  direction  feature incorporate initial position and wifi information in particles a+c+g  position  stride length  incorporate stride length heading offset  estimation in particles li et al   2012b  a+c+g  position  step length incorporate personalized step coefficients  model in particles impose constraints of robot map kothari et al   2012  a+c+g+w  position  direction  and wifi fingerprint kim et al   2012  a+c+w  position  assist wifi fingerprinting radu and marina a+c  activity  distance  combine location tracking  2013  direction  and activity recognition ccompass ; aaccelerometer ; ggyroscope ; wwifi  accuracy 3ft 80 % ile 2.3m 1.52m 5m < 2.4m 23m nonlandmark patterns make landmarks more robust and accurate than simply using inertial sensor readings  in fact  recent studies even adopted secondary landmarks  which are summarized directly from user trajectories  to help recalibrate other users locations  in constandache et al   2010a   beacon nodes deployed in the environment play the role of primary landmarks and reset users positions within the range  and these users with fresh restarting positions in turn  being secondary landmarks  correct locations of other encountered users  in wang et al   2012   primary landmarks are certain recognizable structures in the building  e.g  stairs  elevators  entrances  escalators   where sensor signatures are stored in advance ; while ambient signatures across one or many sensing dimensions  which constitute secondary landmarks  e.g  a spot not covered by wifi  a water fountain   are learned dynamically by clustering more and more users sensing data  5.2.2 floor plans  similar to the idea of applying electronic maps to rectify users positions in outdoor localization schemes  constandache et al  2010b ; zhu et al  2013   integrating the constraints of floor plans alleviates the inertial sensor errors in indoor localization  there are roughly two means to use a floor plan  geometry mapping  mapping user trajectories to floor plans is effective in weakening sensor drift errors  the rationale is that  though user trajectories may be distorted due to sensor drift  their overall geometric shape should be similar to that of the floor plan  different geometric abstraction models can be adopted for mapping  for example  a link-node model is applied in lan and shih  2013   while a stress-free floor plan is proposed in yang et al   2012   position filtering  the other way of using a floor plan is to exclude unlikely positions for walking users  such as obstacles and walls  a commonly used technique is particle filter  which has been successfully applied in locating mobile robots  fox et al  2001  and pedestrian tracking with foot-mounted sensors  klepal et al  2008 ; woodman and harle 2008   table vi summarizes particle filters used in pedestrian localization with smartphones  particle filtering is a nonparametric form of bayesian estimation  which consists of many particles  in the context of user localization  a typical particle may represent the users possible physical position and heading  positions and heading values possess different likelihood  hence a weight value is assigned to each particle  which reflects the probability of the particle being correct according to the accumulated information  generally  there are three steps to run an iteration of particle filtering  acm computing surveys  vol  47  no  3  article 54  publication date  april 2015  54:28 z yang et al  particle propagation  particles update their values according to certain motion models  for example  a constant velocity with a gaussian noise can be used to update the position of a particle  particle correction  particles update their weights according to their fitness to the environment  for example  if a particle crosses a wall during propagation  the weight of that particle should be set to 0 particle resampling  a new particle set is generated in proportion to the weights of particles in the current set  the particle correction step is of great concern in the literature  as external constraints can be added in this step to eliminate inappropriate particles  the basic constraint is the floor plan  which defines the accessible area for particles  another common constraint is wifi fingerprint  which is helpful for differentiating similar particle trajectories  thiagarajan 2011 ; kothari et al  2012   a recent study attempted to replace the requirement for a detailed knowledge of floor plan by using distances to known reference points  corner  stairs  elevators  and wifi estimation  to restrain particles  radu and marina 2013   the influences of particle propagation are twofold  first  the choice of motion models  e.g  direction error distribution and stride length distribution  is important to ensure particle survival rate  specifically  as the number of particles that can be simulated is finite due to computational constraints  if all particles end up violating a floor plan constraint  the filter may end up producing no output at all  toward this issue  mixture models  thiagarajan 2011   other than simple gaussian models  kothari et al  2012 ; radu and marina 2013   are investigated and shown to have a better survival rate  secondly  as users have different stride lengths  using a generic model  e.g  gaussian model  is inappropriate  in fact  the stride lengths vary even for the same user from time to time  a direct approach for this problem is to incorporate the stride length  or the parameters of a personalized step model  as a component of a particle  rai et al  2012 ; li et al  2012b   6 conclusions in this survey  we reviewed the principles of measuring human mobility via smartphones  and the emerging trend in mobility assisted wireless indoor localization  back to decades ago  such mobility information was accessible only in the military or robotics communities leveraging dedicated sensors  modern smartphones have reshaped the landscape of human-centric computing and we have identified numerous types of mobility information derivable via built-in sensors  we demonstrated how to incorporate mobility to improve localization accuracy  decrease deployment cost  and enrich location context  due to noisy sensor data  unconstrained phone placement  and complicated human activities  we also discussed prevalent error control mechanisms for mobility measurement and localization  despite pioneer efforts in mobility measurements and mobility assisted wireless localization  the realm is still in its infancy and continues to develop from diverse perspectives  orthogonal to inertial sensors  wireless signals can also hint mobility  seminal work exploited the ubiquitous wifi signals to recognize gestures via micro-doppler effects  pu et al  2013  and estimate walking speed by phy layer information  jiang et al  2014   future research is envisioned to incorporate inertial sensors and wireless modules on smartphones synergically to derive mobility information pervasively and nonintrusively  previous smartphone-based inertial sensing often abstracts pedestrian mobility as steps  and ignores that the human body is nonrigid  a notable shift nowadays is to acm computing surveys  vol  47  no  3  article 54  publication date  april 2015 mobility increases localizability 54:29 model detailed locomotion properties based on human kinematics  however  most of these models are valid only with particular sensor placement  e.g  foot-mounted   it remains open how to refine them for unconstrained phone placement to capture precise mobility information and reduce modeling errors  another development trend is the finer-grained mobility measurement by smart wearable devices  such as wristbands  watches  necklaces  glasses  and so forth  pioneer products like samsungs galaxy gear and google glass have attracted numerous enthusiasts all over the world  interworking with smartphones  these smart wearables  attached firmly to the human body  are holding great expectations of highly accurate mobility sensing  finally  mobility increases more than localizability  the paradigm of localization has evolved from yielding accurate location coordinates to mining diverse location context  with mobile users round-the-clock  discrete surrounding information such as ambient lights  sounds  temperature  air conditions  etc  is now connected via human activities  social behaviors  and even moods  this in turn extends the connotation of location context  and brings deeper insight on individuals  societies  and nature  upon this promising frontier though  reside significant challenges in integrating complementary sensing modalities and advancing spatial-temporal analysis with noisy  crowdsourced data  and these leave largely open and attractive research opportunities  acknowledgments the authors would like to thank the anonymous reviewers for their valuable comments  references gregory d abowd  maria ebling  g hung  hui lei  and hans-werner gellersen  2002 context-aware computing  ieee pervasive comput  1  3  2002   2223 m h afzal  v renaudin  and g lachapelle  2001 assessment of indoor magnetic field anomalies using multiple magnetometers  in proceedings of ion international technical meeting of the satellite division of the institute of navigation  gnss   moustafa alzantot and moustafa youssef  2012 crowdinside  automatic construction of indoor floorplans  in proceedings of acm international conference on advances in geographic information systems  gis   m angermann and p robertson  2012 footslam  pedestrian simultaneous localization and mapping without exteroceptive sensors hitchhiking on human perception and cognition  proc  ieee 100  special centennial issue  2012   18401848 shahid ayub  xiaowei zhou  soroush honary  alireza bahraminasab  and bahram honary  2012 indoor pedestrian displacement estimation using smart phone inertial sensors  int  j innovative comput  appl  4  1  2012   3542 martin azizyan  ionut constandache  and romit roy choudhury  2009 surroundsense  mobile phone localization via ambience fingerprinting  in proceedings of acm international conference on mobile computing and networking  mobicom   p bahl and v n padmanabhan  2000 radar  an in-building rf-based user location and tracking system  in proceedings of ieee international conference on computer communications  infocom   ling bao and stephen s intille  2004 activity recognition from user-annotated acceleration data  in pervasive computing  lecture notes in computer science  vol  3001 springer  berlin  117 p barralon  n vuillerme  and n noury  2006 walk detection with a kinematic sensor  frequency and wavelet comparison  in proceedings of ieee international conference of engineering in medicine and biology society  embs   john e a bertram and andy ruina  2001 multiple walking speedfrequency relations are predicted by constrained optimization  elsevier j theor  biol  209  4  2001   445453 agata brajdic and robert harle  2013 walk detection and step counting on unconstrained smartphones  in proceedings of acm international conference on ubiquitous computing  ubicomp   yiqiang chen  qiang yang  jie yin  and xiaoyong chai  2006 power-efficient access-point selection for indoor location estimation  ieee trans  knowl  data eng  18  7  jul 2006   877888 acm computing surveys  vol  47  no  3  article 54  publication date  april 2015  54:30 z yang et al  krishna chintalapudi  anand padmanabha iyer  and venkata n padmanabhan  2010 indoor localization without the pain  in proceedings of acm international conference on mobile computing and networking  mobicom   dae-ki cho  min mun  uichin lee  w j kaiser  and m gerla  2010 autogait  a mobile platform that accurately estimates the distance walked  in proceedings of ieee international conference on pervasive computing and communications  percom   yohan chon  nicholas d lane  fan li  hojung cha  and feng zhao  2012 automatically characterizing places with opportunistic crowdsensing using smartphones  in proceedings of acm international conference on ubiquitous computing  ubicomp   ionut constandache  xuan bao  martin azizyan  and romit roy choudhury  2010a  did you see bob ?  human localization using mobile phones  in proceedings of acm international conference on mobile computing and networking  mobicom   i constandache  r r choudhury  and i rhee  2010b  towards mobile phone localization without wardriving  in proceedings of ieee international conference on computer communications  infocom   richard dixon  2012  2012 a breakthrough year for motion combo sensors in consumer and mobile applications  ihs isuppli microelectromechanical systems  mems  market brief  2012   shih-hau fang and tsung-nan lin  2012 principal component localization in indoor wlan environments  ieee trans  mobile comput  11  1  jan 2012   100110 ngewi fet  marcus handte  and pedro jose marron  2013 a model for wlan signal attenuation of the human body  in proceedings of acm ubicomp  499508 dieter fox  sebastian thrun  wolfram burgard  and frank dellaert  2001 particle filters for mobile robot localization  in sequential monte carlo methods in practice  springer  401428 p goyal  v j ribeiro  h saran  and a kumar  2011 strap-down pedestrian dead-reckoning system  in proceedings of international conference on indoor positioning and indoor navigation  ipin   dominik gusenbauer  carsten isert  and j krosche  2010 self-contained indoor positioning on off-the-shelf mobile devices  in proceedings of international conference on indoor positioning and indoor navigation  ipin   r harle  2013 a survey of indoor inertial positioning systems for pedestrians  ieee commun  surv  tutorials 15  3  2013   12811293 samuli hemminki  petteri nurmi  and sasu tarkoma  2013 accelerometer-based transportation mode detection on smartphones  in proceedings of acm conference on embedded networked sensor systems  sensys   sebastian hilsenbeck  dmytro bobkov  georg schroth  robert huitl  and eckehard steinbach  2014 graphbased data fusion of pedometer and wifi measurements for mobile indoor positioning  in proceedings of acm international conference on ubiquitous computing  ubicomp   jian hua wang  jian-jiun ding  yu chen  and hsin-hui chen  2012 real time accelerometer-based gait recognition using adaptive windowed wavelet transforms  in proceedings of ieee asia pacific conference on circuits and systems  apccas   invensense  2013 mpu-6500 six-axis  gyro + accelerometer  mems motiontracking devices for smart phones  tablets  wearable sensors  remotes  pedestrian navigation  and sports & fitness tracking  retrieved from http  //www.invensense.com/mems/gyro/mpu6500.html  toshiki iso and kenichi yamazaki  2006 gait analyzer based on a cell phone with a single three-axis accelerometer  in proceedings of acm conference on human-computer interaction with mobile devices and services  mobilehci   yifei jiang  yun xiang  xin pan  kun li  qin lv  robert p dick  li shang  and michael hannigan  2013a  hallway based automatic indoor floorplan construction using room fingerprints  in proceedings of acm international conference on ubiquitous computing  ubicomp   zhiping jiang  wei xi  xiang-yang li  shaojie tang  jizhong zhao  jin-song han  kun zhao  zhi wang  and bo xiao  2014 communicating is crowdsourcing  wi-fi indoor localization with csi-based speed estimation  journal of computer science and technology 29  4  2014   589604 a r jimenez  f seco  c prieto  and j guevara  2009 a comparison of pedestrian dead-reckoning algorithms using a low-cost mems imu  in proceedings of ieee international symposium on intelligent signal processing  wisp   junghyun jun  yu gu  long cheng  banghui lu  jun sun  ting zhu  and jianwei niu  2013 social-loc  improving indoor localization with social sensing  in proceedings of acm conference on embedded networked sensor systems  sensys   donnie h kim  jeffrey hightower  ramesh govindan  and deborah estrin  2009 discovering semantically meaningful places from pervasive rf-beacons  in proceedings of acm international conference on ubiquitous computing  ubicomp   acm computing surveys  vol  47  no  3  article 54  publication date  april 2015 mobility increases localizability 54:31 yungeun kim  hyojeong shin  and hojung cha  2012 smartphone-based wi-fi pedestrian-tracking system tolerating the rss variance problem  in proceedings of ieee conference on pervasive computing and communications  percom   m klepal  stephane beauregard  and others  2008 a backtracking particle filter for fusing building plans with pdr displacement estimates  in proceedings of ieee workshops on positioning  navigation and communication  wpnc   t kobayashi  k hasida  and n otsu  2011 rotation invariant feature extraction from 3-d acceleration signals  in proceedings of ieee international conference on acoustics speech and signal processing  icassp   nisarg kothari  balajee kannan  evan d glasgwow  and m bernardine dias  2012 robust indoor localization on a commercial smart phone  procedia comput  sci  10  2012   11141120 swarun kumar  stephanie gil  dina katabi  and daniela rus  2014 accurate indoor localization with zero start-up cost  in proceedings of acm annual international conference on mobile computing and networking  mobicom   quentin ladetto  2000 on foot navigation  continuous step calibration using both complementary recursive prediction and adaptive kalman filtering  in proceedings of ion gps  kun-chan lan and wen-yuah shih  2013 using floor plan to calibrate sensor drift error for indoor localization  in proceedings of the joint ercim emobility and mobisense workshop  ercim   fan li  chunshui zhao  guanzhong ding  jian gong  chenxing liu  and feng zhao  2012b  a reliable and accurate indoor localization method using phone inertial sensors  in proceedings of acm international conference on ubiquitous computing  ubicomp   mingmei li  kazuyuki tasaka  and kiyohito yoshihara  2012a  an integrated location method using reference landmarks for dead reckoning system  in proceedings of international conference on networks  icn   defu lian and xing xie  2011 learning location naming from user check-in histories  in proceedings of acm international conference on advances in geographic information systems  gis   h lim  l.-c kung  j c hou  and h luo  2006 zero-configuration  robust indoor localization  theory and experimentation  in proceedings of ieee international conference on computer communications  infocom   hongbo liu  yu gan  jie yang  simon sidhom  yan wang  yingying chen  and fan ye  2012 push the limit of wifi based localization for smartphones  in proceedings of acm international conference on mobile computing and networking  mobicom   jingbin liu  ruizhi chen  ling pei  wei chen  tomi tenhunen  heidi kuusniemi  tuomo kroger  and yuwei chen  2010 accelerometer assisted robust wireless signal positioning based on a hidden markov model  in proceedings of the ieee/ion position location and navigation symposium  plans   kaikai liu  xinxin liu  and xiaolin li  2013 guoguo  enabling fine-grained indoor localization via smartphone  in proceedings of acm international conference on mobile systems  applications  and services  mobisys   a mannini and a.m sabatini  2011 a hidden markov model-based technique for gait segmentation using a foot-mounted gyroscope  in proceedings of ieee international conference of engineering in medicine and biology society  embs   rodolfo margaria and r margaria  1976 biomechanics and energetics of muscular exercise  clarendon press  oxford  m marschollek  mehmet goevercin  klaus-hendrik wolf  bianying song  m gietzelt  r haux  and elisabeth steinhagen-thiessen  2008 a performance comparison of accelerometry-based step detection algorithms on a large  non-laboratory sample of healthy and mobility-impaired persons  in proceedings of ieee international conference of engineering in medicine and biology society  embs   rainer mautz and sebastian tilch  2011 survey of optical indoor positioning systems  in proceedings of international conference on indoor positioning and indoor navigation  ipin   brian mcclendon  2011 a new frontier for google maps  mapping the indoors  retrieved from http  //googleblog.blogspot.hk/2011/11/new-frontier-for-google-maps-mapping.html  emiliano miluzzo  nicholas d lane  kristof fodor  ronald peterson  hong lu  mirco musolesi  shane b eisenman  xiao zheng  and andrew t campbell  2008 sensing meets mobile social networks  the design  implementation and evaluation of the cenceme application  in proceedings of acm conference on embedded networked sensor systems  sensys   ayman naguib  payam pakzad  ravi palanki  sameera poduri  and yin chen  2013 scalable and accurate indoor positioning on mobile devices  in proceedings of international conference on indoor positioning and indoor navigation  ipin   acm computing surveys  vol  47  no  3  article 54  publication date  april 2015  54:32 z yang et al  l m ni  yunhao liu  yiu cho lau  and a p patil  2003 landmarc  indoor location sensing using active rfid  in proceedings of ieee international conference on pervasive computing and communications  percom   jun-geun park  ami patel  dorothy curtis  seth teller  and jonathan ledlie  2012 online pose classification and walking speed estimation using handheld devices  in proceedings of acm international conference on ubiquitous computing  ubicomp   kwanghyo park  hyojeong shin  and hojung cha  2013 smartphone-based pedestrian tracking in indoor corridor environments  springer personal ubiquitous comput  17  2  2013   359370 neal patwari and sneha k kasera  2007 robust location distinction using temporal link signatures  in proceedings of acm international conference on mobile computing and networking  mobicom   n b priyantha  a chakraborty  and h balakrishnan  2000 the cricket location-support system  in proceedings of acm international conference on mobile computing and networking  mobicom   qifan pu  sidhant gupta  shyam gollakota  and shwetak patel  2013 whole-home gesture recognition using wireless signals  in proceedings of acm international conference on mobile computing and networking  mobicom   aveek purohit  zheng sun  shijia pan  and pei zhang  2013 sugartrail  indoor navigation in retail environments without surveys and maps  in proceedings of ieee communications society conference on sensor mesh and ad hoc communications and networks  secon   kiran k rachuri  mirco musolesi  cecilia mascolo  peter j rentfrow  chris longworth  and andrius aucinas  2010 emotionsense  a mobile phones based adaptive platform for experimental social psychology research  in proceedings of acm international conference on ubiquitous computing  ubicomp   valentin radu and mahesh k marina  2013 himloc  indoor smartphone localization via activity aware pedestrian dead reckoning with selective crowdsourced wifi fingerprinting  in proceedings of international conference on indoor positioning and indoor navigation  ipin   anshul rai  krishna kant chintalapudi  venkata n padmanabhan  and rijurekha sen 2012 zee  zeroeffort crowdsourcing for indoor localization  in proceedings of acm international conference on mobile computing and networking  mobicom   cliff randell  c djiallis  and h muller  2003 personal position measurement using dead reckoning  in proceedings of ieee international symposium on wearable computers  iswc   nishkam ravi  nikhil dandekar  preetham mysore  and michael l littman  2005 activity recognition from accelerometer data  in proceedings of aaai conference on innovative applications of artificial intelligence  iaai   valerie renaudin  melania susi  and gerard lachapelle  2012 step length estimation using handheld inertial sensors  sensors 12  7  2012   85078525 liu rong  duan zhiguo  zhou jianzhong  and liu ming  2007 identification of individual walking patterns using gait acceleration  in proceedings of international conference on bioinformatics and biomedical engineering  icbbe   jessica rose and james gibson gamble  2006 human walking  lippincott williams & wilkins  philadelphia  nirupam roy  he wang  and romit roy choudhury  2014 i am a smartphone and i can tell my users walking direction  in proceedings of acm international conference on mobile systems  applications  and services  mobisys   albrecht schmidt  michael beigl  and hans-w gellersen  1999 there is more to context than location  comput  graphics 23  6  dec 1999   893901 souvik sen  jeongkeun lee  kyu-han kim  and paul congdon  2013 back to the basics  avoiding multipath to revive inbuilding wifi localization  in proceedings of acm international conference on mobile systems  applications  and services  mobisys   souvik sen  bozidar radunovic  romit roy choudhury  and tom minka  2012 you are facing the mona lisa  spot localization using phy layer information  in proceedings of acm international conference on mobile systems  applications  and services  mobisys   guobin shen  zhuo chen  peichao zhang  thomas moscibroda  and yongguang zhang  2013 walkie-markie  indoor pathway mapping made easy  in proceedings of usenix conference on networked systems design and implementation  nsdi   pekka siirtola and juha roning  2012 recognizing human activities user-independently on smartphones based on accelerometer data  int  j interact  multimedia artif  intell  1  5  2012   3845 skyhook  2013 homepage  retrieved from http  //www.skyhookwireless.com/  philip steadman  2006 why are most buildings rectangular ? architect  res  quart  10  2  2006   119130 wei sun  junliang liu  chenshu wu  zheng yang  xinglin zhang  and yunhao liu  2013a  moloc  on distinguishing fingerprint twins  in proceedings of ieee international conference on distributed computing systems  icdcs   acm computing surveys  vol  47  no  3  article 54  publication date  april 2015 mobility increases localizability 54:33 zheng sun  shijia pan  yu-chi su  and pei zhang  2013b  headio  zero-configured heading acquisition for indoor mobile devices through multimodal context sensing  in proceedings of acm international conference on ubiquitous computing  ubicomp   melania susi  valerie renaudin  and gerard lachapelle  2013 motion mode recognition and step detection algorithms for mobile phone users  sensors 13  2  2013   15391562 arvind thiagarajan  2011 probabilistic models for mobile phone trajectory estimation  ph.d dissertation  massachusetts institute of technology  daniel turner  stefan savage  and alex c snoeren  2011 on the empirical performance of self-calibrating wifi location systems  in proceedings of ieee conference on local computer networks  lcn   ubisense  2013 homepage  retrieved from http  //www.ubisense.net  he wang  souvik sen  ahmed elgohary  moustafa farid  moustafa youssef  and romit roy choudhury  2012 no need to war-drive  unsupervised indoor localization  in proceedings of acm international conference on mobile systems  applications  and services  mobisys   he wang  zhiyang wang  guobin shen  fan li  song han  and feng zhao  2013 wheelloc  enabling continuous location service on mobile phone for outdoor scenarios  in proceedings of ieee international conference on computer communications  infocom   harvey weinberg  2002 using the adxl202 in pedometer and personal navigation applications  analog devices an-602 application note  2002   wikipedia  2014a  inertial measurement unit  retrieved from http  //en.wikipedia.org/wiki/inertial_ measurement_unit  wikipedia  2014b  dead reckoning  retrieved from http  //en.wikipedia.org/wiki/dead_reckoning  wikipedia  2014c  accelerometer  retrieved from http  //en.wikipedia.org/wiki/accelerometer  wikipedia  2014d  gyroscope  retrieved from http  //en.wikipedia.org/wiki/gyroscope  wikipedia  2014e  magnetometer  retrieved from http  //en.wikipedia.org/wiki/magnetometer  oliver woodman and robert harle  2008 pedestrian localisation for indoor environments  in proceedings of acm international conference on ubiquitous computing  ubicomp   chenshu wu  zheng yang  yunhao liu  and wei xi  2013a  will  wireless indoor localization without site survey  ieee trans  parallel distrib  syst  24  4  2013   839848 chenshu wu  zheng yang  yiyang zhao  and yunhao liu  2013b  footprints elicit the truth  improving global positioning accuracy via local mobility  in proceedings of ieee international conference on computer communications  infocom   kaishun wu  jiang xiao  youwen yi  min gao  and l.m  ni  2012 fila  fine-grained indoor localization  in proceedings of the 2012 ieee international conference on computer communications  infocom   22102218 jie yang  simon sidhom  gayathri chandrasekaran  tam vu  hongbo liu  nicolae cecan  yingying chen  marco gruteser  and richard p martin  2011 detecting driver phone use leveraging car speakers  in proceedings of acm international conference on mobile computing and networking  mobicom   zheng yang  longfei shangguan  weixi gu  zimu zhou  chenshu wu  and yunhao liu  2014 sherlock  micro-environment sensing for smartphones  ieee trans  parallel distrib  syst  25  12  2014   3295 3305 zheng yang  chenshu wu  and yunhao liu  2012 locating in fingerprint space  wireless indoor localization with little human intervention  in proceedings of acm international conference on mobile computing and networking  mobicom   mao ye  dong shou  wang-chien lee  peifeng yin  and krzysztof janowicz  2011 on the semantic annotation of places in location-based social networks  in proceedings of acm sigkdd international conference on knowledge discovery and data mining  kdd   sungro yoon  kyunghan lee  and injong rhee  2013 fm-based indoor localization via automatic fingerprint db construction and matching  in proceedings of acm international conference on mobile systems  applications  and services  mobisys   chuang-wen you  nicholas d lane  fanglin chen  rui wang  zhenyu chen  thomas j bao  martha montesde oca  yuting cheng  mu lin  lorenzo torresani  and andrew t campbell  2013 carsafe app  alerting drowsy and distracted drivers using dual cameras on smartphones  in proceedings of acm international conference on mobile systems  applications  and services  mobisys   moustafa youssef and ashok agrawala  2005 the horus wlan location determination system  in proceedings of acm international conference on mobile systems  applications  and services  mobisys   m youssef  m a yosef  and m el-derini  2010 gac  energy-efficient hybrid gps-accelerometer-compass gsm localization  in proceedings of ieee global telecommunications conference  globecom   acm computing surveys  vol  47  no  3  article 54  publication date  april 2015  54:34 z yang et al  francisco zampella  r jimenez  r antonio  and fernando seco  2013 robust indoor positioning fusing pdr and rf technologies  the rfid and uwb case  in proceedings of international conference on indoor positioning and indoor navigation  ipin   vladimir m zatsiorsky  1998 kinematics of human motion  human kinetics  xinglin zhang  zheng yang  chenshu wu  wei sun  and yunhao liu  2014 robust trajectory estimation for crowdsourcing-based mobile applications  ieee trans  parallel distrib  syst  25  7  july 2014   1876 1885 vincent wenchen zheng  evan wei xiang  qiang yang  and dou shen  2008 transferring localization models over time  in proceedings of aaai national conference on artificial intelligence  aaai   yu zheng and xiaofang zhou  2011 computing with spatial trajectories  springer  pengfei zhou  yuanqing zheng  and mo li  2012a  how long to wait ?  predicting bus arrival time with mobile phone based participatory sensing  in proceedings of acm international conference on mobile systems  applications  and services  mobisys   pengfei zhou  yuanqing zheng  zhenjiang li  mo li  and guobin shen  2012b  iodetector  a generic service for indoor outdoor detection  in proceedings of acm conference on embedded networked sensor systems  sensys   xiaojun zhu  qun li  and guihai chen  2013 apt  accurate outdoor pedestrian tracking with smartphones  in proceedings of ieee international conference on computer communications  infocom   received february 2014 ; revised july 2014 ; accepted october 2014 acm computing surveys  vol  47  no  3  article 54  publication date  april 2015  